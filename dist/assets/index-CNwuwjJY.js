import{r as l,a as dt,R as as}from"./vendor-nf7bT_Uh.js";import{A as ve,M as We,L as ls,E as Fe,a as ue,b as mt,C as de,c as ms,d as us,U as xt,e as hs,f as ks,g as ke,H as Ls,B as Ms,G as Oe,h as Ce,P as ut,S as Je,i as ss,j as Me,k as Ne,T as me,l as ae,m as ie,n as Ns,o as ee,p as Ps,F as X,q as ze,r as be,s as Qe,t as Be,u as gs,v as ht,V as _e,w as Ke,X as he,x as Ee,y as oe,z as xs,D as gt,I as ts,J as ns,K as pt,N as bt,O as is,Q as es,R as fs,W as Ws,Y as $e,Z as ft,_ as pe,$ as jt,a0 as yt,a1 as Is,a2 as Ts,a3 as js,a4 as ws,a5 as Nt,a6 as Te,a7 as ps,a8 as vt,a9 as wt,aa as Js,ab as St,ac as ys,ad as Ie,ae as kt,af as Ct,ag as At,ah as _t,ai as Rs,aj as Pt,ak as Tt,al as Et,am as Dt,an as Ft,ao as $t,ap as Lt,aq as Mt,ar as Ks,as as It,at as Rt,au as Ut,av as Us,aw as Ot,ax as Os,ay as zt,az as Bt}from"./ui-CB3XzmPJ.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var Zs={exports:{}},vs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt=l,Vt=Symbol.for("react.element"),qt=Symbol.for("react.fragment"),Yt=Object.prototype.hasOwnProperty,Ht=Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wt={key:!0,ref:!0,__self:!0,__source:!0};function Qs(s,r,t){var a,o={},c=null,n=null;t!==void 0&&(c=""+t),r.key!==void 0&&(c=""+r.key),r.ref!==void 0&&(n=r.ref);for(a in r)Yt.call(r,a)&&!Wt.hasOwnProperty(a)&&(o[a]=r[a]);if(s&&s.defaultProps)for(a in r=s.defaultProps,r)o[a]===void 0&&(o[a]=r[a]);return{$$typeof:Vt,type:s,key:c,ref:n,props:o,_owner:Ht.current}}vs.Fragment=qt;vs.jsx=Qs;vs.jsxs=Qs;Zs.exports=vs;var e=Zs.exports,Xs,zs=dt;Xs=zs.createRoot,zs.hydrateRoot;const O="https://your-backend-name.onrender.com/api",z={AUTH:{LOGIN:`${O}/auth/login`,GOOGLE_LOGIN:`${O}/auth/google/login`,REGISTER:`${O}/auth/register`,PROFILE:`${O}/auth/profile`,CHANGE_PASSWORD:`${O}/auth/change-password`,LOGOUT:`${O}/auth/logout`,LOGOUT_ALL:`${O}/auth/logout-all`,REFRESH:`${O}/auth/refresh`,VALIDATE_TOKEN:`${O}/auth/validate-token`,FORGOT_PASSWORD:`${O}/auth/forgot-password`,RESET_PASSWORD:`${O}/auth/reset-password`,VERIFY_RESET_TOKEN:`${O}/auth/verify-reset-token`,CLEANUP_TOKENS:`${O}/auth/cleanup-tokens`,TOKEN_STATS:`${O}/auth/token-stats`},COURSES:{BASE:`${O}/courses`,BY_ID:s=>`${O}/courses/${s}`,ENROLL:s=>`${O}/courses/${s}/enroll`,UNENROLL:s=>`${O}/courses/${s}/unenroll`,MATERIALS:s=>`${O}/courses/${s}/materials`,STUDENTS:s=>`${O}/courses/${s}/students`},ASSIGNMENTS:{BASE:`${O}/assignments`,BY_ID:s=>`${O}/assignments/${s}`,SUBMIT:s=>`${O}/assignments/${s}/submit`,GRADE:s=>`${O}/assignments/submissions/${s}/grade`},USERS:{BASE:`${O}/users`,BY_ID:s=>`${O}/users/${s}`,DEACTIVATE:s=>`${O}/users/${s}/deactivate`,ACTIVATE:s=>`${O}/users/${s}/activate`,RESET_PASSWORD:s=>`${O}/users/${s}/reset-password`,BULK_IMPORT:`${O}/users/bulk-import`,STATISTICS:`${O}/users/statistics`},AI:{CHAT:`${O}/ai/chat`,CHAT_WELCOME:`${O}/ai/chat/welcome`,SUMMARIZE:`${O}/ai/summarize`,RECOMMENDATIONS:`${O}/ai/recommendations`,CHAT_HISTORY:`${O}/ai/chat-history`,LEARNING_PATH:`${O}/ai/learning-path`},ANALYTICS:{DASHBOARD:`${O}/analytics/dashboard`,COURSE:s=>`${O}/analytics/course/${s}`,STUDENT:s=>`${O}/analytics/student/${s}`,SYSTEM:`${O}/analytics/system`,TEACHER_DASHBOARD:`${O}/analytics/teacher/dashboard`,TEACHER_ASSIGNMENTS:`${O}/analytics/teacher/assignments`},STUDENT_PROGRESS:{ALL_STUDENTS:`${O}/student-progress/teacher/students`,STUDENT_DETAIL:s=>`${O}/student-progress/teacher/student/${s}`,COURSE_PROGRESS:s=>`${O}/student-progress/teacher/course/${s}/progress`,ENGAGEMENT_ALERTS:`${O}/student-progress/teacher/engagement/alerts`,ENGAGEMENT_SUMMARY:`${O}/student-progress/teacher/engagement/summary`,COURSE_ENGAGEMENT:s=>`${O}/student-progress/teacher/engagement/course/${s}/monitor`},LEARNER_ANALYTICS:{PERFORMANCE_ANALYSIS:`${O}/learner-analytics/performance-analysis`,STUDENT_RECOMMENDATIONS:`${O}/learner-analytics/student-recommendations`,PERFORMANCE_ALERTS:`${O}/learner-analytics/performance-alerts`},NOTIFICATIONS:{BASE:`${O}/notifications`,BY_ID:s=>`${O}/notifications/${s}`,MARK_READ:s=>`${O}/notifications/${s}/read`,MARK_ALL_READ:`${O}/notifications/read-all`,UNREAD_COUNT:`${O}/notifications/unread-count`},HEALTH:`${O}/health`},et={headers:{"Content-Type":"application/json"}},le={getAccessToken:()=>localStorage.getItem("access_token"),getRefreshToken:()=>localStorage.getItem("refresh_token"),setTokens:(s,r)=>{localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",r)},clearTokens:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},isTokenExpired:s=>{try{const r=JSON.parse(atob(s.split(".")[1]));return Date.now()>=r.exp*1e3}catch{return!0}}},Cs=()=>{const s=le.getAccessToken();return s?{Authorization:`Bearer ${s}`}:{}};class st{constructor(r=O){this.isRefreshing=!1,this.refreshPromise=null,this.maxRetries=2,this.retryDelay=1e3,this.baseURL=r}shouldRetry(r,t){var a,o;return t>=this.maxRetries?!1:!r.response||((a=r.response)==null?void 0:a.status)>=500||((o=r.response)==null?void 0:o.status)===429}async delay(r){return new Promise(t=>setTimeout(t,r))}async refreshToken(){const r=le.getRefreshToken();if(!r)throw new Error("No refresh token available");try{const t=await fetch(`${this.baseURL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({refresh_token:r})});if(!t.ok)throw new Error("Token refresh failed");const a=await t.json();le.setTokens(a.access_token,a.refresh_token)}catch(t){throw le.clearTokens(),window.dispatchEvent(new CustomEvent("auth:token-expired")),t}}async request(r,t={}){const a=r.startsWith("http")?r:`${this.baseURL}${r}`,o=le.getAccessToken();o&&le.isTokenExpired(o)&&!r.includes("/auth/refresh")&&(this.isRefreshing||(this.isRefreshing=!0,this.refreshPromise=this.refreshToken().finally(()=>{this.isRefreshing=!1,this.refreshPromise=null})),this.refreshPromise&&await this.refreshPromise);const c={...et.headers,...Cs(),...t.headers||{}},n={...t,headers:c};try{const g=await fetch(a,n);if(!g.ok){const b=await g.json().catch(()=>({}));if(g.status===401&&b.code==="TOKEN_EXPIRED"&&!r.includes("/auth/refresh"))try{await this.refreshToken();const i={...n.headers||{},...Cs()},x={...n,headers:i},j=await fetch(a,x);if(j.ok)return await j.json()}catch{}throw new Error(b.error||`HTTP ${g.status}: ${g.statusText}`)}return await g.json()}catch(g){throw console.error("API Request failed:",g),g}}async get(r){return this.request(r,{method:"GET"})}async post(r,t){return this.request(r,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(r,t){return this.request(r,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(r){return this.request(r,{method:"DELETE"})}}const B=new st,De={login:async(s,r)=>{const t=await B.post(z.AUTH.LOGIN,{email:s,password:r});return t.access_token&&t.refresh_token&&le.setTokens(t.access_token,t.refresh_token),t},googleLogin:async(s,r="student")=>{const t=await B.post(z.AUTH.GOOGLE_LOGIN,{credential:s,role:r});return t.access_token&&t.refresh_token&&le.setTokens(t.access_token,t.refresh_token),t},register:async s=>{const r=await B.post(z.AUTH.REGISTER,s);return r.access_token&&r.refresh_token&&le.setTokens(r.access_token,r.refresh_token),r},logout:async()=>{try{await B.post(z.AUTH.LOGOUT)}finally{le.clearTokens()}},logoutAll:async()=>{try{await B.post(z.AUTH.LOGOUT_ALL)}finally{le.clearTokens()}},refreshToken:async()=>{const s=le.getRefreshToken();if(!s)throw new Error("No refresh token available");const r=await B.post(z.AUTH.REFRESH,{refresh_token:s});return r.access_token&&r.refresh_token&&le.setTokens(r.access_token,r.refresh_token),r},validateToken:()=>B.get(z.AUTH.VALIDATE_TOKEN),getProfile:()=>B.get(z.AUTH.PROFILE),updateProfile:s=>B.put(z.AUTH.PROFILE,s),changePassword:(s,r)=>B.post(z.AUTH.CHANGE_PASSWORD,{current_password:s,new_password:r}),forgotPassword:s=>B.post(z.AUTH.FORGOT_PASSWORD,{email:s}),resetPassword:(s,r)=>B.post(z.AUTH.RESET_PASSWORD,{token:s,new_password:r}),verifyResetToken:s=>B.post(z.AUTH.VERIFY_RESET_TOKEN,{token:s}),cleanupTokens:()=>B.post(z.AUTH.CLEANUP_TOKENS),getTokenStats:()=>B.get(z.AUTH.TOKEN_STATS)},tt={getAll:()=>B.get(z.ASSIGNMENTS.BASE),getById:s=>B.get(z.ASSIGNMENTS.BY_ID(s)),create:s=>B.post(z.ASSIGNMENTS.BASE,s),update:(s,r)=>B.put(z.ASSIGNMENTS.BY_ID(s),r),submit:(s,r)=>B.post(z.ASSIGNMENTS.SUBMIT(s),r),grade:(s,r,t)=>B.post(z.ASSIGNMENTS.GRADE(s),{grade:r,feedback:t})},Xe={chat:s=>B.post(z.AI.CHAT,{message:s}),getWelcomeMessage:()=>B.get(z.AI.CHAT_WELCOME),summarize:(s,r="text")=>B.post(z.AI.SUMMARIZE,{content:s,type:r}),getRecommendations:()=>B.get(z.AI.RECOMMENDATIONS),getChatHistory:(s=1,r=20)=>B.get(`${z.AI.CHAT_HISTORY}?page=${s}&limit=${r}`),generateLearningPath:(s,r="month")=>B.post(z.AI.LEARNING_PATH,{goal:s,timeframe:r})},He={getPerformanceAnalysis:(s,r)=>{const t=new URLSearchParams;s&&t.append("course_id",s),r&&t.append("type",r);const a=t.toString();return B.get(`${z.LEARNER_ANALYTICS.PERFORMANCE_ANALYSIS}${a?`?${a}`:""}`)},getStudentRecommendations:s=>B.get(`${z.LEARNER_ANALYTICS.STUDENT_RECOMMENDATIONS}?student_id=${s}`),getPerformanceAlerts:()=>B.get(z.LEARNER_ANALYTICS.PERFORMANCE_ALERTS)},Ue={getAll:(s=!1,r=50)=>B.get(`${z.NOTIFICATIONS.BASE}?unread_only=${s}&limit=${r}`),markAsRead:s=>B.post(z.NOTIFICATIONS.MARK_READ(s)),markAllAsRead:()=>B.post(z.NOTIFICATIONS.MARK_ALL_READ),getUnreadCount:()=>B.get(z.NOTIFICATIONS.UNREAD_COUNT),delete:s=>B.delete(z.NOTIFICATIONS.BY_ID(s))},rt=Object.freeze(Object.defineProperty({__proto__:null,API_ENDPOINTS:z,ApiClient:st,HTTP_CONFIG:et,aiAPI:Xe,apiClient:B,assignmentsAPI:tt,authAPI:De,getAuthHeaders:Cs,learnerAnalyticsAPI:He,notificationsAPI:Ue,tokenManager:le},Symbol.toStringTag,{value:"Module"})),at=l.createContext(void 0),re=()=>{const s=l.useContext(at);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Jt=({children:s})=>{const[r,t]=l.useState(null),[a,o]=l.useState(!0),c=!!r&&!!le.getAccessToken(),n=async()=>{if(!le.getAccessToken())return!1;try{return await De.validateToken(),!0}catch(h){return console.error("Token validation failed:",h),!1}},g=async()=>{const f=le.getAccessToken();if(!f){o(!1);return}try{if(le.isTokenExpired(f))try{await De.refreshToken()}catch(d){console.error("Token refresh failed:",d),le.clearTokens(),o(!1);return}const h=await De.getProfile();t(h.user)}catch(h){console.error("Failed to load user:",h),le.clearTokens()}finally{o(!1)}},b=async(f,h)=>{try{const d=await De.login(f,h);t(d.user)}catch(d){throw console.error("Login failed:",d),d}},i=async(f,h="student")=>{try{const d=await De.googleLogin(f,h);t(d.user)}catch(d){throw console.error("Google login failed:",d),d}},x=async f=>{try{const h=await De.register(f);t(h.user)}catch(h){throw console.error("Registration failed:",h),h}},j=async()=>{try{await De.logout()}catch(f){console.error("Logout API call failed:",f)}finally{t(null),le.clearTokens()}},u=async()=>{try{await De.logoutAll()}catch(f){console.error("Logout all API call failed:",f)}finally{t(null),le.clearTokens()}},S=async()=>{try{const f=await De.getProfile();t(f.user)}catch(f){throw console.error("Failed to refresh user:",f),f}};l.useEffect(()=>{const f=()=>{console.log("Token expired, logging out user"),t(null),le.clearTokens(),window.location.href="/login"};return window.addEventListener("auth:token-expired",f),()=>{window.removeEventListener("auth:token-expired",f)}},[]),l.useEffect(()=>{g()},[]),l.useEffect(()=>{if(!c)return;const f=setInterval(async()=>{await n()||(console.log("Token validation failed, logging out user"),t(null),le.clearTokens())},5*60*1e3);return()=>clearInterval(f)},[c]);const y={user:r,isAuthenticated:c,isLoading:a,login:b,googleLogin:i,register:x,logout:j,logoutAll:u,refreshUser:S,checkTokenValidity:n};return e.jsx(at.Provider,{value:y,children:s})};class bs{static async getCourses(){try{return(await B.get(z.COURSES.BASE)).courses}catch(r){throw console.error("Failed to fetch courses:",r),new Error("Failed to load courses")}}static async getCourseById(r){try{return(await B.get(z.COURSES.BY_ID(r))).course}catch(t){throw console.error("Failed to fetch course:",t),new Error("Failed to load course details")}}static async createCourse(r){try{return(await B.post(z.COURSES.BASE,r)).course}catch(t){throw console.error("Failed to create course:",t),new Error("Failed to create course")}}static async updateCourse(r,t){try{return(await B.put(z.COURSES.BY_ID(r),t)).course}catch(a){throw console.error("Failed to update course:",a),new Error("Failed to update course")}}static async deleteCourse(r){try{await this.updateCourse(r,{is_active:!1})}catch(t){throw console.error("Failed to delete course:",t),new Error("Failed to delete course")}}static async getCourseStudents(r){try{return(await B.get(z.COURSES.STUDENTS(r))).students}catch(t){throw console.error("Failed to fetch course students:",t),new Error("Failed to load course students")}}static async uploadMaterial(r,t){try{return(await B.post(z.COURSES.MATERIALS(r),t)).material}catch(a){throw console.error("Failed to upload material:",a),new Error("Failed to upload course material")}}static async uploadVideo(r,t){try{const a=new FormData;a.append("video",t.video),a.append("title",t.title),t.description&&a.append("description",t.description),t.order!==void 0&&a.append("order",t.order.toString()),t.duration&&a.append("duration",t.duration);const o=localStorage.getItem("access_token"),c=await fetch(`${z.COURSES.BY_ID(r)}/upload-video`,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:a});if(!c.ok){const g=await c.json().catch(()=>({}));throw new Error(g.error||"Failed to upload video")}return(await c.json()).video}catch(a){throw console.error("Failed to upload video:",a),new Error("Failed to upload video")}}static async getCourseMaterials(r){try{return(await this.getCourseById(r)).materials||[]}catch(t){throw console.error("Failed to fetch course materials:",t),new Error("Failed to load course materials")}}static async updateCourseProgress(r,t,a,o){try{await B.post(`${z.COURSES.BY_ID(r)}/progress`,{material_id:t,completed:a,watch_time:o||0})}catch(c){throw console.error("Failed to update course progress:",c),new Error("Failed to update progress")}}static async enrollStudent(r){try{await B.post(z.COURSES.ENROLL(r))}catch(t){throw console.error("Failed to enroll in course:",t),new Error("Failed to enroll in course")}}static async unenrollStudent(r){try{await B.post(z.COURSES.UNENROLL(r))}catch(t){throw console.error("Failed to unenroll from course:",t),new Error("Failed to unenroll from course")}}static async getCourseStatistics(r){try{const t=await this.getCourseById(r);return{enrolled_students:t.enrolled_students,active_students:t.active_students||0,completion_rate:t.completion_rate||0,engagement_rate:t.engagement_rate||0,average_progress:t.average_progress||0}}catch(t){throw console.error("Failed to fetch course statistics:",t),new Error("Failed to load course statistics")}}static async getCoursesWithStats(){try{return await this.getCourses()}catch(r){throw console.error("Failed to fetch courses with statistics:",r),new Error("Failed to load courses with statistics")}}static async duplicateCourse(r,t){try{const a=await this.getCourseById(r),o={title:t,description:a.description,category:a.category,difficulty:a.difficulty,duration:a.duration,prerequisites:a.prerequisites,learning_objectives:a.learning_objectives,thumbnail:a.thumbnail,is_public:a.is_public,max_students:a.max_students};return await this.createCourse(o)}catch(a){throw console.error("Failed to duplicate course:",a),new Error("Failed to duplicate course")}}static async archiveCourse(r){try{return await this.updateCourse(r,{is_active:!1})}catch(t){throw console.error("Failed to archive course:",t),new Error("Failed to archive course")}}static async restoreCourse(r){try{return await this.updateCourse(r,{is_active:!0})}catch(t){throw console.error("Failed to restore course:",t),new Error("Failed to restore course")}}static async getCourseEnrollmentAnalytics(r){try{const[t,a]=await Promise.all([this.getCourseById(r),this.getCourseStudents(r)]),o=a.filter(n=>n.is_active).length,c=a.filter(n=>n.progress>=100).length;return{total_enrollments:t.enrolled_students,active_enrollments:o,completion_rate:t.enrolled_students>0?c/t.enrolled_students*100:0,dropout_rate:t.enrolled_students>0?(t.enrolled_students-o)/t.enrolled_students*100:0,enrollment_trend:[]}}catch(t){throw console.error("Failed to fetch enrollment analytics:",t),new Error("Failed to load enrollment analytics")}}}class Ze{static async getAssignments(){try{return(await B.get(z.ASSIGNMENTS.BASE)).assignments}catch(r){throw console.error("Failed to fetch assignments:",r),new Error("Failed to load assignments")}}static async getAssignmentById(r){try{return(await B.get(z.ASSIGNMENTS.BY_ID(r))).assignment}catch(t){throw console.error("Failed to fetch assignment:",t),new Error("Failed to load assignment details")}}static async createAssignment(r){try{return(await B.post(z.ASSIGNMENTS.BASE,r)).assignment}catch(t){throw console.error("Failed to create assignment:",t),new Error("Failed to create assignment")}}static async updateAssignment(r,t){try{return(await B.put(z.ASSIGNMENTS.BY_ID(r),t)).assignment}catch(a){throw console.error("Failed to update assignment:",a),new Error("Failed to update assignment")}}static async deleteAssignment(r){try{await this.updateAssignment(r,{is_active:!1})}catch(t){throw console.error("Failed to delete assignment:",t),new Error("Failed to delete assignment")}}static async submitAssignment(r,t){try{return(await B.post(z.ASSIGNMENTS.SUBMIT(r),t)).submission}catch(a){throw console.error("Failed to submit assignment:",a),new Error("Failed to submit assignment")}}static async gradeSubmission(r,t){try{await B.post(z.ASSIGNMENTS.GRADE(r),t)}catch(a){throw console.error("Failed to grade submission:",a),new Error("Failed to grade submission")}}static async getCourseAssignments(r){try{return(await this.getAssignments()).filter(a=>a.course_id===r)}catch(t){throw console.error("Failed to fetch course assignments:",t),new Error("Failed to load course assignments")}}static async getPendingAssignments(){try{return(await this.getAssignments()).filter(t=>t.submission_count&&t.submission_count>0)}catch(r){throw console.error("Failed to fetch pending assignments:",r),new Error("Failed to load pending assignments")}}static async getAssignmentStatistics(){try{const r=await this.getAssignments(),t=r.length;let a=0,o=0,c=0,n=0;const g=[],b=[];for(const u of r){const S=u.submission_count||0;a+=S;try{const f=(await this.getAssignmentById(u._id)).submissions||[],h=f.filter(L=>L.status==="graded").length;o+=h;const d=f.filter(L=>L.grade!==void 0&&L.grade!==null).map(L=>L.grade);d.length>0&&(c+=d.reduce((L,v)=>L+v,0),n+=d.length);const w=S-h;if(w>0){const L=new Date(u.due_date),v=new Date,E=Math.ceil((L.getTime()-v.getTime())/(1e3*60*60*24));let A="low";E<0||E<=3?A="high":E<=7&&(A="medium"),g.push({assignment_id:u._id,assignment_title:u.title,course_title:u.course_title||"",due_date:u.due_date,pending_submissions:w,total_submissions:S,priority:A})}const p=d.length>0?d.reduce((L,v)=>L+v,0)/d.length:0,m=u.max_points>0?S/u.max_points*100:0,C=u.max_points>0?p/u.max_points*100:0;b.push({assignment_id:u._id,assignment_title:u.title,course_title:u.course_title||"",max_points:u.max_points,total_submissions:S,graded_submissions:h,submission_rate:m,average_grade:p,grade_percentage:C,due_date:u.due_date,created_at:u.created_at})}catch(y){console.warn(`Failed to get details for assignment ${u._id}:`,y)}}const i=a-o,x=a>0?o/a*100:0,j=n>0?c/n:0;return{total_assignments:t,pending_submissions:i,graded_submissions:o,completion_rate:x,average_grade:j,grading_workload:g.sort((u,S)=>{const y={high:3,medium:2,low:1};return y[S.priority]-y[u.priority]}),assignment_performance:b.sort((u,S)=>new Date(S.created_at).getTime()-new Date(u.created_at).getTime())}}catch(r){throw console.error("Failed to calculate assignment statistics:",r),new Error("Failed to load assignment statistics")}}static async getAssignmentSubmissions(r){try{return(await this.getAssignmentById(r)).submissions||[]}catch(t){throw console.error("Failed to fetch assignment submissions:",t),new Error("Failed to load assignment submissions")}}static async getStudentSubmission(r){try{return(await this.getAssignmentById(r)).submission||null}catch(t){throw console.error("Failed to fetch student submission:",t),new Error("Failed to load submission")}}static isAssignmentOverdue(r){return new Date>new Date(r.due_date)}static getDaysUntilDeadline(r){const t=new Date,o=new Date(r.due_date).getTime()-t.getTime();return Math.ceil(o/(1e3*60*60*24))}static formatDeadline(r){const t=new Date(r.due_date),a=new Date,o=t.getTime()-a.getTime(),c=Math.ceil(o/(1e3*60*60*24));return c<0?`Overdue by ${Math.abs(c)} day(s)`:c===0?"Due today":c===1?"Due tomorrow":`Due in ${c} day(s)`}static getAssignmentPriority(r){var o;const t=this.getDaysUntilDeadline(r),a=(r.submission_count||0)-(((o=r.submissions)==null?void 0:o.filter(c=>c.status==="graded").length)||0);return t<0||t<=3&&a>0?"high":t<=7&&a>0?"medium":"low"}static async bulkGradeSubmissions(r){try{const t=r.map(({submissionId:a,grade:o,feedback:c})=>this.gradeSubmission(a,{grade:o,feedback:c}));await Promise.all(t)}catch(t){throw console.error("Failed to bulk grade submissions:",t),new Error("Failed to grade submissions")}}static async exportAssignmentData(r){try{const t=await this.getAssignmentById(r),a=t.submissions||[],o=a.length,c=a.filter(i=>i.status==="graded").length,n=a.filter(i=>i.grade!==void 0).map(i=>i.grade),g=n.length>0?n.reduce((i,x)=>i+x,0)/n.length:0,b=t.max_points>0?o/t.max_points*100:0;return{assignment:t,submissions:a,statistics:{totalSubmissions:o,gradedSubmissions:c,averageGrade:g,submissionRate:b}}}catch(t){throw console.error("Failed to export assignment data:",t),new Error("Failed to export assignment data")}}}const lt=l.createContext(void 0),Ge=()=>{const s=l.useContext(lt);if(s===void 0)throw new Error("useLMS must be used within an LMSProvider");return s},Kt=({children:s})=>{const[r,t]=l.useState(!0),[a,o]=l.useState(null),[c,n]=l.useState([]),[g,b]=l.useState([]),[i,x]=l.useState([]),[j,u]=l.useState(!1),[S,y]=l.useState(null),[f,h]=l.useState(null),[d,w]=l.useState(!0),p=5*60*1e3,m=l.useCallback(async()=>{try{y(null);const A=(await bs.getCourses()).map(N=>{var Y,k;return{id:N._id,title:N.title,description:N.description,instructor:N.teacher_name||"Instructor",progress:N.average_progress||0,totalLessons:((Y=N.materials)==null?void 0:Y.length)||0,completedLessons:Math.floor((N.average_progress||0)/100*(((k=N.materials)==null?void 0:k.length)||0)),thumbnail:N.thumbnail||"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",category:N.category,difficulty:N.difficulty,rating:4.5,students:N.enrolled_students,createdAt:new Date(N.created_at).getTime(),duration:N.duration}});n(A)}catch(E){const A=E instanceof Error?E.message:"Failed to fetch courses";y(A),console.error("Failed to fetch courses:",E)}},[]),C=l.useCallback(async()=>{try{y(null);const A=(await Ze.getAssignments()).map(N=>{var Y;return{id:N._id,title:N.title,courseId:N.course_id,dueDate:N.due_date,status:N.submission_status||"pending",grade:(Y=N.submission)==null?void 0:Y.grade,description:N.description}});b(A)}catch(E){const A=E instanceof Error?E.message:"Failed to fetch assignments";y(A),console.error("Failed to fetch assignments:",E)}},[]),L=l.useCallback(async()=>{var E;try{y(null);const N=((E=(await Ue.getAll(!1,20)).notifications)==null?void 0:E.map(Y=>({id:Y._id,title:Y.title,content:Y.message,date:Y.created_at,type:Y.type==="alert"?"warning":"info"})))||[];x(N)}catch(A){const N=A instanceof Error?A.message:"Failed to fetch announcements";y(N),console.error("Failed to fetch announcements:",A)}},[]),v=l.useCallback(async()=>{try{u(!0),y(null),await Promise.all([m(),C(),L()]),h(new Date)}catch(E){const A=E instanceof Error?E.message:"Failed to refresh data";y(A),console.error("Failed to refresh data:",E)}finally{u(!1)}},[m,C,L]);return l.useEffect(()=>{v()},[v]),l.useEffect(()=>{if(!d)return;const E=setInterval(()=>{console.log("Auto-refreshing LMS data..."),v()},p);return()=>{clearInterval(E)}},[d,v,p]),l.useEffect(()=>{const E=()=>{document.visibilityState==="visible"&&d&&(!f||new Date().getTime()-f.getTime()>6e4)&&(console.log("Tab became visible, refreshing data..."),v())};return document.addEventListener("visibilitychange",E),()=>{document.removeEventListener("visibilitychange",E)}},[d,f,v]),e.jsx(lt.Provider,{value:{courses:c,assignments:g,announcements:i,loading:j,error:S,sidebarOpen:r,setSidebarOpen:t,selectedCourse:a,setSelectedCourse:o,fetchCourses:m,fetchAssignments:C,fetchAnnouncements:L,refreshData:v,lastRefreshTime:f,enableAutoRefresh:d,setEnableAutoRefresh:w},children:s})},Zt=({role:s="student"})=>{const{googleLogin:r}=re(),t=()=>{typeof window<"u"&&window.google?(window.google.accounts.id.initialize({client_id:"YOUR_GOOGLE_CLIENT_ID",callback:async a=>{try{await r(a.credential,s)}catch(o){console.error("Google login failed:",o)}}}),window.google.accounts.id.prompt()):console.error("Google Sign-In not loaded")};return e.jsxs("button",{type:"button",onClick:t,className:"flex items-center justify-center px-3 sm:px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors w-full",children:[e.jsxs("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.17.81-.67z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm font-medium text-gray-700",children:"Google"})]})},Qt=({onToggleForm:s,onForgotPassword:r})=>{const[t,a]=l.useState(""),[o,c]=l.useState(""),[n,g]=l.useState("student"),[b,i]=l.useState(!1),[x,j]=l.useState(""),[u,S]=l.useState(!1),{login:y,isLoading:f}=re(),h=async w=>{w.preventDefault(),j("");try{await y(t,o,n)}catch{j("Invalid email or password")}},d=(w,p)=>{a(w),c(p),w.includes("student")?g("student"):w.includes("teacher")?g("teacher"):w.includes("superadmin")&&g("super_admin")};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Sign in to continue your learning journey"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4 sm:space-y-6",children:[x&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[e.jsx(ve,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:x})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:t,onChange:w=>a(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Login as"}),e.jsxs("select",{id:"role",value:n,onChange:w=>g(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:!0,children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"teacher",children:"Teacher"}),e.jsx("option",{value:"super_admin",children:"Super Administrator"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("button",{type:"button",onClick:r,className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:b?"text":"password",value:o,onChange:w=>c(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>i(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:b?e.jsx(Fe,{}):e.jsx(ue,{})})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",checked:u,onChange:w=>S(w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]})}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:f?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-5 w-5"}),"Sign In"]})})]}),e.jsxs("div",{className:"relative my-4 sm:my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx(Zt,{role:n}),e.jsxs("button",{type:"button",disabled:!0,className:"flex items-center justify-center px-3 sm:px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed opacity-60",children:[e.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#1877F2",d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.407c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385c5.737-.9 10.125-5.864 10.125-11.854z"})}),e.jsx("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm font-medium text-gray-700",children:"Facebook"})]})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx(de,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-900",children:"Try Demo Accounts"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("button",{type:"button",className:"text-left p-2 bg-white border border-gray-300 rounded-lg hover:bg-blue-50 transition-colors",onClick:()=>d("student01@datams.edu","Stud@2025"),children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Student Account"}),e.jsx("div",{className:"text-xs text-blue-700 truncate",children:"student01@datams.edu"})]}),e.jsxs("button",{type:"button",className:"text-left p-2 bg-white border border-gray-300 rounded-lg hover:bg-blue-50 transition-colors",onClick:()=>d("teacher01@datams.edu","Teach@2025"),children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Teacher Account"}),e.jsx("div",{className:"text-xs text-blue-700 truncate",children:"teacher01@datams.edu"})]}),e.jsxs("button",{type:"button",className:"text-left p-2 bg-white border border-gray-300 rounded-lg hover:bg-blue-50 transition-colors",onClick:()=>d("superadmin@datams.edu","Admin@123456"),children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Super Administrator"}),e.jsx("div",{className:"text-xs text-blue-700 truncate",children:"superadmin@datams.edu"})]})]})]}),n!=="super_admin"&&e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign up for free"})]}),n==="super_admin"&&e.jsx("p",{className:"text-center text-sm text-gray-500 mt-6 italic",children:"Super Administrator accounts are predefined by the system."})]})},Xt=({onToggleForm:s})=>{const[r,t]=l.useState(1),[a,o]=l.useState([]),[c,n]=l.useState(""),[g,b]=l.useState(""),[i,x]=l.useState(""),[j,u]=l.useState(""),[S,y]=l.useState(""),[f,h]=l.useState("student"),[d,w]=l.useState(null),[p,m]=l.useState(!1),[C,L]=l.useState(!1),[v,E]=l.useState(""),[A,N]=l.useState(""),[Y,k]=l.useState(""),[U,V]=l.useState(""),[R,F]=l.useState(""),[I,ne]=l.useState(""),[we,ge]=l.useState(""),[Ve,D]=l.useState(!1),{register:q,isLoading:ce}=re(),Re=(()=>{const P=[{id:1,title:"Role Selection",description:"Choose your role"},{id:2,title:"Basic Info",description:"Personal details"},{id:3,title:"Account Security",description:"Password setup"}];return f==="student"?[...P,{id:4,title:"Academic Info",description:"Student details"},{id:5,title:"Profile Picture",description:"Optional photo"}]:f==="teacher"?[...P,{id:4,title:"Professional Info",description:"Faculty details"},{id:5,title:"Profile Picture",description:"Optional photo"}]:[...P,{id:4,title:"Profile Picture",description:"Optional photo"}]})(),qe=Re.length,rs=["Computer Science","Data Science","Information Technology","Electronics","Mechanical Engineering","Civil Engineering","Business Administration","Mathematics","Physics","Chemistry"],cs=["1st Year","2nd Year","3rd Year","4th Year","Final Year"],Se=["1st Semester","2nd Semester","3rd Semester","4th Semester","5th Semester","6th Semester","7th Semester","8th Semester"],T=["Assistant Professor","Associate Professor","Professor","Lecturer","Senior Lecturer","Visiting Faculty","Guest Lecturer","Department Head"],G=P=>{var W;const H=(W=P.target.files)==null?void 0:W[0];H&&w(H)},xe=P=>{switch(P){case 1:return f?null:"Please select your role";case 2:return c.trim()?g.trim()?i.trim()?null:"Phone number is required":"Email is required":"Full name is required";case 3:return j.length<8?"Password must be at least 8 characters":j!==S?"Passwords do not match":null;case 4:if(f==="student"){if(!v.trim())return"Roll number is required";if(!A)return"Department is required";if(!Y)return"Year is required";if(!U)return"Semester is required"}else if(f==="teacher"){if(!R.trim())return"Employee ID is required";if(!A)return"Department is required";if(!I)return"Designation is required"}return null;case 5:return null;default:return null}},_=()=>{for(let P=1;P<=qe;P++){const H=xe(P);if(H)return H}return null},M=()=>{const P=xe(r);if(P){ge(P);return}ge(""),a.includes(r)||o([...a,r]),r<qe&&t(r+1)},$=()=>{r>1&&(t(r-1),ge(""))},Q=P=>{(a.includes(P)||P===r)&&(t(P),ge(""))},Z=async()=>{ge("");const P=_();if(P){ge(P);return}try{const H={name:c,email:g,phone:i,password:j,role:f,...f==="student"&&{rollNumber:v,department:A,year:Y,semester:U},...f==="teacher"&&{employeeId:R,department:A,designation:I}};await q(H),D(!0)}catch(H){ge(H.message||"Registration failed. Please try again.")}},se=()=>{switch(r){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Choose Your Role"}),e.jsx("p",{className:"text-gray-600",children:"Select how you'll be using our platform"})]}),e.jsx("div",{className:"space-y-4",children:[{value:"student",title:"Student",description:"Access courses, assignments, and learning materials",icon:Oe},{value:"teacher",title:"Teacher",description:"Create courses, manage students, and track progress",icon:Ce}].map(({value:P,title:H,description:W,icon:fe})=>e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${f===P?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:"role",value:P,checked:f===P,onChange:je=>h(je.target.value),className:"sr-only"}),e.jsx(fe,{className:`h-6 w-6 mr-4 ${f===P?"text-blue-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:H}),e.jsx("div",{className:"text-sm text-gray-500",children:W})]}),f===P&&e.jsx(ms,{className:"h-5 w-5 text-blue-600 ml-auto"})]},P))})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Basic Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about yourself"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"name",type:"text",value:c,onChange:P=>n(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:g,onChange:P=>b(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"phone",type:"tel",value:i,onChange:P=>x(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your phone number",required:!0})]})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Security"}),e.jsx("p",{className:"text-gray-600",children:"Create a secure password for your account"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ls,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:p?"text":"password",value:j,onChange:P=>u(P.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password (min 8 characters)",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-3 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:p?e.jsx(Fe,{}):e.jsx(ue,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ls,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"confirmPassword",type:C?"text":"password",value:S,onChange:P=>y(P.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>L(!C),className:"absolute right-3 top-3 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:C?e.jsx(Fe,{}):e.jsx(ue,{})})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{className:`flex items-center ${j.length>=8?"text-green-600":""}`,children:[e.jsx(ms,{className:`h-4 w-4 mr-2 ${j.length>=8?"text-green-600":"text-gray-400"}`}),"At least 8 characters"]}),e.jsxs("li",{className:`flex items-center ${j===S&&j?"text-green-600":""}`,children:[e.jsx(ms,{className:`h-4 w-4 mr-2 ${j===S&&j?"text-green-600":"text-gray-400"}`}),"Passwords match"]})]})]})]});case 4:return f==="student"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Academic Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your academic details"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rollNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Number / Roll Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ls,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"rollNumber",type:"text",value:v,onChange:P=>E(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your roll number",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department / Course"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"department",value:A,onChange:P=>N(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),rs.map(P=>e.jsx("option",{value:P,children:P},P))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"year",value:Y,onChange:P=>k(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Year"}),cs.map(P=>e.jsx("option",{value:P,children:P},P))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"semester",className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),e.jsxs("select",{id:"semester",value:U,onChange:P=>V(P.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Semester"}),Se.map(P=>e.jsx("option",{value:P,children:P},P))]})]})]})]}):f==="teacher"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Professional Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your professional details"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employeeId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID / Faculty ID"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ls,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"employeeId",type:"text",value:R,onChange:P=>F(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your employee ID",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ms,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"department",value:A,onChange:P=>N(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),rs.map(P=>e.jsx("option",{value:P,children:P},P))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"designation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"designation",value:I,onChange:P=>ne(P.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Designation"}),T.map(P=>e.jsx("option",{value:P,children:P},P))]})]})]})]}):null;case 5:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Profile Picture"}),e.jsx("p",{className:"text-gray-600",children:"Add a profile picture (optional)"})]}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"profilePicture",className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:d?e.jsxs("div",{className:"text-center",children:[e.jsx(ks,{className:"w-12 h-12 mb-4 text-green-500 mx-auto"}),e.jsx("p",{className:"text-lg text-green-600 font-medium mb-2",children:d.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click to change"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"w-12 h-12 mb-4 text-gray-400 mx-auto"}),e.jsxs("p",{className:"mb-2 text-lg text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," profile picture"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG or JPEG (MAX. 5MB)"})]})}),e.jsx("input",{id:"profilePicture",type:"file",className:"hidden",accept:"image/*",onChange:G})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"You can skip this step and add a profile picture later from your account settings."})})]});default:return null}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),e.jsx("p",{className:"text-gray-600",children:"Join our learning community"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:Re.map((P,H)=>e.jsxs(as.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"button",onClick:()=>Q(P.id),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-200 ${a.includes(P.id)?"bg-green-500 text-white cursor-pointer hover:bg-green-600":P.id===r?"bg-blue-500 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,disabled:!a.includes(P.id)&&P.id!==r,children:a.includes(P.id)?e.jsx(ms,{className:"h-5 w-5"}):P.id}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("div",{className:`text-sm font-medium ${P.id===r?"text-blue-600":a.includes(P.id)?"text-green-600":"text-gray-500"}`,children:P.title}),e.jsx("div",{className:"text-xs text-gray-500",children:P.description})]})]}),H<Re.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${a.includes(P.id)?"bg-green-500":"bg-gray-200"}`})]},P.id))})}),we&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:we}),Ve&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-lg",children:" Registration successful! Welcome to EduNexa! You're being logged in..."}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-6",children:se()}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{type:"button",onClick:$,disabled:r===1,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${r===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx(us,{className:"h-5 w-5"}),"Previous"]}),r===qe?e.jsx("button",{type:"button",onClick:Z,disabled:ce,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:ce?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(xt,{className:"h-5 w-5"}),"Create Account"]})}):e.jsxs("button",{type:"button",onClick:M,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200",children:["Next",e.jsx(hs,{className:"h-5 w-5"})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign in here"})]})})]})},er=({onBackToLogin:s})=>{const[r,t]=l.useState(""),[a,o]=l.useState(!1),[c,n]=l.useState(!1),[g,b]=l.useState(""),i=async x=>{x.preventDefault(),b(""),o(!0);try{await new Promise(j=>setTimeout(j,2e3)),n(!0)}catch{b("Failed to send reset email. Please try again.")}finally{o(!1)}};return c?e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(de,{className:"h-8 w-8 text-green-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-gray-600",children:["We've sent a password reset link to ",e.jsx("strong",{children:r})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(We,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Didn't receive the email?"}),e.jsxs("ul",{className:"space-y-1 text-blue-700",children:[e.jsx("li",{children:" Check your spam or junk folder"}),e.jsx("li",{children:" Make sure you entered the correct email address"}),e.jsx("li",{children:" The link will expire in 1 hour"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>{n(!1),t("")},className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5"}),"Send Another Email"]}),e.jsxs("button",{onClick:s,className:"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(ss,{className:"h-5 w-5"}),"Back to Login"]})]})]}):e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600",children:"No worries! Enter your email address and we'll send you a reset link."})]}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[g&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[e.jsx(ve,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:g})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:r,onChange:x=>t(x.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email address",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:a?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-5 w-5"}),"Send Reset Link"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors flex items-center justify-center gap-2 mx-auto",children:[e.jsx(ss,{className:"h-4 w-4"}),"Back to Login"]})})]})},sr=({token:s,onSuccess:r,onError:t})=>{const[a,o]=l.useState(""),[c,n]=l.useState(""),[g,b]=l.useState(!1),[i,x]=l.useState(!1),[j,u]=l.useState(!1),[S,y]=l.useState(!0),[f,h]=l.useState(!1),[d,w]=l.useState(""),[p,m]=l.useState(""),C=[{regex:/.{8,}/,text:"At least 8 characters"},{regex:/[A-Z]/,text:"One uppercase letter"},{regex:/[a-z]/,text:"One lowercase letter"},{regex:/\d/,text:"One number"},{regex:/[!@#$%^&*(),.?":{}|<>]/,text:"One special character"}];l.useEffect(()=>{L()},[s]);const L=async()=>{try{await new Promise(E=>setTimeout(E,1e3)),h(!0),w("user@example.com")}catch{t("Invalid or expired reset token")}finally{y(!1)}},v=async E=>{if(E.preventDefault(),m(""),a!==c){m("Passwords do not match");return}if(!C.every(A=>A.regex.test(a))){m("Password does not meet all requirements");return}u(!0);try{await new Promise(A=>setTimeout(A,2e3)),r()}catch{m("Failed to reset password. Please try again.")}finally{u(!1)}};return S?e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verifying reset token..."})]})}):f?e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Me,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset Password"}),e.jsxs("p",{className:"text-gray-600",children:["Create a new password for ",e.jsx("strong",{children:d})]})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[p&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[e.jsx(ve,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:p})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:g?"text":"password",value:a,onChange:E=>o(E.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:g?e.jsx(Fe,{}):e.jsx(ue,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ls,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"confirmPassword",type:i?"text":"password",value:c,onChange:E=>n(E.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Confirm new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>x(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:i?e.jsx(Fe,{}):e.jsx(ue,{})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Password Requirements:"}),e.jsx("div",{className:"space-y-2",children:C.map((E,A)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${E.regex.test(a)?"bg-green-100":"bg-gray-200"}`,children:E.regex.test(a)&&e.jsx(de,{className:"w-3 h-3 text-green-600"})}),e.jsx("span",{className:`text-sm ${E.regex.test(a)?"text-green-700":"text-gray-600"}`,children:E.text})]},A))})]}),e.jsx("button",{type:"submit",disabled:j||!C.every(E=>E.regex.test(a)),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:j?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-5 w-5"}),"Reset Password"]})})]})]}):e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ve,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This password reset link is invalid or has expired. Please request a new one."}),e.jsx("button",{onClick:()=>window.location.href="/auth",className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Login"})]})})},tr=({onBackToLanding:s})=>{const[r,t]=l.useState("login"),[a,o]=l.useState(""),c=[{icon:Ne,title:"AI-Powered Learning",description:"Personalized learning paths powered by advanced AI"},{icon:me,title:"Progress Analytics",description:"Real-time progress tracking and detailed insights"},{icon:ae,title:"Interactive Content",description:"Engaging multimedia courses and assessments"},{icon:ie,title:"Achievements",description:"24/7 AI teaching assistant and community support"}],n=[{name:"Sarah Johnson",role:"Data Science Student",content:"EduNexa transformed my learning experience completely!",rating:5},{name:"Michael Chen",role:"Software Engineer",content:"The AI recommendations are incredibly accurate.",rating:5}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-green-50",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[s&&e.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(ss,{className:"h-4 w-4"}),"Back to Home"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-xl",children:e.jsx(Ne,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-green-600 p-2 rounded-xl",children:e.jsx(Oe,{className:"h-5 w-5 text-white"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-gray-500",children:"AI-Powered Learning"})]})]})]})}),e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 pt-20 pb-8",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-4 leading-tight",children:["Welcome to the",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-green-600 bg-clip-text text-transparent",children:" Future of Learning"})]}),e.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Join thousands of students transforming their education with AI-powered personalized learning experiences."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"50K+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"1.2K+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Expert Instructors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"98%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]})]}),e.jsx("div",{className:"space-y-4",children:c.map((g,b)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white/50 rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg flex-shrink-0",children:e.jsx(g.icon,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600",children:g.description})]})]},b))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"What our students say:"}),n.map((g,b)=>e.jsxs("div",{className:"bg-white/70 rounded-xl p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"flex items-center gap-1 mb-2",children:[...Array(g.rating)].map((i,x)=>e.jsx(Ns,{className:"h-4 w-4 text-yellow-500 fill-current"},x))}),e.jsxs("p",{className:"text-gray-700 text-sm mb-2 italic",children:['"',g.content,'"']}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:g.name})," - ",g.role]})]},b))]}),e.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:"Trusted by 50,000+ students"})]})})]})}),e.jsxs("div",{className:"w-full max-w-md mx-auto lg:max-w-none",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 sm:p-8 lg:p-10 border border-white/20 backdrop-blur-sm",children:[e.jsxs("div",{className:"lg:hidden text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-xl",children:e.jsx(Ne,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-green-600 p-2 rounded-xl",children:e.jsx(Oe,{className:"h-5 w-5 text-white"})})]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1",children:"Welcome to EduNexa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-Powered Learning Platform"})]}),r==="login"&&e.jsx(Qt,{onToggleForm:()=>t("register"),onForgotPassword:()=>t("forgot-password")}),r==="register"&&e.jsx(Xt,{onToggleForm:()=>t("login")}),r==="forgot-password"&&e.jsx(er,{onBackToLogin:()=>t("login")}),r==="reset-password"&&e.jsx(sr,{token:a,onSuccess:()=>{alert("Password reset successfully! Please login with your new password."),t("login")},onError:g=>{alert(g),t("forgot-password")}}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"text-center text-xs sm:text-sm text-gray-500",children:[e.jsx("p",{className:"mb-2",children:"By continuing, you agree to our Terms of Service and Privacy Policy"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4 flex-wrap",children:[e.jsx("span",{children:"Secure & Private"}),e.jsx("span",{children:"Available Worldwide"})]})]})})]}),e.jsx("div",{className:"lg:hidden mt-6 space-y-3 max-w-md mx-auto",children:c.slice(0,2).map((g,b)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/70 rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg flex-shrink-0",children:e.jsx(g.icon,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:g.title}),e.jsx("p",{className:"text-xs text-gray-600",children:g.description})]})]},b))})]})]})})]})},Bs=()=>{const{sidebarOpen:s,setSidebarOpen:r}=Ge(),{user:t}=re(),[a,o]=l.useState(0),[c,n]=l.useState(0),[g,b]=l.useState(!1);l.useEffect(()=>{const j=()=>{b(window.innerWidth<1024)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),l.useEffect(()=>{const j=async()=>{try{const u=await Ue.getUnreadCount();o(u.unread_count||0),n(0)}catch(u){console.error("Failed to fetch counts:",u)}};if(t){j();const u=setInterval(j,3e4);return()=>clearInterval(u)}},[t]);const i=[{items:[{icon:Ps,label:"Dashboard",href:"/dashboard"},{icon:ae,label:"My Courses",href:"/courses"},{icon:X,label:"Assignments",href:"/assignments",badge:c||void 0}]},{items:[{icon:ze,label:"My Progress",href:"/analytics"},{icon:Ne,label:"AI Assistant",href:"/ai-assistant"},{icon:be,label:"Schedule",href:"/schedule"},{icon:Qe,label:"Achievements",href:"/achievements"}]},{items:[{icon:Be,label:"Notifications",href:"/notifications",badge:a||void 0},{icon:Ce,label:"Profile",href:"/profile"},{icon:gs,label:"Settings",href:"/settings"}]}],x=(j,u)=>{j.preventDefault(),window.history.pushState({},"",u),window.dispatchEvent(new PopStateEvent("popstate")),g&&r(!1)};return e.jsxs(e.Fragment,{children:[g&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>r(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-lg transition-all duration-300 ${g?s?"translate-x-0 w-64":"-translate-x-full w-64":s?"w-64":"w-16"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-200",children:[(s||g)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-1.5 sm:p-2 rounded-lg",children:e.jsx(Ne,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base sm:text-lg font-bold text-gray-900",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Student Portal"})]})]}),e.jsx("button",{onClick:()=>r(!s),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s?e.jsx(us,{className:"h-5 w-5 text-gray-600"}):e.jsx(hs,{className:"h-5 w-5 text-gray-600"})})]}),e.jsx("nav",{className:"flex-1 px-2 sm:px-4 py-4 sm:py-6 overflow-y-auto",children:i.map((j,u)=>e.jsxs("div",{children:[e.jsx("div",{className:"space-y-2",children:j.items.map((S,y)=>e.jsxs("a",{href:S.href,onClick:f=>x(f,S.href),className:`flex items-center gap-3 px-2 sm:px-3 py-2.5 sm:py-3 text-sm sm:text-base rounded-lg transition-all duration-200 group ${window.location.pathname===S.href?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-blue-50 hover:text-blue-600"}`,children:[e.jsx(S.icon,{className:"h-5 w-5 flex-shrink-0"}),(s||g)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:S.label}),S.badge&&S.badge>0&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-0.5 sm:py-1 rounded-full min-w-[20px] text-center",children:S.badge>9?"9+":S.badge})]})]},y))}),u<i.length-1&&e.jsx("div",{className:`my-4 ${s||g?"mx-4":"mx-2"}`,children:e.jsx("div",{className:"h-px bg-gray-200"})})]},u))}),(s||g)&&e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm sm:text-base font-medium",children:t==null?void 0:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:"Student"})]})]})})]})})]})},rr=()=>{const{sidebarOpen:s,setSidebarOpen:r}=Ge(),{user:t}=re(),[a,o]=l.useState(0),[c,n]=l.useState(!1);l.useEffect(()=>{const i=()=>{n(window.innerWidth<1024)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),l.useEffect(()=>{const i=async()=>{try{const x=await Ue.getUnreadCount();o(x.unread_count||0)}catch(x){console.error("Failed to fetch notification count:",x)}};if(t){i();const x=setInterval(i,3e4);return()=>clearInterval(x)}},[t]);const g=[{icon:Ps,label:"Dashboard",href:"/dashboard"},{icon:ae,label:"My Courses",href:"/courses"},{icon:ht,label:"Create Course",href:"/courses/create"},{icon:_e,label:"Video Management",href:"/videos"},{icon:X,label:"Assignments",href:"/assignments/teacher"},{icon:ee,label:"My Students",href:"/students"},{icon:ze,label:"Analytics",href:"/analytics"},{icon:Ne,label:"AI Assistant",href:"/ai-assistant"},{icon:Be,label:"Notifications",href:"/notifications",badge:a||void 0},{icon:Ce,label:"Profile",href:"/profile"},{icon:gs,label:"Settings",href:"/settings"}],b=(i,x)=>{i.preventDefault(),window.history.pushState({},"",x),window.dispatchEvent(new PopStateEvent("popstate")),c&&r(!1)};return e.jsxs(e.Fragment,{children:[c&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>r(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-lg transition-all duration-300 ${c?s?"translate-x-0 w-64":"-translate-x-full w-64":s?"w-64":"w-16"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-200",children:[(s||c)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 p-1.5 sm:p-2 rounded-lg",children:e.jsx(Oe,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base sm:text-lg font-bold text-gray-900",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Portal"})]})]}),e.jsx("button",{onClick:()=>r(!s),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s?e.jsx(us,{className:"h-5 w-5 text-gray-600"}):e.jsx(hs,{className:"h-5 w-5 text-gray-600"})})]}),e.jsx("nav",{className:"flex-1 px-2 sm:px-4 py-4 sm:py-6 space-y-1 sm:space-y-2 overflow-y-auto",children:g.map((i,x)=>e.jsxs("a",{href:i.href,onClick:j=>b(j,i.href),className:"flex items-center gap-3 px-2 sm:px-3 py-2.5 sm:py-3 text-sm sm:text-base text-gray-700 rounded-lg hover:bg-green-50 hover:text-green-600 transition-all duration-200 group",children:[e.jsx(i.icon,{className:"h-5 w-5 flex-shrink-0"}),(s||c)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:i.label}),i.badge&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-0.5 sm:py-1 rounded-full min-w-[20px] text-center",children:i.badge>9?"9+":i.badge})]})]},x))}),(s||c)&&e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm sm:text-base font-medium",children:t==null?void 0:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:"Teacher"})]})]})})]})})]})},ar=()=>{const{sidebarOpen:s,setSidebarOpen:r}=Ge(),{user:t}=re(),a=[{icon:Ps,label:"Dashboard",href:"/dashboard",color:"purple"},{icon:ee,label:"User Management",href:"/admin/users",color:"blue"},{icon:gs,label:"Settings",href:"/settings",color:"gray"}],[o,c]=as.useState(!1);as.useEffect(()=>{const b=()=>{c(window.innerWidth<1024)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const n=(b,i)=>{b.preventDefault(),window.history.pushState({},"",i),window.dispatchEvent(new PopStateEvent("popstate")),o&&r(!1)},g=b=>{switch(b){case"blue":return"hover:bg-blue-50 hover:text-blue-600";case"purple":return"hover:bg-purple-50 hover:text-purple-600";default:return"hover:bg-gray-50 hover:text-gray-600"}};return e.jsxs(e.Fragment,{children:[o&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>r(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-lg transition-all duration-300 ${o?s?"translate-x-0 w-64":"-translate-x-full w-64":s?"w-64":"w-16"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-200 bg-gradient-to-r from-purple-900 to-indigo-900",children:[(s||o)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 p-1.5 sm:p-2 rounded-lg",children:e.jsx(Ke,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base sm:text-lg font-bold text-white",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-purple-200",children:"Super Admin"})]})]}),e.jsx("button",{onClick:()=>r(!s),className:"p-2 rounded-lg hover:bg-purple-800 transition-colors",children:s?e.jsx(us,{className:"h-5 w-5 text-white"}):e.jsx(hs,{className:"h-5 w-5 text-white"})})]}),e.jsx("nav",{className:"flex-1 px-2 sm:px-4 py-4 sm:py-6 space-y-1 overflow-y-auto",children:a.map((b,i)=>e.jsxs("button",{onClick:x=>n(x,b.href),className:`w-full flex items-center gap-3 px-2 sm:px-3 py-2.5 sm:py-3 text-gray-700 rounded-lg transition-all duration-200 group text-sm ${g(b.color)}`,children:[e.jsx(b.icon,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),(s||o)&&e.jsx("span",{className:"font-medium",children:b.label})]},i))}),(s||o)&&e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ke,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Super Administrator"})]})]})})]})})]})},lr=({className:s=""})=>{const{user:r}=re(),[t,a]=l.useState([]),[o,c]=l.useState(!1),[n,g]=l.useState(!1),[b,i]=l.useState(new Set),x=async()=>{if(!(!r||!["teacher","super_admin"].includes(r.role))){g(!0);try{const d=await He.getPerformanceAlerts();a(d.alerts||[])}catch(d){console.error("Failed to fetch learner alerts:",d)}finally{g(!1)}}};l.useEffect(()=>{x();const d=setInterval(x,5*60*1e3);return()=>clearInterval(d)},[r]);const j=(d,w)=>{switch(d){case"inactive":return e.jsx(oe,{className:"h-4 w-4"});case"academic":return e.jsx(xs,{className:"h-4 w-4"});case"performance":return e.jsx(Ee,{className:"h-4 w-4"});case"deadline":return e.jsx(oe,{className:"h-4 w-4"});default:return e.jsx(Be,{className:"h-4 w-4"})}},u=d=>{switch(d){case"high":return"bg-red-50 border-red-200 text-red-800";case"medium":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"low":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},S=d=>{const w=`${t[d].student_id}-${t[d].type}-${t[d].created_at}`;i(p=>new Set([...p,w]))},y=t.filter((d,w)=>{const p=`${d.student_id}-${d.type}-${d.created_at}`;return!b.has(p)}),f=y.filter(d=>d.severity==="high"),h=y.length>0;return!r||!["teacher","super_admin"].includes(r.role)?null:e.jsxs("div",{className:`relative ${s}`,children:[e.jsxs("button",{onClick:()=>c(!o),className:`relative p-2 rounded-full transition-colors ${h?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Be,{className:"h-5 w-5"}),h&&e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:y.length>9?"9+":y.length})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Student Alerts"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(he,{className:"h-5 w-5"})})]}),f.length>0&&e.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[f.length," high priority alert",f.length!==1?"s":""]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:n?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading alerts..."})]}):y.length>0?e.jsx("div",{className:"divide-y divide-gray-200",children:y.map((d,w)=>e.jsx("div",{className:`p-4 border-l-4 ${d.severity==="high"?"border-red-500":d.severity==="medium"?"border-yellow-500":"border-blue-500"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`p-1 rounded-full ${u(d.severity)}`,children:j(d.type,d.severity)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:d.student_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${d.severity==="high"?"bg-red-100 text-red-800":d.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:d.severity})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.message}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[new Date(d.created_at).toLocaleDateString(),"  ",d.type]})]})]}),e.jsx("button",{onClick:()=>S(w),className:"ml-2 text-gray-400 hover:text-gray-600",title:"Dismiss alert",children:e.jsx(de,{className:"h-4 w-4"})})]})},`${d.student_id}-${d.type}-${w}`))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(de,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No active alerts"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All students are performing well!"})]})}),y.length>0&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:x,disabled:n,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Refresh"}),e.jsx("button",{onClick:()=>{console.log("Navigating to learner analytics..."),c(!1),window.history.pushState({},"","/analytics/learners"),window.location.href="/analytics/learners"},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All Analytics "})]})})]}),f.length>0&&!o&&e.jsx("div",{className:"fixed top-20 right-4 z-40 max-w-sm",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ee,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:"High Priority Student Alert"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[f.length," student",f.length!==1?"s":""," need",f.length===1?"s":""," immediate attention"]}),e.jsx("button",{onClick:()=>c(!0),className:"text-sm text-red-600 hover:text-red-700 font-medium mt-2",children:"View Details "})]}),e.jsx("button",{onClick:()=>i(d=>{const w=new Set(d);return f.forEach(p=>{const m=`${p.student_id}-${p.type}-${p.created_at}`;w.add(m)}),w}),className:"text-red-400 hover:text-red-600 ml-2",children:e.jsx(he,{className:"h-4 w-4"})})]})})})]})},nr=()=>{const{user:s,logout:r}=re(),{setSidebarOpen:t}=Ge(),[a,o]=l.useState(0),[c,n]=l.useState(0);return l.useEffect(()=>{const g=async()=>{try{const b=await Ue.getUnreadCount();o(b.unread_count||0),n(0)}catch(b){console.error("Failed to fetch unread counts:",b)}};if(s){g();const b=setInterval(g,3e4);return()=>clearInterval(b)}},[s]),e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-3 sm:px-4 md:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1",children:[e.jsx("button",{onClick:()=>t(!0),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(gt,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ts,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-8 sm:pl-10 pr-2 sm:pr-4 py-1.5 sm:py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4",children:[s&&["teacher","super_admin"].includes(s.role)&&e.jsx("div",{className:"hidden md:block",children:e.jsx(lr,{})}),e.jsxs("a",{href:"/notifications",className:"relative p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(Be,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-red-500 text-white text-[10px] sm:text-xs w-4 h-4 sm:w-5 sm:h-5 rounded-full flex items-center justify-center",children:a>9?"9+":a})]}),e.jsxs("a",{href:"/messages",className:"hidden xs:block relative p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),c>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-green-500 text-white text-[10px] sm:text-xs w-4 h-4 sm:w-5 sm:h-5 rounded-full flex items-center justify-center",children:c>9?"9+":c})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center gap-2 sm:gap-3 p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-medium",children:s==null?void 0:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate max-w-[120px]",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:s==null?void 0:s.role})]})]}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-44 sm:w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("a",{href:"/profile",className:"flex items-center gap-3 px-3 sm:px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Profile"]}),e.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(pt,{className:"h-4 w-4"}),"Sign Out"]})]})})]})]})]})})},ir=({children:s})=>{const{sidebarOpen:r}=Ge(),{user:t,isAuthenticated:a}=re(),o=()=>{var n;if(!a||!t)return null;switch((n=t.role)==null?void 0:n.toLowerCase().trim()){case"student":return e.jsx(Bs,{});case"teacher":case"instructor":return e.jsx(rr,{});case"super_admin":case"superadmin":case"admin":return e.jsx(ar,{});default:return console.warn(`Unknown user role: ${t.role}, defaulting to student sidebar`),e.jsx(Bs,{})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o(),e.jsxs("div",{className:`transition-all duration-300 ${r?"lg:ml-64":"lg:ml-16"}`,children:[e.jsx(nr,{}),e.jsx("main",{className:"min-h-[calc(100vh-64px)] sm:min-h-[calc(100vh-72px)] md:min-h-[calc(100vh-80px)]",children:s})]})]})},ds=({children:s,allowedRoles:r,fallback:t})=>{var b;const{user:a,isAuthenticated:o}=re();if(!o||!a)return t?e.jsx(e.Fragment,{children:t}):null;const c=(b=a.role)==null?void 0:b.toLowerCase().trim();return r.map(i=>i.toLowerCase().trim()).includes(c)?e.jsx(e.Fragment,{children:s}):t?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center p-8 bg-white rounded-lg shadow-md max-w-md",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Required role: ",r.join(", ")]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Your role: ",a.role]}),e.jsx("button",{onClick:()=>{window.history.pushState({},"","/dashboard"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})})},Es=({title:s,value:r,change:t,changeType:a="neutral",icon:o,color:c})=>{const n={blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600"},g={positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"};return e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3 md:mb-4",children:[e.jsx("div",{className:`p-2 sm:p-2.5 md:p-3 rounded-lg ${n[c]}`,children:e.jsx(o,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6"})}),t&&e.jsx("span",{className:`text-xs sm:text-sm font-medium ${g[a]} hidden sm:inline`,children:t})]}),e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1",children:s}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:r}),t&&e.jsx("span",{className:`text-xs font-medium ${g[a]} sm:hidden mt-1 block`,children:t})]})},or=({announcement:s})=>{const r=()=>{switch(s.type){case"info":return e.jsx(bt,{className:"h-5 w-5 text-blue-600"});case"warning":return e.jsx(Ee,{className:"h-5 w-5 text-yellow-600"});case"success":return e.jsx(de,{className:"h-5 w-5 text-green-600"})}},t=()=>{switch(s.type){case"info":return"bg-blue-50 border-blue-200";case"warning":return"bg-yellow-50 border-yellow-200";case"success":return"bg-green-50 border-green-200"}};return e.jsxs("div",{className:`border rounded-lg p-4 ${t()}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r(),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-700",children:s.content})]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-right",children:new Date(s.date).toLocaleDateString()})]})},As=({content:s,className:r=""})=>{const t=a=>(a=a.replace(/^### (.*$)/gim,'<h3 class="text-sm font-semibold text-gray-800 mt-3 mb-2">$1</h3>'),a=a.replace(/^## (.*$)/gim,'<h2 class="text-base font-bold text-gray-900 mt-4 mb-2">$1</h2>'),a=a.replace(/^# (.*$)/gim,'<h1 class="text-lg font-bold text-gray-900 mt-4 mb-3">$1</h1>'),a=a.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-900">$1</strong>'),a=a.replace(/\*(.*?)\*/g,'<em class="italic">$1</em>'),a=a.replace(/^- (.*$)/gim,'<li class="ml-4 mb-1"> $1</li>'),a=a.replace(/^(\d+)\. (.*$)/gim,'<li class="ml-4 mb-1">$1. $2</li>'),a=a.replace(/\n/g,"<br />"),a=a.replace(/(<li.*?<\/li>(?:<br \/>)*)+/g,'<ul class="mb-2">$&</ul>'),a=a.replace(/<br \/><br \/>/g,"<br />"),a);return e.jsx("div",{className:`prose prose-sm max-w-none ${r}`,dangerouslySetInnerHTML:{__html:t(s)}})},Gs=()=>{var R,F,I,ne,we,ge,Ve;const{user:s}=re(),{courses:r,assignments:t,announcements:a}=Ge(),[o,c]=l.useState(!1),[n,g]=l.useState(""),[b,i]=l.useState([]),[x,j]=l.useState(!1),[u,S]=l.useState(null),[y,f]=l.useState(null),[h,d]=l.useState(!1),[w,p]=l.useState(!1),m=()=>{const D=new Date().getHours();return D<12?"Good morning":D<18?"Good afternoon":"Good evening"},C=async()=>{d(!0);try{console.log("Fetching AI recommendations...");const D=await Xe.getRecommendations().catch(q=>(console.error("Failed to fetch recommendations:",q),{course_recommendations:[],study_tips:["Create a consistent daily study schedule","Use active recall techniques when reviewing material","Take regular breaks to maintain focus and retention","Form study groups with classmates for collaborative learning","Practice with past assignments regularly"],performance_summary:{strong_areas:[],weak_areas:[],total_points:(s==null?void 0:s.total_points)||0,courses_enrolled:r.length,assignments_submitted:0}}));console.log("Recommendations received:",D),S(D)}catch(D){console.error("Failed to fetch recommendations:",D)}finally{d(!1)}},L=async D=>{p(!0);try{const q=D||`Complete my current courses, improve in weak areas, and advance my skills in ${(s==null?void 0:s.department)||"my field of study"}`;console.log("Generating learning path with goal:",q);const ce=await Xe.generateLearningPath(q,"month").catch(Ae=>(console.error("Failed to generate learning path:",Ae),{learning_path:{goal:q,timeframe:"month",learning_path:`###  Month Learning Plan

**Goal:** ${q}

**Focus Areas:** Complete enrolled courses and strengthen understanding

**Study Time:** 10-15 hours per week

**Action Plan:** Catch up on materials, strengthen weak areas, and practice consistently

**Quick Tips:**
- Set daily study goals and track progress
- Review material regularly using active recall
- Join study groups for collaborative learning
- Take breaks to maintain focus

*Click "New Path" to generate a custom plan for different goals*`}}));console.log("Learning path received:",ce),f(ce),localStorage.setItem("learningPath",JSON.stringify(ce)),localStorage.setItem("learningPathDate",Date.now().toString())}catch(q){console.error("Failed to generate learning path:",q)}finally{p(!1)}};l.useEffect(()=>{if(s&&s.role==="student"){C();const D=localStorage.getItem("learningPath"),q=localStorage.getItem("learningPathDate");!D||!q||Date.now()-parseInt(q)>7*24*60*60*1e3?L():f(JSON.parse(D))}},[s]),l.useEffect(()=>{o&&b.length===0&&(async()=>{try{const q=await Xe.getWelcomeMessage();i([{type:"ai",message:q.message}])}catch(q){console.error("Failed to load welcome message:",q),i([{type:"ai",message:`##  Hello ${s==null?void 0:s.name}!

I'm your AI study assistant. How can I help you with your studies today?`}])}})()},[o,b.length,s==null?void 0:s.name]);const v=async()=>{if(!n.trim())return;const D=n;g(""),i(q=>[...q,{type:"user",message:D}]),j(!0);try{const q=await Xe.chat(D);i(ce=>[...ce,{type:"ai",message:q.response}])}catch{i(ce=>[...ce,{type:"ai",message:"Sorry, I encountered an error. Please try again."}])}finally{j(!1)}},E=t.filter(D=>new Date(D.dueDate)>new Date).slice(0,4),A=a.slice(0,3),N=r.map(D=>({...D,progress:D.progress||Math.floor(Math.random()*100),nextLesson:`Lesson ${Math.floor(D.progress/10)+1}`,totalLessons:D.totalLessons||12,completedLessons:D.completedLessons||Math.floor((D.progress||0)/10)})),Y=D=>{const q=r.find(ce=>ce.id===D);return q?q.title:"Unknown Course"},k=D=>{const q=new Date(D),ce=new Date,Ae=Math.ceil((q.getTime()-ce.getTime())/(1e3*60*60*24));return Ae<=2?"high":Ae<=7?"medium":"low"},U=N.length>0?Math.round(N.reduce((D,q)=>D+q.progress,0)/N.length):0,V=[{title:"Enrolled Courses",value:r.length.toString(),icon:ae,color:"blue",change:"+2 this month"},{title:"Average Progress",value:`${U}%`,icon:me,color:"green",change:"+12% this week"},{title:"Study Streak",value:"7 days",icon:be,color:"yellow",change:"Personal best!"}];return e.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-green-600 rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-1 sm:mb-2",children:[m(),", ",s==null?void 0:s.name,"! "]}),e.jsx("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg mb-3 sm:mb-4",children:"Ready to continue your learning journey?"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 md:gap-6 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(is,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Daily goal: 2 hours"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(be,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Streak: 7 days"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(ie,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Level: Intermediate"})]})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Ne,{className:"h-16 w-16 md:h-20 md:w-20 lg:h-24 lg:w-24 text-white opacity-20"})})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:V.map((D,q)=>e.jsx(Es,{title:D.title,value:D.value,change:D.change,changeType:"positive",icon:D.icon,color:D.color},q))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"My Courses"}),e.jsx("a",{href:"/courses",className:"text-blue-600 hover:text-blue-700 font-medium text-xs sm:text-sm",children:"View all courses"})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:N.slice(0,3).map(D=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg sm:rounded-xl p-4 sm:p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex-1 pr-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-1 sm:mb-2",children:D.title}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-2 sm:mb-3 line-clamp-2",children:D.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:D.instructor})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3 sm:h-4 sm:w-4"}),D.completedLessons,"/",D.totalLessons]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Next: "}),D.nextLesson]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-blue-600 mb-1",children:[D.progress,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Complete"})]})]}),e.jsxs("div",{className:"mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-gray-900 font-medium hidden sm:inline",children:[D.completedLessons," of ",D.totalLessons," completed"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${D.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${D.progress>80?"bg-green-500":D.progress>50?"bg-yellow-500":"bg-blue-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:D.progress>80?"Almost done!":D.progress>50?"Good progress":"Just started"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(es,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Continue"}),e.jsx("span",{className:"sm:hidden",children:"Go"})]})]})]},D.id))}),e.jsxs("div",{className:"mt-6 sm:mt-8",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("a",{href:"/courses",className:"bg-blue-50 hover:bg-blue-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx(ae,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-blue-900 block",children:"Browse Courses"})]}),e.jsxs("a",{href:"/assignments",className:"bg-green-50 hover:bg-green-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx(Qe,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-green-900 block",children:"Assignments"})]}),e.jsxs("a",{href:"/ai-assistant",className:"bg-purple-50 hover:bg-purple-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx(Ne,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-purple-900 block",children:"AI Assistant"})]}),e.jsxs("a",{href:"/achievements",className:"bg-yellow-50 hover:bg-yellow-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx(ie,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-yellow-900 block",children:"Achievements"})]})]})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Upcoming Assignments"}),e.jsx("a",{href:"/assignments",className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"View all"})]}),e.jsx("div",{className:"space-y-3",children:E.slice(0,3).map(D=>{const q=k(D.dueDate),ce=Y(D.courseId),Ae=new Date(D.dueDate).toLocaleDateString();return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:D.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:ce}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(oe,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-500",children:["Due ",Ae]})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${q==="high"?"bg-red-100 text-red-800":q==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:q})]})},D.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Recent Achievements"}),e.jsx("a",{href:"/achievements",className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"View all"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-yellow-100 p-2 rounded-full",children:e.jsx(Qe,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Assignment Master"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Completed 10 assignments"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(de,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Course Completion"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Finished Python Basics"})]})]})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Announcements"}),e.jsx("a",{href:"/announcements",className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"View all"})]}),e.jsx("div",{className:"space-y-3",children:A.map(D=>e.jsx(or,{announcement:D},D.id))})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg sm:rounded-xl p-4 sm:p-6 border border-purple-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(Ne,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600 flex-shrink-0"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 italic",children:"Your Personalized Learning Path"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>C(),disabled:h,className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm font-medium disabled:opacity-50 whitespace-nowrap",children:h?" Loading...":" Refresh Tips"}),e.jsx("button",{onClick:()=>{const D=prompt("What would you like to focus on in your learning journey?")||`Improve my skills in ${(s==null?void 0:s.department)||"my field of study"} and complete current courses`;L(D)},disabled:w,className:"text-purple-600 hover:text-purple-700 text-xs sm:text-sm font-medium disabled:opacity-50 whitespace-nowrap",children:w?" Generating...":" New Path"})]})]}),w?e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Generating your personalized learning path..."})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 animate-pulse"})]})]}):y?e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:" AI-Generated Study Plan"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Goal: ",((R=y.learning_path)==null?void 0:R.goal)||"Personal Development"]})]}),e.jsx("div",{className:"text-sm text-gray-700 prose prose-sm max-w-none",children:e.jsx(As,{content:((F=y.learning_path)==null?void 0:F.learning_path)||y.learning_path||"Loading your personalized learning path..."})}),((I=y.learning_path)==null?void 0:I.timeframe)&&e.jsxs("div",{className:"mt-3 text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded",children:[" Timeframe: ",y.learning_path.timeframe]})]}):e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Generating your personalized learning path..."})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 animate-pulse"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:u?e.jsxs(e.Fragment,{children:[u.course_recommendations&&u.course_recommendations.length>0?u.course_recommendations.slice(0,3).map((D,q)=>{var ce;return e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:" Recommended Course"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 font-medium line-clamp-2",children:D.title}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:[(ce=D.description)==null?void 0:ce.substring(0,80),"..."]}),e.jsx("button",{onClick:()=>window.location.href="/courses",className:"text-blue-600 text-xs sm:text-sm font-medium hover:text-blue-700 flex items-center gap-1",children:"View Course "})]},q)}):e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:" Current Focus"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"Complete your enrolled courses and improve your performance"}),e.jsx("button",{onClick:()=>window.location.href="/courses",className:"text-purple-600 text-xs sm:text-sm font-medium hover:text-purple-700",children:"Continue Learning "})]}),u.performance_summary&&e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:" Your Progress"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Courses:"}),e.jsx("span",{className:"font-medium",children:u.performance_summary.courses_enrolled})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Points:"}),e.jsx("span",{className:"font-medium text-purple-600",children:u.performance_summary.total_points})]})]})]}),((we=(ne=u.performance_summary)==null?void 0:ne.strong_areas)==null?void 0:we.length)>0&&e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:" Strong Areas"}),e.jsx("div",{className:"space-y-1",children:u.performance_summary.strong_areas.slice(0,3).map((D,q)=>e.jsxs("div",{className:"text-xs sm:text-sm text-green-700 bg-green-50 px-2 py-1 rounded",children:[" ",D]},q))})]})]}):Array.from({length:3}).map((D,q)=>e.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},q))}),(u==null?void 0:u.study_tips)&&u.study_tips.length>0&&e.jsxs("div",{className:"mt-3 sm:mt-4 bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(fs,{className:"h-4 w-4 text-yellow-500"})," Personalized Study Tips"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3",children:u.study_tips.slice(0,4).map((D,q)=>e.jsxs("div",{className:"flex items-start gap-2 text-xs sm:text-sm text-gray-600 bg-yellow-50 p-2 sm:p-3 rounded-lg",children:[e.jsx("span",{className:"text-yellow-500 mt-0.5 font-bold",children:""}),e.jsx("span",{children:D})]},q))})]}),((Ve=(ge=u==null?void 0:u.performance_summary)==null?void 0:ge.weak_areas)==null?void 0:Ve.length)>0&&e.jsxs("div",{className:"mt-3 sm:mt-4 bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(is,{className:"h-4 w-4 text-orange-500"})," Areas for Improvement"]}),e.jsx("div",{className:"space-y-2",children:u.performance_summary.weak_areas.map((D,q)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-orange-700 bg-orange-50 px-2 sm:px-3 py-2 rounded-lg",children:[e.jsx("span",{className:"text-orange-500",children:""}),e.jsxs("span",{children:["Focus more on: ",e.jsx("strong",{children:D})]})]},q))})]})]}),o&&e.jsxs("div",{className:"fixed bottom-2 right-2 sm:bottom-4 sm:right-4 w-[calc(100vw-1rem)] sm:w-80 h-[70vh] sm:h-96 bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col z-50",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 sm:p-4 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"AI Study Assistant"})]}),e.jsx("button",{onClick:()=>c(!1),className:"text-white hover:text-gray-200",children:e.jsx(he,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:[b.length===0&&e.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[e.jsx(Ne,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"Loading your personalized welcome message..."})]}),b.map((D,q)=>e.jsx("div",{className:`flex ${D.type==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-xs p-3 rounded-lg text-sm ${D.type==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:D.type==="ai"?e.jsx(As,{content:D.message}):D.message})},q)),x&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 text-gray-900 p-3 rounded-lg text-sm",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:D=>g(D.target.value),onKeyDown:D=>D.key==="Enter"&&!D.shiftKey&&v(),placeholder:"Ask me anything...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),e.jsx("button",{onClick:v,disabled:!n.trim()||x,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Je,{className:"h-4 w-4"})})]})})]}),!o&&e.jsx("button",{onClick:()=>c(!0),className:"fixed bottom-4 right-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-40",children:e.jsx(Ws,{className:"h-6 w-6"})})]})},cr=({className:s=""})=>{const[r,t]=l.useState(null),[a,o]=l.useState([]),[c,n]=l.useState(!1),g=async()=>{n(!0);try{const[i,x]=await Promise.all([He.getPerformanceAnalysis(),He.getPerformanceAlerts()]);t(i.summary),o(x.alerts.slice(0,3))}catch(i){console.error("Failed to fetch learner insights:",i),t({slow_learners_count:0,fast_learners_count:0,students_at_risk:0,total_students:0,average_performance:0,inactive_students:0}),o([])}finally{n(!1)}};l.useEffect(()=>{g()},[]);const b=i=>{switch(i){case"high":return"text-red-600 bg-red-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}};return c&&!r?e.jsx("div",{className:`bg-white rounded-lg shadow border p-6 ${s}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx($e,{className:"h-6 w-6 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading insights..."})]})}):e.jsxs("div",{className:`bg-white rounded-lg shadow border ${s}`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Learner Insights"}),e.jsx("button",{onClick:g,disabled:c,className:"text-blue-600 hover:text-blue-700 disabled:opacity-50",children:e.jsx($e,{className:`h-4 w-4 ${c?"animate-spin":""}`})})]})}),e.jsx("div",{className:"p-6",children:r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx(xs,{className:"h-6 w-6 text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.slow_learners_count}),e.jsx("p",{className:"text-sm text-red-700",children:"Slow Learners"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(me,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.fast_learners_count}),e.jsx("p",{className:"text-sm text-green-700",children:"Fast Learners"})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Ee,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsx("span",{className:"font-medium text-yellow-800",children:"Students at Risk"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mb-1",children:r.students_at_risk}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["out of ",r.total_students," total students"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Average Performance"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[r.average_performance,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${r.average_performance}%`}})})]}),a.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex items-center",children:[e.jsx(Ee,{className:"h-4 w-4 text-yellow-600 mr-2"}),"Recent Alerts"]}),e.jsx("div",{className:"space-y-2",children:a.map((i,x)=>e.jsxs("div",{className:`p-3 rounded-lg text-sm ${b(i.severity)}`,children:[e.jsx("p",{className:"font-medium",children:i.student_name}),e.jsx("p",{className:"opacity-75",children:i.message})]},x))})]}),r.inactive_students>0&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(oe,{className:"h-5 w-5 text-gray-600 mr-2"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Inactive Students"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-600 mb-1",children:r.inactive_students}),e.jsx("p",{className:"text-sm text-gray-600",children:"Haven't logged in recently"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>{console.log("Navigating to learner analytics from dashboard..."),window.location.href="/analytics/learners"},className:"flex items-center justify-center w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{children:"View Detailed Analytics"}),e.jsx(ft,{className:"h-4 w-4 ml-2"})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No learner data available"})]})})]})};class _s{static async getDashboardStats(){try{return(await B.get(`${z.ANALYTICS.BASE}/teacher/dashboard`)).dashboard_stats}catch(r){throw console.error("Failed to fetch teacher dashboard stats:",r),new Error("Failed to load dashboard statistics")}}static async getAssignmentStats(){try{return(await B.get(`${z.ANALYTICS.BASE}/teacher/assignments`)).assignment_stats}catch(r){throw console.error("Failed to fetch teacher assignment stats:",r),new Error("Failed to load assignment statistics")}}static async getCourses(){try{return(await B.get(z.COURSES.BASE)).courses}catch(r){throw console.error("Failed to fetch teacher courses:",r),new Error("Failed to load courses")}}static async getCourseStudents(r){try{return(await B.get(z.COURSES.STUDENTS(r))).students}catch(t){throw console.error("Failed to fetch course students:",t),new Error("Failed to load course students")}}static async getStudentAnalytics(r){try{return(await B.get(z.ANALYTICS.STUDENT(r))).analytics}catch(t){throw console.error("Failed to fetch student analytics:",t),new Error("Failed to load student analytics")}}static async getCourseAnalytics(r){try{return(await B.get(z.ANALYTICS.COURSE(r))).analytics}catch(t){throw console.error("Failed to fetch course analytics:",t),new Error("Failed to load course analytics")}}static async getDashboardData(){try{const[r,t,a]=await Promise.all([this.getDashboardStats(),this.getCourses(),this.getAssignmentStats()]);let o=[];try{o=(await B.get(z.ANALYTICS.DASHBOARD)).analytics.recent_activities||[]}catch(c){console.warn("Failed to fetch recent activities:",c),o=[]}return{stats:r,courses:t,recent_activities:o,assignment_stats:a}}catch(r){throw console.error("Failed to fetch teacher dashboard data:",r),new Error("Failed to load dashboard data")}}static async getAllStudents(){try{const r=await this.getCourses(),t=[],a=new Set;for(const o of r)try{(await this.getCourseStudents(o._id)).forEach(n=>{a.has(n.id)||(a.add(n.id),t.push(n))})}catch(c){console.warn(`Failed to fetch students for course ${o.title}:`,c)}return t}catch(r){throw console.error("Failed to fetch all students:",r),new Error("Failed to load students")}}static async getAnalytics(){try{return{dashboard_stats:await this.getDashboardStats()}}catch(r){throw console.error("Failed to fetch teacher analytics:",r),new Error("Failed to load analytics")}}}const dr=()=>{const{user:s}=re(),{announcements:r}=Ge(),[t,a]=l.useState(null),[o,c]=l.useState([]),[n,g]=l.useState([]),[b,i]=l.useState(!0),[x,j]=l.useState(null),[u,S]=l.useState(!1),y=()=>{const m=new Date().getHours();return m<12?"Good morning":m<18?"Good afternoon":"Good evening"},f=async(m=!1)=>{try{m?S(!0):i(!0),j(null);const[C,L,v]=await Promise.all([_s.getDashboardStats(),_s.getCourses(),Ze.getAll()]);a(C),c(L);const E=v.assignments.filter(A=>A.submission_count&&A.submission_count>0).slice(0,5);g(E)}catch(C){console.error("Failed to fetch dashboard data:",C),j("Failed to load dashboard data. Please try again.")}finally{i(!1),S(!1)}};l.useEffect(()=>{f()},[]);const h=()=>{f(!0)};if(b)return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-green-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-white/20 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-white/20 rounded w-1/2"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(m=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]},m))})]});if(x&&!t)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Ee,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Dashboard"}),e.jsx("p",{className:"text-red-700 mb-4",children:x}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})});const d=o.slice(0,3),w=r.slice(0,3),p=t?[{title:"Active Courses",value:t.active_courses,icon:ae,color:"blue",change:t.monthly_growth.courses>0?`+${t.monthly_growth.courses} this month`:"No change this month"},{title:"Total Students",value:t.total_students.toString(),icon:ee,color:"green",change:t.monthly_growth.students>0?`+${t.monthly_growth.students} this month`:"No change this month"},{title:"Pending Grades",value:t.pending_grades.toString(),icon:X,color:"yellow",change:t.pending_grades>0?`${t.pending_grades} need review`:"All caught up!"},{title:"Course Rating",value:t.course_rating.toFixed(1),icon:me,color:"purple",change:t.monthly_growth.rating_change!==0?`${t.monthly_growth.rating_change>0?"+":""}${t.monthly_growth.rating_change.toFixed(1)} this month`:"No change this month"}]:[];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-green-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[y(),", ",s==null?void 0:s.name,"! "]}),e.jsx("button",{onClick:h,disabled:u,className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors disabled:opacity-50",title:"Refresh dashboard",children:e.jsx($e,{className:`h-4 w-4 ${u?"animate-spin":""}`})})]}),e.jsx("p",{className:"text-blue-100 text-lg mb-4",children:"Ready to inspire and educate your students?"}),t&&e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.active_courses," Active Courses"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.total_students," Students"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.course_rating.toFixed(1)," Rating"]})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx(Ne,{className:"h-24 w-24 text-white opacity-20"})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((m,C)=>e.jsx(Es,{title:m.title,value:m.value,change:m.change,changeType:"positive",icon:m.icon,color:m.color},C))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Courses"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:"/courses/create",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"New Course"]}),e.jsxs("a",{href:"/courses",className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["View all",e.jsx(ue,{className:"h-4 w-4 ml-1"})]})]})]}),d.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(m=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:m.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),m.enrolled_students," students"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(X,{className:"h-4 w-4 mr-1"}),m.total_assignments," assignments"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${m.is_active?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:`text-sm font-medium ${m.is_active?"text-green-600":"text-gray-600"}`,children:m.is_active?"Active":"Inactive"})]}),e.jsx("a",{href:`/courses/${m._id}`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Manage "})]})]},m._id))}):e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-12 text-center",children:[e.jsx(ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Courses Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first course to get started"}),e.jsxs("a",{href:"/courses/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Create Course"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Pending Grades"}),e.jsx("a",{href:"/assignments/teacher",className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"View all"})]}),n.length>0?e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg",children:e.jsx("div",{className:"divide-y divide-gray-200",children:n.map(m=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:m.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m.course_title,"  ",m.submission_count||0," submissions"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full",children:"Pending Review"}),e.jsx("a",{href:"/assignments/teacher",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Grade"})]})]})},m._id))})}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx(X,{className:"h-10 w-10 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No pending assignments to grade"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("a",{href:"/courses/create",className:"bg-blue-50 hover:bg-blue-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(ae,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Create Course"})]}),e.jsxs("a",{href:"/assignments/new",className:"bg-green-50 hover:bg-green-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(X,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"New Assignment"})]}),e.jsxs("a",{href:"/assignments/teacher",className:"bg-purple-50 hover:bg-purple-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(ie,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Grade Assignments"})]}),e.jsxs("a",{href:"/analytics",className:"bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(me,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"View Analytics"})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(cr,{}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(be,{className:"h-5 w-5 text-blue-600 mr-2"}),"Today's Schedule"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Machine Learning - Lecture"}),e.jsx("p",{className:"text-sm text-gray-600",children:"10:00 AM - 11:30 AM"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Office Hours"}),e.jsx("p",{className:"text-sm text-gray-600",children:"2:00 PM - 4:00 PM"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Python Programming - Lab"}),e.jsx("p",{className:"text-sm text-gray-600",children:"4:30 PM - 6:00 PM"})]})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Announcements"}),e.jsx("a",{href:"/announcements",className:"text-blue-600 hover:text-blue-700 text-sm",children:"View all"})]})}),e.jsx("div",{className:"p-6",children:w.length>0?e.jsx("div",{className:"space-y-4",children:w.map(m=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:m.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:m.date})]},m.id))}):e.jsx("p",{className:"text-gray-600 text-center",children:"No recent announcements"})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ne,{className:"h-6 w-6 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Teaching Assistant"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Student Insights"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Get AI-powered student performance analysis"}),e.jsx("button",{onClick:()=>window.location.href="/analytics/learners",className:"text-purple-600 text-sm font-medium hover:text-purple-700 transition-colors",children:"View Insights "})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Content Suggestions"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Get personalized teaching recommendations"}),e.jsx("button",{onClick:()=>window.location.href="/ai-assistant",className:"text-green-600 text-sm font-medium hover:text-green-700 transition-colors",children:"Get Suggestions "})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"AI Chat Assistant"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Ask questions about teaching strategies"}),e.jsx("button",{onClick:()=>window.location.href="/ai-assistant",className:"text-blue-600 text-sm font-medium hover:text-blue-700 transition-colors",children:"Start Chat "})]})]})]})]})},mr=()=>{const{user:s}=re(),r=()=>{const a=new Date().getHours();return a<12?"Good morning":a<18?"Good afternoon":"Good evening"},t=[{title:"Total Users",value:"1,247",icon:ee,color:"blue",change:"+12% this month"},{title:"System Status",value:"Online",icon:jt,color:"green",change:"99.9% uptime"},{title:"Active Users",value:"892",icon:yt,color:"purple",change:"Currently online"}];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-900 via-indigo-800 to-blue-900 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(Ke,{className:"h-8 w-8 text-yellow-400"}),r(),", ",s==null?void 0:s.name,"! "]}),e.jsx("p",{className:"text-purple-100 text-lg",children:"System administration dashboard"})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx(Ke,{className:"h-24 w-24 text-yellow-400 opacity-30"})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map((a,o)=>e.jsx(Es,{title:a.title,value:a.value,change:a.change,changeType:"positive",icon:a.icon,color:a.color},o))}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5 text-blue-600"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{window.history.pushState({},"","/admin/users"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"p-6 bg-blue-50 hover:bg-blue-100 rounded-lg text-left transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ee,{className:"h-5 w-5 text-blue-600"}),e.jsx("div",{className:"font-medium text-blue-900",children:"User Management"})]}),e.jsx("div",{className:"text-sm text-blue-700",children:"Manage all system users and roles"})]}),e.jsxs("button",{onClick:()=>{window.history.pushState({},"","/settings"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"p-6 bg-green-50 hover:bg-green-100 rounded-lg text-left transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(gs,{className:"h-5 w-5 text-green-600"}),e.jsx("div",{className:"font-medium text-green-900",children:"Settings"})]}),e.jsx("div",{className:"text-sm text-green-700",children:"Configure system parameters"})]}),e.jsxs("button",{className:"p-6 bg-purple-50 hover:bg-purple-100 rounded-lg text-left transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Is,{className:"h-5 w-5 text-purple-600"}),e.jsx("div",{className:"font-medium text-purple-900",children:"System Status"})]}),e.jsx("div",{className:"text-sm text-purple-700",children:"View system health and activity"})]})]})]})]})},Ss=()=>{const{user:s}=re();switch(s==null?void 0:s.role){case"student":return e.jsx(Gs,{});case"teacher":return e.jsx(dr,{});case"super_admin":return e.jsx(mr,{});default:return e.jsx(Gs,{})}},xr=({courseId:s,courseTitle:r,isActive:t,onUpdate:a,onDelete:o})=>{const[c,n]=l.useState(!1),[g,b]=l.useState(!1),[i,x]=l.useState(!1),[j,u]=l.useState(!1),S=w=>{window.history.pushState({},"",w),window.dispatchEvent(new PopStateEvent("popstate"))},y=()=>{S(`/courses/${s}/edit`),n(!1)},f=async()=>{u(!0);try{await bs.archiveCourse(s),alert("Course archived successfully"),x(!1),n(!1),a&&a()}catch(w){console.error("Failed to archive course:",w),alert(`Failed to archive course: ${w.message}`)}finally{u(!1)}},h=async()=>{u(!0);try{await bs.restoreCourse(s),alert("Course restored successfully"),n(!1),a&&a()}catch(w){console.error("Failed to restore course:",w),alert(`Failed to restore course: ${w.message}`)}finally{u(!1)}},d=async()=>{u(!0);try{await bs.deleteCourse(s),alert("Course deleted successfully"),b(!1),n(!1),o&&o()}catch(w){console.error("Failed to delete course:",w),alert(`Failed to delete course: ${w.message}`)}finally{u(!1)}};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>n(!c),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Course actions",children:e.jsx(Ts,{className:"h-5 w-5"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20",children:[e.jsxs("button",{onClick:y,className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(js,{className:"h-4 w-4"}),"Edit Course"]}),t?e.jsxs("button",{onClick:()=>{x(!0),n(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(ws,{className:"h-4 w-4"}),"Archive Course"]}):e.jsxs("button",{onClick:h,disabled:j,className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors disabled:opacity-50",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Restore Course"]}),e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsxs("button",{onClick:()=>{b(!0),n(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Te,{className:"h-4 w-4"}),"Delete Course"]})]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:e.jsx(ws,{className:"h-6 w-6 text-yellow-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Archive Course"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to archive "',e.jsx("strong",{children:r}),'"? Students will no longer be able to enroll, but existing enrollments will remain active. You can restore it later.']}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>x(!1),disabled:j,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:j,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Archiving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"h-4 w-4"}),"Archive Course"]})})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:e.jsx(Ee,{className:"h-6 w-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Course"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to delete "',e.jsx("strong",{children:r}),'"?']}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-red-900 mb-2",children:"Warning:"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"This will deactivate the course"}),e.jsx("li",{children:"Students will lose access to course materials"}),e.jsx("li",{children:"All enrollments will be affected"}),e.jsx("li",{children:"Course data will be preserved but hidden"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>b(!1),disabled:j,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:d,disabled:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{className:"h-4 w-4"}),"Delete Course"]})})]})]})})]})},ur=({course:s,onClick:r,viewMode:t="grid",isTeacher:a=!1,onUpdate:o})=>{const c=n=>{switch(n){case"Beginner":return"bg-green-100 text-green-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{onClick:r,className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center",children:e.jsx(es,{className:"h-12 w-12 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(s.difficulty)}`,children:s.difficulty})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2 flex-1",children:s.title}),a&&e.jsx("div",{onClick:n=>n.stopPropagation(),children:e.jsx(xr,{courseId:s._id||s.id,courseTitle:s.title,isActive:s.is_active!==!1,onUpdate:o,onDelete:o})})]}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx("span",{children:s.students})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{children:s.rating})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.totalLessons," lessons"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.completedLessons,"/",s.totalLessons]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["by ",s.instructor]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[s.progress,"%"]})]})]})]})},hr=()=>{const{user:s}=re(),{courses:r,fetchCourses:t}=Ge(),[a,o]=l.useState(""),[c,n]=l.useState("all"),[g,b]=l.useState("all"),[i,x]=l.useState("grid"),[j,u]=l.useState("title"),S=p=>{window.history.pushState({},"",`/courses/${p}`),window.dispatchEvent(new PopStateEvent("popstate"))},y=()=>{t&&t()},f=["all","AI & Machine Learning","Programming","Data Science","Web Development","Mobile Development","Database","Cloud Computing","Cybersecurity","DevOps"],h=(s==null?void 0:s.role)==="teacher",d=r.filter(p=>p.title.toLowerCase().includes(a.toLowerCase())||p.description.toLowerCase().includes(a.toLowerCase())).filter(p=>c==="all"||p.category===c).filter(p=>g==="all"?!0:g==="active"?p.progress<100:g==="completed"?p.progress===100:!0).sort((p,m)=>{switch(j){case"title":return p.title.localeCompare(m.title);case"progress":return(m.progress||0)-(p.progress||0);case"rating":return(m.rating||0)-(p.rating||0);case"students":return(m.students||0)-(p.students||0);case"recent":return new Date(m.createdAt||0).getTime()-new Date(p.createdAt||0).getTime();default:return 0}}),w={total:r.length,active:r.filter(p=>p.progress<100).length,completed:r.filter(p=>p.progress===100).length,totalStudents:r.reduce((p,m)=>p+(m.students||0),0)};return e.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"My Courses"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:h?"Create and manage your courses":"Manage and continue your learning journey"})]}),h&&e.jsxs("a",{href:"/courses/create",className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:[e.jsx(pe,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Course"]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ae,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Total Courses"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:w.total})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(oe,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"In Progress"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:w.active})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(me,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Completed"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:w.completed})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ze,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Avg Progress"}),e.jsxs("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:[w.total>0?Math.round(r.reduce((p,m)=>p+(m.progress||0),0)/w.total):0,"%"]})]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ee,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Total Students"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:w.totalStudents})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(me,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Avg Rating"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:w.total>0?(r.reduce((p,m)=>p+(m.rating||0),0)/w.total).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ue,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Active Courses"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:w.total})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6 mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:a,onChange:p=>o(p.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-2.5 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(ps,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsx("select",{value:c,onChange:p=>n(p.target.value),className:"flex-1 px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:f.map(p=>e.jsx("option",{value:p,children:p==="all"?"All Categories":p},p))})]}),!h&&e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(oe,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("select",{value:g,onChange:p=>b(p.target.value),className:"flex-1 px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(vt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("select",{value:j,onChange:p=>u(p.target.value),className:"flex-1 px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"recent",children:"Most Recent"}),!h&&e.jsx("option",{value:"progress",children:"Progress"}),e.jsx("option",{value:"rating",children:"Rating"}),h&&e.jsx("option",{value:"students",children:"Students"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>x("grid"),className:`p-2 rounded-md transition-colors ${i==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Grid View",children:e.jsx(wt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x("list"),className:`p-2 rounded-md transition-colors ${i==="list"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"List View",children:e.jsx(Js,{className:"h-4 w-4"})})]})]})]})}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-gray-900",children:d.length})," of"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:r.length})," courses"]}),e.jsx("div",{className:i==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6":"space-y-4",children:d.length>0?d.map(p=>e.jsx(ur,{course:p,viewMode:i,isTeacher:h,onClick:()=>S(p.id),onUpdate:y},p.id)):e.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-xl border border-gray-200",children:[e.jsx(ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a||c!=="all"||g!=="all"?"Try adjusting your search or filter criteria":h?"Start by creating your first course":"No courses enrolled yet"}),h&&e.jsxs("a",{href:"/courses/create",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(pe,{className:"h-5 w-5"}),"Create Your First Course"]})]})})]})},gr="modulepreload",pr=function(s){return"/"+s},Vs={},nt=function(r,t,a){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),g=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.allSettled(t.map(b=>{if(b=pr(b),b in Vs)return;Vs[b]=!0;const i=b.endsWith(".css"),x=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${x}`))return;const j=document.createElement("link");if(j.rel=i?"stylesheet":gr,i||(j.as="script"),j.crossOrigin="",j.href=b,g&&j.setAttribute("nonce",g),document.head.appendChild(j),i)return new Promise((u,S)=>{j.addEventListener("load",u),j.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(n){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=n,window.dispatchEvent(g),!g.defaultPrevented)throw n}return o.then(n=>{for(const g of n||[])g.status==="rejected"&&c(g.reason);return r().catch(c)})},br=(s,r,t="Field")=>{if(r.required){if(s==null||s==="")return{isValid:!1,error:`${t} is required`};if(typeof s=="string"&&s.trim()==="")return{isValid:!1,error:`${t} is required`}}if(!s&&!r.required)return{isValid:!0};if(typeof s=="string"){if(r.minLength&&s.trim().length<r.minLength)return{isValid:!1,error:`${t} must be at least ${r.minLength} characters`};if(r.maxLength&&s.trim().length>r.maxLength)return{isValid:!1,error:`${t} must not exceed ${r.maxLength} characters`};if(r.pattern&&!r.pattern.test(s))return{isValid:!1,error:`${t} format is invalid`}}if(typeof s=="number"||!isNaN(Number(s))){const a=typeof s=="number"?s:Number(s);if(r.min!==void 0&&a<r.min)return{isValid:!1,error:`${t} must be at least ${r.min}`};if(r.max!==void 0&&a>r.max)return{isValid:!1,error:`${t} must not exceed ${r.max}`}}return r.custom?r.custom(s):{isValid:!0}},Ds=(s,r)=>{const t={};return Object.keys(r).forEach(a=>{const o=br(s[a],r[a],a);!o.isValid&&o.error&&(t[a]=o.error)}),{isValid:Object.keys(t).length===0,errors:t}},fr={title:{required:!0,minLength:5,maxLength:200},description:{required:!0,minLength:20,maxLength:2e3},category:{required:!0},max_students:{required:!0,min:1,max:1e4,custom:s=>{const r=Number(s);return isNaN(r)?{isValid:!1,error:"Max students must be a valid number"}:Number.isInteger(r)?{isValid:!0}:{isValid:!1,error:"Max students must be a whole number"}}},duration:{minLength:2,maxLength:100}},jr={title:{required:!0,minLength:3,maxLength:200},description:{required:!0,minLength:10,maxLength:1e3},course_id:{required:!0},due_date:{required:!0,custom:s=>{if(!s)return{isValid:!1,error:"Due date is required"};const r=new Date(s),t=new Date;return isNaN(r.getTime())?{isValid:!1,error:"Invalid date format"}:r<=t?{isValid:!1,error:"Due date must be in the future"}:{isValid:!0}}},max_points:{required:!0,min:1,max:1e3,custom:s=>{const r=Number(s);return isNaN(r)?{isValid:!1,error:"Max points must be a valid number"}:r<=0?{isValid:!1,error:"Max points must be greater than 0"}:{isValid:!0}}},max_file_size:{required:!0,min:1,max:100,custom:s=>{const r=Number(s);return isNaN(r)?{isValid:!1,error:"Max file size must be a valid number"}:r<=0?{isValid:!1,error:"Max file size must be greater than 0"}:{isValid:!0}}}},yr=s=>({grade:{required:!0,min:0,max:s,custom:r=>{if(r==null||r==="")return{isValid:!1,error:"Grade is required"};const t=Number(r);return isNaN(t)?{isValid:!1,error:"Grade must be a valid number"}:t<0?{isValid:!1,error:"Grade cannot be negative"}:t>s?{isValid:!1,error:`Grade cannot exceed ${s} points`}:{isValid:!0}}},feedback:{maxLength:2e3}}),qs=(s,r)=>{const t=r*1024*1024;return s<=t},Nr=()=>{const{user:s}=re(),[r,t]=l.useState(!1),[a,o]=l.useState({}),[c,n]=l.useState({}),g=_=>{window.history.pushState({},"",_),window.dispatchEvent(new PopStateEvent("popstate"))},b=()=>{window.history.back()},[i,x]=l.useState(""),[j,u]=l.useState(""),[S,y]=l.useState(""),[f,h]=l.useState("Beginner"),[d,w]=l.useState(""),[p,m]=l.useState(""),[C,L]=l.useState(!0),[v,E]=l.useState("50"),[A,N]=l.useState([""]),[Y,k]=l.useState([""]),[U,V]=l.useState(""),[R,F]=l.useState([{id:"1",title:"Module 1",description:"",order:1,lessons:[]}]),I=["AI & Machine Learning","Programming","Data Science","Web Development","Mobile Development","Database","Cloud Computing","Cybersecurity","DevOps","Other"],ne=["Beginner","Intermediate","Advanced"],we=()=>{N([...A,""])},ge=_=>{N(A.filter((M,$)=>$!==_))},Ve=(_,M)=>{const $=[...A];$[_]=M,N($)},D=()=>{k([...Y,""])},q=_=>{k(Y.filter((M,$)=>$!==_))},ce=(_,M)=>{const $=[...Y];$[_]=M,k($)},Ae=()=>{const _={id:Date.now().toString(),title:`Module ${R.length+1}`,description:"",order:R.length+1,lessons:[]};F([...R,_])},Re=_=>{F(R.filter(M=>M.id!==_))},qe=(_,M,$)=>{F(R.map(Q=>Q.id===_?{...Q,[M]:$}:Q))},rs=_=>{F(R.map(M=>{if(M.id===_){const $={id:Date.now().toString(),title:`Lesson ${M.lessons.length+1}`,type:"video",content:"",duration:"",order:M.lessons.length+1};return{...M,lessons:[...M.lessons,$]}}return M}))},cs=(_,M)=>{F(R.map($=>$.id===_?{...$,lessons:$.lessons.filter(Q=>Q.id!==M)}:$))},Se=(_,M,$,Q)=>{F(R.map(Z=>Z.id===_?{...Z,lessons:Z.lessons.map(se=>se.id===M?{...se,[$]:Q}:se)}:Z))},T=async(_,M,$)=>{var fe,je,ye;const Q=(fe=$.target.files)==null?void 0:fe[0];if(!Q)return;if(!Q.type.startsWith("video/")){n({video:"Please select a video file"}),alert("Please select a video file");return}if(!qs(Q.size,100)){n({video:"Video file size must be less than 100MB"}),alert("Video file size must be less than 100MB");return}n(J=>{const te={...J};return delete te.video,te});const Z=`${_}-${M}`,se=((ye=(je=R.find(J=>J.id===_))==null?void 0:je.lessons.find(J=>J.id===M))==null?void 0:ye.title)||"Video",P=localStorage.getItem("access_token")||localStorage.getItem("token");if(!P){alert("Please login first. Token not found.");return}console.log(" Uploading video with token:",P.substring(0,20)+"..."),console.log(" To:","http://localhost:5000/api/videos/upload");const H=new FormData;H.append("video",Q),H.append("title",se),H.append("description",`Video for ${se}`);const W=new XMLHttpRequest;W.upload.addEventListener("progress",J=>{if(J.lengthComputable){const te=Math.round(J.loaded/J.total*100);o(K=>({...K,[Z]:te})),Se(_,M,"content",`Uploading... ${te}%`)}}),W.addEventListener("load",()=>{if(W.status===201)try{const J=JSON.parse(W.responseText);Se(_,M,"content",J.videoId),o(te=>{const K={...te};return delete K[Z],K}),alert("Video uploaded successfully!")}catch{alert("Upload completed but failed to parse response"),Se(_,M,"content","")}else{try{const J=JSON.parse(W.responseText);alert(`Upload failed: ${J.error||W.status}`)}catch{alert(`Upload failed with status ${W.status}`)}Se(_,M,"content",""),o(J=>{const te={...J};return delete te[Z],te})}}),W.addEventListener("error",()=>{alert("Network error. Please check your connection."),Se(_,M,"content",""),o(J=>{const te={...J};return delete te[Z],te})}),W.open("POST","http://localhost:5000/api/videos/upload"),W.setRequestHeader("Authorization",`Bearer ${P}`),W.send(H)},G=_=>{var $;const M=($=_.target.files)==null?void 0:$[0];if(M){if(!M.type.startsWith("image/")){n({thumbnail:"Please select an image file"});return}if(!qs(M.size,5)){n({thumbnail:"File size must be less than 5MB"});return}n(Z=>{const se={...Z};return delete se.thumbnail,se});const Q=new FileReader;Q.onload=Z=>{var se;m((se=Z.target)==null?void 0:se.result)},Q.readAsDataURL(M)}},xe=async _=>{var se,P;_.preventDefault(),n({});const $=Ds({title:i,description:j,category:S,max_students:v,duration:d},fr);if(!$.isValid){n($.errors);const H=Object.keys($.errors)[0],W=document.querySelector(`[name="${H}"]`);W==null||W.scrollIntoView({behavior:"smooth",block:"center"});return}const Q=R.filter(H=>H.title.trim());if(Q.length===0){n({modules:"Please add at least one module to your course"});return}if(Q.filter(H=>H.lessons.some(W=>W.title.trim()&&W.content.trim())).length===0){n({modules:"Please add at least one lesson to your modules"});return}t(!0);try{const{apiClient:H,API_ENDPOINTS:W}=await nt(async()=>{const{apiClient:J,API_ENDPOINTS:te}=await Promise.resolve().then(()=>rt);return{apiClient:J,API_ENDPOINTS:te}},void 0),fe=parseInt(v),je={title:i.trim(),description:j.trim(),category:S,difficulty:f,duration:d.trim()||"Self-paced",thumbnail:p||"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",is_public:C,max_students:fe,prerequisites:A.filter(J=>J.trim()),learning_objectives:Y.filter(J=>J.trim()),modules:Q.map(J=>({title:J.title.trim(),description:J.description.trim(),lessons:J.lessons.filter(te=>te.title.trim()&&te.content.trim()).map(te=>({title:te.title.trim(),type:te.type,content:te.content.trim(),duration:te.duration.trim(),order:te.order,is_required:!0}))})).filter(J=>J.lessons.length>0)},ye=await H.post(W.COURSES.BASE,je);alert("Course created successfully!"),g("/courses")}catch(H){console.error("Error creating course:",H);const W=((P=(se=H.response)==null?void 0:se.data)==null?void 0:P.error)||H.message||"Failed to create course";n({submit:W}),window.scrollTo({top:0,behavior:"smooth"})}finally{t(!1)}};return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:b,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(ss,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create New Course"}),e.jsx("p",{className:"text-gray-600",children:"Fill in the details to create your course"})]}),e.jsxs("form",{onSubmit:xe,className:"space-y-8",children:[(c.submit||c.modules)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ve,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-red-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Error"}),e.jsx("p",{children:c.submit||c.modules})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Course Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"title",value:i,onChange:_=>x(_.target.value),placeholder:"e.g., Introduction to Machine Learning",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.title?"border-red-500":"border-gray-300"}`,required:!0}),c.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.title})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"description",value:j,onChange:_=>u(_.target.value),placeholder:"Provide a detailed description of your course...",rows:4,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.description?"border-red-500":"border-gray-300"}`,required:!0}),c.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category",value:S,onChange:_=>y(_.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.category?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),I.map(_=>e.jsx("option",{value:_,children:_},_))]}),c.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.category})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),e.jsx("select",{value:f,onChange:_=>h(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ne.map(_=>e.jsx("option",{value:_,children:_},_))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),e.jsx("input",{type:"text",value:d,onChange:_=>w(_.target.value),placeholder:"e.g., 8 weeks, 40 hours",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Max Students ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"max_students",value:v,onChange:_=>E(_.target.value),min:"1",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.max_students?"border-red-500":"border-gray-300"}`}),c.max_students&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.max_students})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:C,onChange:_=>L(_.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-gray-700",children:"Make this course publicly visible"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Course Thumbnail"}),e.jsx("div",{className:"space-y-4",children:p?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:"Course thumbnail",className:"w-full h-64 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>m(""),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:e.jsx(he,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(St,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload a course thumbnail"}),e.jsxs("label",{className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 cursor-pointer",children:[e.jsx(ke,{className:"h-4 w-4"}),"Choose Image",e.jsx("input",{type:"file",accept:"image/*",onChange:G,className:"hidden"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: 1200x600px, Max 5MB"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Prerequisites"}),e.jsxs("button",{type:"button",onClick:we,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add Prerequisite"]})]}),e.jsx("div",{className:"space-y-3",children:A.map((_,M)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:_,onChange:$=>Ve(M,$.target.value),placeholder:"e.g., Basic Python knowledge",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),A.length>1&&e.jsx("button",{type:"button",onClick:()=>ge(M),className:"text-red-500 hover:text-red-700",children:e.jsx(Te,{className:"h-4 w-4"})})]},M))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Learning Objectives"}),e.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add Objective"]})]}),e.jsx("div",{className:"space-y-3",children:Y.map((_,M)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:_,onChange:$=>ce(M,$.target.value),placeholder:"e.g., Understand machine learning algorithms",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),Y.length>1&&e.jsx("button",{type:"button",onClick:()=>q(M),className:"text-red-500 hover:text-red-700",children:e.jsx(Te,{className:"h-4 w-4"})})]},M))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Course Syllabus"}),e.jsx("textarea",{value:U,onChange:_=>V(_.target.value),placeholder:"Provide a detailed syllabus or course outline...",rows:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Course Modules & Lessons"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Organize your course content into modules and lessons"})]}),e.jsxs("button",{type:"button",onClick:Ae,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add Module"]})]}),e.jsxs("div",{className:"space-y-6",children:[R.map((_,M)=>e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("input",{type:"text",value:_.title,onChange:$=>qe(_.id,"title",$.target.value),placeholder:"Module title",className:"w-full px-4 py-2 text-lg font-semibold border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsx("textarea",{value:_.description,onChange:$=>qe(_.id,"description",$.target.value),placeholder:"Module description (optional)",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"})]}),R.length>1&&e.jsx("button",{type:"button",onClick:()=>Re(_.id),className:"ml-4 text-red-500 hover:text-red-700",title:"Remove Module",children:e.jsx(Te,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"space-y-3 mb-4",children:_.lessons.map(($,Q)=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("select",{value:$.type,onChange:Z=>Se(_.id,$.id,"type",Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"video",children:" Video"}),e.jsx("option",{value:"document",children:" Document"}),e.jsx("option",{value:"assignment",children:" Assignment"})]})}),e.jsx("div",{className:"md:col-span-4",children:e.jsx("input",{type:"text",value:$.title,onChange:Z=>Se(_.id,$.id,"title",Z.target.value),placeholder:"Lesson title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",value:$.duration,onChange:Z=>Se(_.id,$.id,"duration",Z.target.value),placeholder:"Duration (e.g., 15 min)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-3",children:$.type==="video"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-50 text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-100 cursor-pointer text-sm",children:[e.jsx(ke,{className:"h-4 w-4"}),$.content&&!$.content.includes("Uploading")?"Change Video":"Upload Video",e.jsx("input",{type:"file",accept:"video/*",onChange:Z=>T(_.id,$.id,Z),className:"hidden",disabled:a[`${_.id}-${$.id}`]!==void 0})]}),$.content&&!$.content.includes("Uploading")&&e.jsx(_e,{className:"h-5 w-5 text-green-600",title:"Video uploaded"})]}),a[`${_.id}-${$.id}`]!==void 0&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[a[`${_.id}-${$.id}`],"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-purple-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${a[`${_.id}-${$.id}`]}%`}})})]})]}):e.jsx("input",{type:"url",value:$.content,onChange:Z=>Se(_.id,$.id,"content",Z.target.value),placeholder:"URL or content",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-1 flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>cs(_.id,$.id),className:"text-red-500 hover:text-red-700",title:"Remove Lesson",children:e.jsx(he,{className:"h-5 w-5"})})})]})},$.id))}),e.jsxs("button",{type:"button",onClick:()=>rs(_.id),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add Lesson to ",_.title]})]},_.id)),R.length===0&&e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(ae,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No modules added yet"}),e.jsxs("button",{type:"button",onClick:Ae,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add Your First Module"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:b,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"h-4 w-4"}),"Create Course"]})})]})]})]})},Pe=()=>{const s=localStorage.getItem("access_token")||localStorage.getItem("token");return s?s.startsWith("eyJ")?s:(console.error(" Invalid token format"),localStorage.removeItem("token"),localStorage.removeItem("access_token"),null):(console.error(" No token found. Please login."),null)},Ys=()=>{const s=Pe();if(!s)return!1;try{const t=JSON.parse(atob(s.split(".")[1])).exp*1e3;return Date.now()>=t+3e5?(console.error(" Token expired"),!1):!0}catch{return console.warn(" Could not decode token, assuming valid"),!0}},it=()=>{try{const s=localStorage.getItem("user");return s&&JSON.parse(s).role||null}catch(s){return console.error("Error getting user role:",s),null}},Hs=()=>it()==="teacher",vr=()=>{console.log("=== TOKEN DEBUG ===");const s=localStorage.getItem("token");console.log("1. Token exists:",!!s),s&&(console.log("2. Token format valid:",s.startsWith("eyJ")),console.log("3. Token length:",s.length),console.log("4. Token valid:",Ys()));const r=it();console.log("5. User role:",r),console.log("6. Is teacher:",Hs()),s?Ys()?Hs()?console.log(" Everything looks good!"):console.log(" Solution: Need teacher account to upload videos"):console.log(" Solution: Token expired. Logout and login again"):console.log(" Solution: Please login")};typeof window<"u"&&(window.debugToken=vr);const os=({type:s,message:r,onClose:t,duration:a=5e3})=>(l.useEffect(()=>{const o=setTimeout(()=>{t()},a);return()=>clearTimeout(o)},[t,a]),e.jsxs("div",{className:`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2 ${s==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[s==="success"?e.jsx(de,{className:"h-5 w-5"}):e.jsx(ve,{className:"h-5 w-5"}),e.jsx("span",{children:r}),e.jsx("button",{onClick:t,className:"ml-2 hover:opacity-75",children:e.jsx(he,{className:"h-4 w-4"})})]})),wr=({isOpen:s,onClose:r,onSuccess:t,courseId:a,editingAssignment:o})=>{const[c,n]=l.useState({title:"",description:"",course_id:a||"",instructions:"",due_date:"",max_points:100,submission_type:"both",allowed_file_types:[],max_file_size:10}),[g,b]=l.useState(""),[i,x]=l.useState(!1),[j,u]=l.useState(null),[S,y]=l.useState({});l.useEffect(()=>{o?n({title:o.title,description:o.description,course_id:o.course_id,instructions:o.instructions||"",due_date:o.due_date.split("T")[0]+"T"+o.due_date.split("T")[1].substring(0,5),max_points:o.max_points,submission_type:o.submission_type,allowed_file_types:o.allowed_file_types||[],max_file_size:o.max_file_size}):a&&n(m=>({...m,course_id:a}))},[o,a]);const f=()=>{const m=Ds(c,jr);return y(m.errors),m.isValid},h=async m=>{if(m.preventDefault(),!!f()){x(!0);try{if(o){const C={title:c.title,description:c.description,instructions:c.instructions,due_date:new Date(c.due_date).toISOString(),max_points:c.max_points,submission_type:c.submission_type,allowed_file_types:c.allowed_file_types,max_file_size:c.max_file_size};await Ze.updateAssignment(o._id,C),u({type:"success",message:"Assignment updated successfully!"})}else{const C={...c,due_date:new Date(c.due_date).toISOString()};await Ze.createAssignment(C),u({type:"success",message:"Assignment created successfully!"})}setTimeout(()=>{t(),d()},1500)}catch(C){console.error("Error saving assignment:",C),u({type:"error",message:C instanceof Error?C.message:"Failed to save assignment"})}finally{x(!1)}}},d=()=>{n({title:"",description:"",course_id:a||"",instructions:"",due_date:"",max_points:100,submission_type:"both",allowed_file_types:[],max_file_size:10}),y({}),b(""),r()},w=()=>{g.trim()&&!c.allowed_file_types.includes(g.trim())&&(n(m=>({...m,allowed_file_types:[...m.allowed_file_types,g.trim()]})),b(""))},p=m=>{n(C=>({...C,allowed_file_types:C.allowed_file_types.filter(L=>L!==m)}))};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?"Edit Assignment":"Create New Assignment"}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:e.jsx(he,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Title *"}),e.jsx("input",{type:"text",value:c.title,onChange:m=>n(C=>({...C,title:m.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${S.title?"border-red-500":"border-gray-300"}`,placeholder:"Enter assignment title",disabled:i}),S.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:c.description,onChange:m=>n(C=>({...C,description:m.target.value})),rows:3,className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none ${S.description?"border-red-500":"border-gray-300"}`,placeholder:"Brief description of the assignment",disabled:i}),S.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detailed Instructions"}),e.jsx("textarea",{value:c.instructions,onChange:m=>n(C=>({...C,instructions:m.target.value})),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Provide detailed instructions for students...",disabled:i})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"datetime-local",value:c.due_date,onChange:m=>n(C=>({...C,due_date:m.target.value})),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${S.due_date?"border-red-500":"border-gray-300"}`,disabled:i})]}),S.due_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.due_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Points *"}),e.jsx("input",{type:"number",value:c.max_points,onChange:m=>n(C=>({...C,max_points:parseInt(m.target.value)||0})),min:"1",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${S.max_points?"border-red-500":"border-gray-300"}`,disabled:i}),S.max_points&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.max_points})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Submission Type *"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["file","text","both"].map(m=>e.jsx("button",{type:"button",onClick:()=>n(C=>({...C,submission_type:m})),className:`px-4 py-3 rounded-lg border-2 font-medium transition-colors ${c.submission_type===m?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,disabled:i,children:m.charAt(0).toUpperCase()+m.slice(1)},m))})]}),(c.submission_type==="file"||c.submission_type==="both")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed File Types"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:g,onChange:m=>b(m.target.value),onKeyPress:m=>m.key==="Enter"&&(m.preventDefault(),w()),placeholder:"e.g., .pdf, .docx, .zip",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:i}),e.jsxs("button",{type:"button",onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",disabled:i,children:[e.jsx(pe,{className:"h-4 w-4"}),"Add"]})]}),c.allowed_file_types.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:c.allowed_file_types.map(m=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:[m,e.jsx("button",{type:"button",onClick:()=>p(m),className:"text-gray-500 hover:text-red-600",disabled:i,children:e.jsx(Te,{className:"h-3 w-3"})})]},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max File Size (MB) *"}),e.jsx("input",{type:"number",value:c.max_file_size,onChange:m=>n(C=>({...C,max_file_size:parseInt(m.target.value)||0})),min:"1",max:"100",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${S.max_file_size?"border-red-500":"border-gray-300"}`,disabled:i}),S.max_file_size&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.max_file_size})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ve,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Assignment Guidelines:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Students will be notified when the assignment is created"}),e.jsx("li",{children:"Set a realistic deadline for students to complete the work"}),e.jsx("li",{children:"Provide clear instructions to avoid confusion"}),e.jsx("li",{children:"You can edit the assignment details before the due date"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:d,className:"px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors font-medium",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),o?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"h-4 w-4"}),o?"Update Assignment":"Create Assignment"]})})]})]})]})}),j&&e.jsx(os,{type:j.type,message:j.message,onClose:()=>u(null)})]}):null},Sr=({isOpen:s,onClose:r,submission:t,maxPoints:a,onGradeSubmitted:o})=>{const[c,n]=l.useState(""),[g,b]=l.useState(""),[i,x]=l.useState(!1),[j,u]=l.useState(null),[S,y]=l.useState({});l.useEffect(()=>{var C;t&&(n(((C=t.grade)==null?void 0:C.toString())||""),b(t.feedback||""),y({}))},[t]);const f=()=>{const C=Ds({grade:c,feedback:g},yr(a));return y(C.errors),C.isValid},h=async C=>{if(C.preventDefault(),!(!t||!f())){x(!0);try{await Ze.gradeSubmission(t._id,{grade:parseFloat(c),feedback:g.trim()}),u({type:"success",message:"Grade submitted successfully!"}),setTimeout(()=>{o(),d()},1500)}catch(L){console.error("Error grading submission:",L),u({type:"error",message:L instanceof Error?L.message:"Failed to submit grade"})}finally{x(!1)}}},d=()=>{n(""),b(""),y({}),r()},w=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=()=>{const C=parseFloat(c);return isNaN(C)||a===0?0:C/a*100},m=()=>{const C=p();return C>=90?"text-green-600":C>=80?"text-blue-600":C>=70?"text-yellow-600":C>=60?"text-orange-600":"text-red-600"};return!s||!t?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Grade Submission"}),e.jsx("p",{className:"text-gray-600 mt-1",children:t.student_name})]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:e.jsx(he,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Student Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.student_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Roll No:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.roll_no})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Submitted:"}),e.jsx("span",{className:"font-medium text-gray-900",children:w(t.submitted_at)})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Submission Content"}),t.text_content&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Text Response:"}),e.jsx("div",{className:"text-gray-900 whitespace-pre-wrap",children:t.text_content})]}),t.file_name&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:t.file_name}),e.jsx("p",{className:"text-xs text-blue-700",children:"Attached file"})]})]}),e.jsxs("button",{className:"text-blue-600 hover:text-blue-700 flex items-center gap-1 text-sm font-medium",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Download"]})]})}),!t.text_content&&!t.file_name&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 text-center",children:[e.jsx(X,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"No submission content available"})]})]}),t.status==="graded"&&t.grade!==void 0&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Current Grade"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ie,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[t.grade,"/",a]}),e.jsxs("span",{className:"text-sm text-green-700",children:["(",(t.grade/a*100).toFixed(1),"%)"]})]}),t.feedback&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Previous Feedback:"}),e.jsx("p",{className:"text-sm text-green-800",children:t.feedback})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Grade (out of ",a,") *"]}),e.jsx("input",{type:"number",value:c,onChange:C=>n(C.target.value),min:"0",max:a,step:"0.5",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg font-semibold ${S.grade?"border-red-500":"border-gray-300"}`,placeholder:`0-${a}`,disabled:i}),S.grade&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.grade}),c&&!S.grade&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Percentage"}),e.jsxs("span",{className:`font-semibold ${m()}`,children:[p().toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${p()>=70?"bg-green-500":p()>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(p(),100)}%`}})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),e.jsx("textarea",{value:g,onChange:C=>b(C.target.value),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Provide constructive feedback to help the student improve...",disabled:i}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[g.length," characters"]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ve,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Note"}),e.jsx("p",{children:"The student will receive a notification about their grade and feedback. Make sure your feedback is constructive and helpful."})]})]})}),e.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i||!c,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-4 w-4"}),t.status==="graded"?"Update Grade":"Submit Grade"]})}),e.jsx("button",{type:"button",onClick:d,className:"w-full px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors font-medium",disabled:i,children:"Cancel"})]})]})})]})})]})}),j&&e.jsx(os,{type:j.type,message:j.message,onClose:()=>u(null)})]})},kr=()=>{const[s,r]=l.useState(null),[t,a]=l.useState(!0),[o,c]=l.useState(null);l.useEffect(()=>{n()},[]);const n=async()=>{try{a(!0);const x=await Ze.getAssignmentStatistics();r(x)}catch(x){console.error("Error fetching assignment statistics:",x),c({type:"error",message:"Failed to load assignment statistics"})}finally{a(!1)}},g=x=>{switch(x){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200"}},b=x=>new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),i=()=>{if(!s)return;const x=[["Assignment Analytics Report"],["Generated:",new Date().toLocaleString()],[""],["Summary Statistics"],["Total Assignments",s.total_assignments],["Pending Submissions",s.pending_submissions],["Graded Submissions",s.graded_submissions],["Completion Rate",`${s.completion_rate.toFixed(1)}%`],["Average Grade",s.average_grade.toFixed(2)],[""],["Assignment Performance"],["Assignment","Course","Submissions","Graded","Avg Grade","Grade %","Due Date"],...s.assignment_performance.map(y=>[y.assignment_title,y.course_title,y.total_submissions,y.graded_submissions,y.average_grade.toFixed(2),`${y.grade_percentage.toFixed(1)}%`,b(y.due_date)])].map(y=>y.join(",")).join(`
`),j=new Blob([x],{type:"text/csv"}),u=window.URL.createObjectURL(j),S=document.createElement("a");S.href=u,S.download=`assignment-analytics-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(u),c({type:"success",message:"Report exported successfully!"})};return t?e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading analytics..."})]})}):s?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Assignment Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Track assignment performance and student progress"})]}),e.jsxs("button",{onClick:i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"Export Report"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(X,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Assignments"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.total_assignments})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(oe,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pending"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.pending_submissions})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Graded"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.graded_submissions})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[s.completion_rate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ie,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Avg Grade"})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.average_grade.toFixed(1)})]})]}),s.grading_workload.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(oe,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grading Workload"})]}),e.jsx("div",{className:"space-y-4",children:s.grading_workload.map(x=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:x.assignment_title}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${g(x.priority)}`,children:[x.priority.toUpperCase()," PRIORITY"]})]}),e.jsx("p",{className:"text-sm text-blue-600 mb-3",children:x.course_title}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:[x.pending_submissions," pending / ",x.total_submissions," total"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",b(x.due_date)]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Grading Progress"}),e.jsxs("span",{children:[x.total_submissions>0?Math.round((x.total_submissions-x.pending_submissions)/x.total_submissions*100):0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${x.total_submissions>0?(x.total_submissions-x.pending_submissions)/x.total_submissions*100:0}%`}})})]})]})})},x.assignment_id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ze,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Assignment Performance"})]}),s.assignment_performance.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(X,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No performance data available"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Assignment"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Course"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Submissions"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Graded"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Avg Grade"}),e.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Performance"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Due Date"})]})}),e.jsx("tbody",{children:s.assignment_performance.map(x=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("p",{className:"font-medium text-gray-900",children:x.assignment_title})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:x.course_title})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.total_submissions})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.graded_submissions})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[x.average_grade.toFixed(1),"/",x.max_points]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${x.grade_percentage>=80?"bg-green-500":x.grade_percentage>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${x.grade_percentage}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 min-w-[45px]",children:[x.grade_percentage.toFixed(0),"%"]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-sm text-gray-600",children:b(x.due_date)})})]},x.assignment_id))})]})})]}),s.assignment_performance.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ve,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Insights"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[s.completion_rate<50&&e.jsx("li",{children:" Low completion rate detected. Consider extending deadlines or providing additional support."}),s.average_grade<60&&e.jsx("li",{children:" Average grade is below 60%. Review assignment difficulty and provide more guidance."}),s.pending_submissions>10&&e.jsxs("li",{children:[" You have ",s.pending_submissions," pending submissions to grade."]}),s.completion_rate>=80&&s.average_grade>=75&&e.jsx("li",{children:" Great job! Students are performing well with high completion and grade rates."})]})]})]})}),o&&e.jsx(os,{type:o.type,message:o.message,onClose:()=>c(null)})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No analytics data available"})]})})},Fs=()=>{const[s,r]=l.useState([]),[t,a]=l.useState(null),[o,c]=l.useState(!0),[n,g]=l.useState(null),[b,i]=l.useState(!1),[x,j]=l.useState(null),[u,S]=l.useState(!1),[y,f]=l.useState(null),[h,d]=l.useState(null),[w,p]=l.useState(null),[m,C]=l.useState("assignments");l.useEffect(()=>{L()},[]);const L=async()=>{try{if(!Pe()){c(!1);return}const I=await Ze.getAssignments();r(I)}catch(F){console.error("Error fetching assignments:",F),j({type:"error",message:"Failed to load assignments"})}finally{c(!1)}},v=()=>{f(null),S(!0)},E=F=>{f(F),S(!0),p(null)},A=async F=>{try{await Ze.deleteAssignment(F),j({type:"success",message:"Assignment deleted successfully"}),d(null),p(null),L()}catch(I){console.error("Error deleting assignment:",I),j({type:"error",message:"Failed to delete assignment"})}},N=()=>{L(),S(!1),f(null)},Y=async F=>{try{const I=await tt.getById(F);a(I.data.assignment)}catch(I){console.error("Error fetching assignment details:",I),j({type:"error",message:"Failed to load assignment details"})}},k=F=>{g(F),i(!0)},U=()=>{t&&Y(t._id),i(!1),g(null)},V=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),R=F=>{if(!F.submissions)return{total:0,graded:0,pending:0};const I=F.submissions.length,ne=F.submissions.filter(ge=>ge.status==="graded").length,we=I-ne;return{total:I,graded:ne,pending:we}};if(o)return e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading assignments..."})]})});if(t){const F=R(t);return e.jsxs("div",{className:"p-6",children:[e.jsx("button",{onClick:()=>a(null),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:" Back to Assignments"}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[e.jsx(ee,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Submissions"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:F.total})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[e.jsx(de,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Graded"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:F.graded})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[e.jsx(oe,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Pending"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:F.pending})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[e.jsx(ie,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Max Points"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:t.max_points})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Student Submissions"}),!t.submissions||t.submissions.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(X,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No submissions yet"})]}):t.submissions.map(I=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:I.student_name}),e.jsx("span",{className:"text-sm text-gray-500",children:I.roll_no}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.status==="graded"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:I.status==="graded"?"Graded":"Pending Review"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:I.student_email}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Submission:"}),e.jsx("p",{className:"text-gray-600",children:I.text_content}),I.file_name&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-blue-600",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:I.file_name}),e.jsxs("button",{className:"hover:underline flex items-center gap-1",children:[e.jsx(Ie,{className:"h-3 w-3"}),"Download"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{children:["Submitted: ",V(I.submitted_at)]})]}),I.grade!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600 font-medium",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs("span",{children:["Grade: ",I.grade,"/",t.max_points]})]})]}),I.feedback&&e.jsxs("div",{className:"mt-3 bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Feedback:"}),e.jsx("p",{className:"text-sm text-blue-800",children:I.feedback})]})]}),e.jsx("button",{onClick:()=>k(I),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:I.status==="graded"?e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4"}),"Edit Grade"]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-4 w-4"}),"Grade"]})})]})},I._id))]}),e.jsx(Sr,{isOpen:b,onClose:()=>{i(!1),g(null)},submission:n,maxPoints:t.max_points,onGradeSubmitted:U}),x&&e.jsx(os,{type:x.type,message:x.message,onClose:()=>j(null)})]})}return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Assignment Management"}),e.jsx("p",{className:"text-gray-600",children:"Create, review and grade student submissions"})]}),e.jsxs("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Create Assignment"]})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>C("assignments"),className:`px-4 py-3 font-medium transition-colors border-b-2 ${m==="assignments"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Assignments"]})}),e.jsx("button",{onClick:()=>C("analytics"),className:`px-4 py-3 font-medium transition-colors border-b-2 ${m==="analytics"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5"}),"Analytics"]})})]})}),m==="analytics"?e.jsx(kr,{}):e.jsxs("div",{className:"space-y-4",children:[s.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(X,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No assignments found"})]}):s.map(F=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:F.title}),!F.is_active&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:"Inactive"})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:F.description}),e.jsxs("p",{className:"text-sm text-blue-600 mb-3",children:["Course: ",F.course_title]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",V(F.due_date)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs("span",{children:[F.max_points," points"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:[F.submission_count," submissions"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>Y(F._id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"View Submissions"]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>p(w===F._id?null:F._id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ts,{className:"h-5 w-5"})}),w===F._id&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10",children:[e.jsxs("button",{onClick:()=>E(F),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Edit Assignment"]}),e.jsxs("button",{onClick:()=>{d(F._id),p(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Delete Assignment"]})]})]})]})]})},F._id)),e.jsx(wr,{isOpen:u,onClose:()=>{S(!1),f(null)},onSuccess:N,editingAssignment:y}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(ve,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Assignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Are you sure you want to delete this assignment? All student submissions will be preserved but the assignment will be marked as inactive."}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>A(h),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Delete Assignment"]})]})]})})]}),x&&e.jsx(os,{type:x.type,message:x.message,onClose:()=>j(null)})]})},Cr=()=>{const{courses:s}=Ge(),{user:r}=re(),[t,a]=l.useState("all"),[o,c]=l.useState(""),[n,g]=l.useState(null),[b,i]=l.useState(!1),[x,j]=l.useState(""),[u,S]=l.useState([]);if((r==null?void 0:r.role)==="teacher")return e.jsx(Fs,{});const y=[{id:"1",title:"Linear Regression Implementation",courseId:"1",courseName:"Introduction to Machine Learning",instructor:"Dr. Sarah Johnson",dueDate:"2024-02-15T23:59:00",status:"pending",description:"Implement a linear regression model using Python and scikit-learn",instructions:`
        <h3>Assignment Instructions:</h3>
        <p>In this assignment, you will implement a linear regression model from scratch and compare it with scikit-learn's implementation.</p>
        
        <h4>Requirements:</h4>
        <ul>
          <li>Implement linear regression using gradient descent</li>
          <li>Use the provided dataset (housing_prices.csv)</li>
          <li>Create visualizations showing the regression line</li>
          <li>Compare your implementation with scikit-learn</li>
          <li>Write a report explaining your findings</li>
        </ul>
        
        <h4>Deliverables:</h4>
        <ul>
          <li>Python notebook (.ipynb file)</li>
          <li>Written report (PDF format)</li>
          <li>Dataset analysis and visualizations</li>
        </ul>
        
        <h4>Grading Criteria:</h4>
        <ul>
          <li>Code implementation (40%)</li>
          <li>Accuracy of results (30%)</li>
          <li>Report quality (20%)</li>
          <li>Code documentation (10%)</li>
        </ul>
      `,maxPoints:100,submissionType:"both",attachments:["housing_prices.csv","assignment_template.ipynb"]},{id:"2",title:"Python Code Optimization",courseId:"2",courseName:"Advanced Python Programming",instructor:"Prof. Michael Chen",dueDate:"2024-02-12T23:59:00",status:"submitted",submittedAt:"2024-02-10T15:30:00",description:"Review and optimize the provided Python code for performance",instructions:`
        <h3>Code Optimization Challenge:</h3>
        <p>You are given a Python script that processes large datasets but runs slowly. Your task is to optimize it for better performance.</p>
        
        <h4>Tasks:</h4>
        <ul>
          <li>Profile the existing code to identify bottlenecks</li>
          <li>Implement optimizations using appropriate data structures</li>
          <li>Use vectorization where possible</li>
          <li>Document your optimization strategies</li>
        </ul>
      `,maxPoints:80,submissionType:"file",attachments:["slow_code.py","test_data.csv"]},{id:"3",title:"Data Visualization Dashboard",courseId:"3",courseName:"Data Science Fundamentals",instructor:"Dr. Emily Rodriguez",dueDate:"2024-02-18T23:59:00",status:"graded",grade:95,submittedAt:"2024-02-16T14:20:00",feedback:"Excellent work! Your dashboard is well-designed and provides clear insights. The interactive elements work perfectly. Minor suggestion: consider adding more color customization options.",description:"Create an interactive dashboard using matplotlib and plotly",instructions:`
        <h3>Dashboard Creation:</h3>
        <p>Build an interactive data visualization dashboard that tells a compelling story with data.</p>
        
        <h4>Requirements:</h4>
        <ul>
          <li>Use at least 3 different chart types</li>
          <li>Include interactive elements</li>
          <li>Provide clear insights and conclusions</li>
          <li>Make it responsive and user-friendly</li>
        </ul>
      `,maxPoints:120,submissionType:"both",attachments:["sample_data.csv"]}],f=y.filter(v=>v.title.toLowerCase().includes(o.toLowerCase())||v.courseName.toLowerCase().includes(o.toLowerCase())).filter(v=>t==="all"||v.status===t),h={all:y.length,pending:y.filter(v=>v.status==="pending").length,submitted:y.filter(v=>v.status==="submitted").length,graded:y.filter(v=>v.status==="graded").length},d=()=>{n&&(console.log("Submitting assignment:",{assignmentId:n.id,text:x,files:u}),j(""),S([]),i(!1),g(null),alert("Assignment submitted successfully!"))},w=v=>{const E=Array.from(v.target.files||[]);S(A=>[...A,...E])},p=v=>{S(E=>E.filter((A,N)=>N!==v))},m=v=>new Date(v).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),C=v=>{const E=new Date(v),A=new Date,N=E.getTime()-A.getTime();return Math.ceil(N/(1e3*60*60*24))},L=v=>{switch(v){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"submitted":return"bg-blue-100 text-blue-800 border-blue-200";case"graded":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Assignments"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage your coursework"})]}),(r==null?void 0:r.role)==="instructor"&&e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Create Assignment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(X,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.all})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(oe,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pending"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.pending})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(be,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Submitted"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.submitted})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Graded"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.graded})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search assignments...",value:o,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:t,onChange:v=>a(v.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"graded",children:"Graded"})]})]})]})}),e.jsx("div",{className:"space-y-6",children:f.length>0?f.map(v=>{const E=C(v.dueDate),A=E<0,N=E<=3&&E>=0;return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:v.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${L(v.status)}`,children:v.status.charAt(0).toUpperCase()+v.status.slice(1)}),A&&v.status==="pending"&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 border border-red-200",children:"Overdue"}),N&&v.status==="pending"&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 border border-orange-200",children:"Due Soon"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:v.courseName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{children:v.instructor})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",m(v.dueDate)]})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:v.description}),v.status==="graded"&&v.grade&&e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"font-semibold text-green-900",children:["Grade: ",v.grade,"/",v.maxPoints]})]})}),v.feedback&&e.jsx("div",{className:"flex-1 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Feedback:"})," ",v.feedback]})})]}),v.submittedAt&&e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("span",{className:"font-medium",children:"Submitted:"})," ",m(v.submittedAt)]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>g(v),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(ue,{className:"h-4 w-4"}),"View Details"]}),v.attachments&&v.attachments.length>0&&e.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-gray-700",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Download Files (",v.attachments.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[v.status==="pending"&&e.jsxs("button",{onClick:()=>{g(v),i(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Submit Assignment"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[v.maxPoints," points"]}),E>=0?e.jsx("div",{className:"text-xs text-gray-500",children:E===0?"Due today":`${E} days left`}):e.jsxs("div",{className:"text-xs text-red-500",children:[Math.abs(E)," days overdue"]})]})]})]})]},v.id)}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:[e.jsx(X,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})}),n&&!b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n.title}),e.jsx("p",{className:"text-gray-600",children:n.courseName})]}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(he,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:n.instructions}})}),n.attachments&&n.attachments.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Assignment Files:"}),e.jsx("div",{className:"space-y-2",children:n.attachments.map((v,E)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(X,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:v}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Download"})]},E))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Assignment Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Due Date:"}),e.jsx("span",{className:"font-medium",children:m(n.dueDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Points:"}),e.jsx("span",{className:"font-medium",children:n.maxPoints})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L(n.status)}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submission Type:"}),e.jsx("span",{className:"font-medium capitalize",children:n.submissionType})]})]})]}),n.status==="graded"&&n.grade&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Grade Received"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:[n.grade,"/",n.maxPoints]}),n.feedback&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Feedback:"}),e.jsx("p",{className:"text-sm text-green-800",children:n.feedback})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[n.status==="pending"&&e.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(ke,{className:"h-5 w-5"}),"Submit Assignment"]}),e.jsx("button",{onClick:()=>g(null),className:"bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Close"})]})]})]})})]})}),b&&n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Submit Assignment"}),e.jsx("button",{onClick:()=>{i(!1),j(""),S([])},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(he,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:n.title}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Due: ",m(n.dueDate)]})]}),(n.submissionType==="text"||n.submissionType==="both")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Written Submission"}),e.jsx("textarea",{value:x,onChange:v=>j(v.target.value),placeholder:"Enter your written response here...",rows:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),(n.submissionType==="file"||n.submissionType==="both")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Upload"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx(ke,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Drag and drop files here, or click to browse"}),e.jsx("input",{type:"file",multiple:!0,onChange:w,className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer inline-block",children:"Choose Files"})]}),u.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:u.map((v,E)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(v.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx("button",{onClick:()=>p(E),className:"text-red-600 hover:text-red-700",children:e.jsx(he,{className:"h-4 w-4"})})]},E))})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Before submitting:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Review your work carefully"}),e.jsx("li",{children:"Ensure all required files are attached"}),e.jsx("li",{children:"Check that your submission meets all requirements"}),e.jsx("li",{children:"You can resubmit before the deadline if needed"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{i(!1),j(""),S([])},className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:d,disabled:!x.trim()&&u.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Submit Assignment"]})]})]})})]})},Ar=()=>{const[s,r]=l.useState(""),[t,a]=l.useState("all"),[o,c]=l.useState(!1),[n,g]=l.useState({title:"",content:"",course:"",tags:[]}),[b,i]=l.useState([{id:"1",title:"Understanding Gradient Descent Algorithm",author:"Alex Chen",course:"Machine Learning Fundamentals",lastReply:"2 hours ago",replies:12,likes:8,isResolved:!1,tags:["machine-learning","algorithms","math"]},{id:"2",title:"Best Practices for Data Preprocessing",author:"Sarah Kim",course:"Data Science Fundamentals",lastReply:"5 hours ago",replies:7,likes:15,isResolved:!0,tags:["data-science","preprocessing","python"]},{id:"3",title:"Python Virtual Environments Setup Help",author:"Mike Johnson",course:"Advanced Python Programming",lastReply:"1 day ago",replies:23,likes:31,isResolved:!0,tags:["python","environment","setup"]}]),x=["Machine Learning Fundamentals","Data Science Fundamentals","Advanced Python Programming","Web Development Basics","Database Design"],j=["machine-learning","python","data-science","algorithms","setup","web-dev","database"],u=()=>{c(!0)},S=()=>{if(!n.title.trim()||!n.content.trim()||!n.course){alert("Please fill in all required fields");return}const d={id:Date.now().toString(),title:n.title,author:"You",course:n.course,lastReply:"Just now",replies:0,likes:0,isResolved:!1,tags:n.tags};i([d,...b]),g({title:"",content:"",course:"",tags:[]}),c(!1)},y=d=>{g(w=>({...w,tags:w.tags.includes(d)?w.tags.filter(p=>p!==d):[...w.tags,d]}))},f=["all","machine-learning","python","data-science","algorithms","setup"],h=b.filter(d=>d.title.toLowerCase().includes(s.toLowerCase())||d.course.toLowerCase().includes(s.toLowerCase())).filter(d=>t==="all"||d.tags.includes(t));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Discussions"}),e.jsx("p",{className:"text-gray-600",children:"Engage with your peers and instructors"})]}),e.jsxs("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(pe,{className:"h-5 w-5"}),"Start Discussion"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search discussions...",value:s,onChange:d=>r(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-gray-400"}),e.jsx("select",{value:t,onChange:d=>a(d.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:f.map(d=>e.jsx("option",{value:d,children:d==="all"?"All Topics":d},d))})]})]})}),e.jsx("div",{className:"space-y-4",children:h.map(d=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-sm transition-shadow duration-200",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-blue-600 cursor-pointer",children:d.title}),d.isResolved&&e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:"Resolved"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["in ",d.course]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map(w=>e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:["#",w]},w))})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsxs("span",{children:["by ",d.author]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:d.lastReply})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-1 text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(kt,{className:"h-4 w-4"}),e.jsx("span",{children:d.likes})]}),e.jsxs("button",{className:"flex items-center gap-1 text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsx("span",{children:d.replies})]})]})]})]},d.id))}),h.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:[e.jsx(ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No discussions found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or start a new discussion"})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Start New Discussion"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(he,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discussion Title *"}),e.jsx("input",{type:"text",value:n.title,onChange:d=>g(w=>({...w,title:d.target.value})),placeholder:"What would you like to discuss?",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course *"}),e.jsxs("select",{value:n.course,onChange:d=>g(w=>({...w,course:d.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select a course"}),x.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:n.content,onChange:d=>g(w=>({...w,content:d.target.value})),placeholder:"Describe your question or topic in detail...",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(d=>e.jsxs("button",{type:"button",onClick:()=>y(d),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${n.tags.includes(d)?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"}`,children:[e.jsx(At,{className:"h-3 w-3 inline mr-1"}),d]},d))})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:S,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Start Discussion"]})]})]})})]})},_r=()=>{const{user:s}=re(),r={weeklyProgress:[{day:"Mon",hours:2.5,completed:3},{day:"Tue",hours:3.2,completed:4},{day:"Wed",hours:1.8,completed:2},{day:"Thu",hours:4.1,completed:5},{day:"Fri",hours:2.9,completed:3},{day:"Sat",hours:3.5,completed:4},{day:"Sun",hours:2.1,completed:2}],subjectPerformance:[{subject:"Machine Learning",progress:85,grade:"A-"},{subject:"Python Programming",progress:72,grade:"B+"},{subject:"Data Science",progress:94,grade:"A"},{subject:"Statistics",progress:68,grade:"B"}]};return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Learning Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Track your progress and performance insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Study Time"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"124.5h"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"+12.3h this week"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(is,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"87%"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"+5% improvement"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(ie,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Grade"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"A-"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"Maintained"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(me,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Learning Streak"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"15 days"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"Personal best!"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ze,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weekly Study Hours"})]}),e.jsx("div",{className:"space-y-4",children:r.weeklyProgress.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 w-8",children:t.day}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${t.hours/5*100}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[t.hours,"h"]})]},a))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(_t,{className:"h-6 w-6 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Subject Performance"})]}),e.jsx("div",{className:"space-y-4",children:r.subjectPerformance.map((t,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.subject}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:t.grade})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${t.progress}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[t.progress,"%"]})]})]},a))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Learning Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(be,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Most Active Day"})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:"Thursday"}),e.jsx("p",{className:"text-sm text-gray-600",children:"4.1 hours average"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ae,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Preferred Subject"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:"Data Science"}),e.jsx("p",{className:"text-sm text-gray-600",children:"94% completion rate"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(me,{className:"h-5 w-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Improvement Rate"})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:"+15%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"vs last month"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-2 rounded-lg",children:e.jsx(me,{className:"h-5 w-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI-Powered Insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Study Pattern Analysis"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You perform best during afternoon sessions (2-4 PM). Consider scheduling difficult topics during this time."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Improvement Suggestion"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your Python scores could improve by 12% with more hands-on practice. Try coding exercises daily."})]})]})]})]})},Pr=()=>{const[s,r]=l.useState([]),[t,a]=l.useState(""),[o,c]=l.useState(!1),[n,g]=l.useState("general"),b=l.useRef(null),i=[{icon:fs,text:"Explain a topic",action:"Explain the concept of ",mode:"explain"},{icon:X,text:"Summarize notes",action:"Summarize this: ",mode:"summarize"},{icon:Ws,text:"Ask a question",action:"I have a question about ",mode:"qa"},{icon:ae,text:"Study tips",action:"Give me study tips for ",mode:"general"},{icon:Oe,text:"Course help",action:"Help me with my course on ",mode:"general"}];l.useEffect(()=>{(async()=>{try{const S=await Xe.getWelcomeMessage();r([{id:"1",content:S.message,sender:"ai",timestamp:new Date,type:"welcome"}])}catch(S){console.error("Failed to load welcome message:",S),r([{id:"1",content:`##  Hello! Welcome to Your AI Study Assistant!

I'm here to help you succeed in your learning journey!

###  My Capabilities:

** Explain Topics** - Ask me to explain any concept in simple terms

** Summarize Content** - I can summarize long notes or PDFs

** Answer Questions** - Ask me anything about your course materials

** Study Help** - Need help understanding concepts? I'll guide you through them

** Study Tips** - Get personalized study strategies

**How can I help you today?** `,sender:"ai",timestamp:new Date,type:"welcome"}])}})()},[]),l.useEffect(()=>{var u;(u=b.current)==null||u.scrollIntoView({behavior:"smooth"})},[s,o]);const x=async()=>{if(!t.trim())return;const u={id:Date.now().toString(),content:t,sender:"user",timestamp:new Date,type:n};r(y=>[...y,u]);const S=t;a(""),c(!0);try{const y=await Xe.chat(S),f={id:(Date.now()+1).toString(),content:y.response,sender:"ai",timestamp:new Date,type:y.type||n};r(h=>[...h,f])}catch(y){console.error("Failed to get AI response:",y);const f={id:(Date.now()+1).toString(),content:`##  Oops! Something went wrong.

I'm having trouble connecting right now. Please try again in a moment.

In the meantime, you can:
- Check your course materials
- Review your notes
- Ask your instructor for help

I'll be back soon! `,sender:"ai",timestamp:new Date,type:"error"};r(h=>[...h,f])}finally{c(!1)}},j=(u,S)=>{a(u),g(S)};return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI Learning Assistant"}),e.jsx("p",{className:"text-gray-600",children:"Your personal AI tutor for explanations, summaries, Q&A, and study help"})]}),e.jsxs("div",{className:"mb-4 flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>g("general"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="general"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" General Chat"}),e.jsx("button",{onClick:()=>g("explain"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="explain"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Explain Topic"}),e.jsx("button",{onClick:()=>g("summarize"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="summarize"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Summarize"}),e.jsx("button",{onClick:()=>g("qa"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="qa"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Q&A"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 h-[650px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg",children:e.jsx(Ne,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"AI Study Assistant"}),e.jsx("p",{className:"text-sm text-green-600",children:" Online & Ready to Help"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Mode: ",e.jsx("span",{className:"font-medium",children:n==="general"?"General Chat":n==="explain"?"Explain Topic":n==="summarize"?"Summarize":"Q&A"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map(u=>e.jsxs("div",{className:`flex gap-3 ${u.sender==="user"?"justify-end":"justify-start"}`,children:[u.sender==="ai"&&e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0",children:e.jsx(Rs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:`max-w-2xl px-4 py-3 rounded-lg ${u.sender==="user"?"bg-blue-600 text-white":"bg-gray-50 text-gray-900 border border-gray-200"}`,children:[u.sender==="ai"?e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx(As,{content:u.content})}):e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:u.content}),e.jsx("p",{className:`text-xs mt-2 ${u.sender==="user"?"text-blue-100":"text-gray-500"}`,children:u.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.sender==="user"&&e.jsx("div",{className:"bg-blue-600 p-2 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0",children:e.jsx(Ce,{className:"h-5 w-5 text-white"})})]},u.id)),o&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0",children:e.jsx(Rs,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 px-4 py-3 rounded-lg",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AI is thinking..."})]})]}),e.jsx("div",{ref:b})]}),s.length<=1&&e.jsxs("div",{className:"px-4 pb-4 border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:" Quick Actions:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:i.map((u,S)=>e.jsxs("button",{onClick:()=>j(u.action,u.mode),className:"flex items-center gap-2 p-3 text-left bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-blue-50 hover:to-purple-50 transition-all border border-gray-200 hover:border-blue-300",children:[e.jsx(u.icon,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:u.text})]},S))})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:t,onChange:u=>a(u.target.value),onKeyPress:u=>u.key==="Enter"&&!u.shiftKey&&x(),placeholder:n==="explain"?"Enter a topic to explain...":n==="summarize"?"Paste content to summarize...":n==="qa"?"Ask your question...":"Ask me anything about your learning...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsxs("button",{onClick:x,disabled:!t.trim()||o,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Tip: Press Enter to send, Shift+Enter for new line"})]})]})]})})},Tr=()=>{var w,p;const{user:s,refreshUser:r}=re(),[t,a]=l.useState(!1),[o,c]=l.useState((s==null?void 0:s.profile_pic)||""),[n,g]=l.useState(!1),[b,i]=l.useState(!1),[x,j]=l.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",department:(s==null?void 0:s.department)||"",year:(s==null?void 0:s.year)||"",semester:(s==null?void 0:s.semester)||"",roll_number:(s==null?void 0:s.roll_number)||"",designation:(s==null?void 0:s.designation)||"",location:"New York, NY",bio:"Passionate learner focused on AI and Machine Learning. Always eager to explore new technologies and share knowledge with the community.",website:"https://johndoe.dev",linkedin:"https://linkedin.com/in/johndoe",github:"https://github.com/johndoe"}),u=async()=>{i(!0);try{const{authAPI:m}=await nt(async()=>{const{authAPI:L}=await Promise.resolve().then(()=>rt);return{authAPI:L}},void 0),C={name:x.name,phone:x.phone,profile_pic:o};(s==null?void 0:s.role)==="student"?(C.department=x.department,C.year=x.year,C.semester=x.semester):(s==null?void 0:s.role)==="teacher"&&(C.department=x.department,C.designation=x.designation),await m.updateProfile(C),await r(),a(!1),alert("Profile updated successfully!")}catch(m){console.error("Error updating profile:",m),alert(`Failed to update profile: ${m.message||"Please try again."}`)}finally{i(!1)}},S=()=>{j({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",department:(s==null?void 0:s.department)||"",year:(s==null?void 0:s.year)||"",semester:(s==null?void 0:s.semester)||"",roll_number:(s==null?void 0:s.roll_number)||"",designation:(s==null?void 0:s.designation)||"",location:"New York, NY",bio:"Passionate learner focused on AI and Machine Learning. Always eager to explore new technologies and share knowledge with the community.",website:"https://johndoe.dev",linkedin:"https://linkedin.com/in/johndoe",github:"https://github.com/johndoe"}),c((s==null?void 0:s.profile_pic)||""),a(!1)},y=m=>{var L;const C=(L=m.target.files)==null?void 0:L[0];if(C){if(C.size>5*1024*1024){alert("File size must be less than 5MB");return}if(!C.type.startsWith("image/")){alert("Please select an image file");return}g(!0);const v=new FileReader;v.onload=E=>{var N;const A=(N=E.target)==null?void 0:N.result;c(A),g(!1)},v.onerror=()=>{alert("Failed to read file"),g(!1)},v.readAsDataURL(C)}},f=()=>{c("")},h=[{label:"Courses Completed",value:"12",icon:ae,color:"text-blue-600"},{label:"Study Hours",value:"156",icon:oe,color:"text-green-600"},{label:"Certificates",value:"8",icon:ie,color:"text-purple-600"},{label:"Streak Days",value:"23",icon:me,color:"text-orange-600"}],d=[{title:"First Course Completed",description:"Completed your first course",date:"2024-01-15",icon:""},{title:"Week Streak",description:"Studied for 7 consecutive days",date:"2024-01-20",icon:""},{title:"Assignment Master",description:"Scored 100% on 5 assignments",date:"2024-01-25",icon:""},{title:"AI Enthusiast",description:"Completed 3 AI courses",date:"2024-02-01",icon:""}];return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[o?e.jsx("img",{src:o,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white/20"}):e.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full flex items-center justify-center text-4xl font-bold",children:(w=s==null?void 0:s.name)==null?void 0:w.charAt(0).toUpperCase()}),e.jsxs("div",{className:"absolute bottom-0 right-0",children:[e.jsx("input",{type:"file",id:"profile-pic-upload",accept:"image/*",onChange:y,className:"hidden"}),e.jsx("label",{htmlFor:"profile-pic-upload",className:"bg-white text-gray-600 p-2 rounded-full shadow-lg hover:bg-gray-50 transition-colors cursor-pointer flex items-center justify-center",children:n?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):e.jsx(ks,{className:"h-4 w-4"})})]}),o&&e.jsx("button",{onClick:f,className:"absolute top-0 right-0 bg-red-500 text-white p-1 rounded-full shadow-lg hover:bg-red-600 transition-colors",title:"Remove profile picture",children:e.jsx(he,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-blue-100 mb-4 capitalize",children:s==null?void 0:s.role}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsx("span",{children:"Joined January 2024"})]})]})]}),e.jsxs("button",{onClick:()=>a(!t),className:"bg-white/20 hover:bg-white/30 px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Pt,{className:"h-4 w-4"}),"Edit Profile"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[t&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative",children:o?e.jsx("img",{src:o,alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover border-2 border-gray-200"}):e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center text-2xl font-bold text-gray-500",children:(p=s==null?void 0:s.name)==null?void 0:p.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{htmlFor:"profile-pic-edit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4"}),o?"Change Picture":"Upload Picture"]}),o&&e.jsxs("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Remove"]})]}),e.jsx("input",{type:"file",id:"profile-pic-edit",accept:"image/*",onChange:y,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Upload a square image (recommended: 400x400px). Max file size: 5MB."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Personal Information"}),t&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:u,disabled:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[b?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(ys,{className:"h-4 w-4"}),b?"Saving...":"Save Changes"]}),e.jsxs("button",{onClick:S,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4"}),"Cancel"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),t?e.jsx("input",{type:"text",value:x.name,onChange:m=>j({...x,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:x.name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:x.email}),e.jsx("p",{className:"text-xs text-gray-500",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),t?e.jsx("input",{type:"tel",value:x.phone,onChange:m=>j({...x,phone:m.target.value}),placeholder:"Enter your phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:x.phone||"Not provided"})]}),(s==null?void 0:s.role)==="student"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roll Number"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.roll_number)||x.roll_number||"Not provided"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Roll number cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),t?e.jsx("input",{type:"text",value:x.department,onChange:m=>j({...x,department:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:x.department||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),t?e.jsxs("select",{value:x.year,onChange:m=>j({...x,year:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Year"}),e.jsx("option",{value:"1st Year",children:"1st Year"}),e.jsx("option",{value:"2nd Year",children:"2nd Year"}),e.jsx("option",{value:"3rd Year",children:"3rd Year"}),e.jsx("option",{value:"4th Year",children:"4th Year"}),e.jsx("option",{value:"Final Year",children:"Final Year"})]}):e.jsx("p",{className:"text-gray-900",children:x.year||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),t?e.jsxs("select",{value:x.semester,onChange:m=>j({...x,semester:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Semester"}),e.jsx("option",{value:"1st Semester",children:"1st Semester"}),e.jsx("option",{value:"2nd Semester",children:"2nd Semester"}),e.jsx("option",{value:"3rd Semester",children:"3rd Semester"}),e.jsx("option",{value:"4th Semester",children:"4th Semester"}),e.jsx("option",{value:"5th Semester",children:"5th Semester"}),e.jsx("option",{value:"6th Semester",children:"6th Semester"}),e.jsx("option",{value:"7th Semester",children:"7th Semester"}),e.jsx("option",{value:"8th Semester",children:"8th Semester"})]}):e.jsx("p",{className:"text-gray-900",children:x.semester||"Not provided"})]})]}),(s==null?void 0:s.role)==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.employee_id)||"Not provided"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Employee ID cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),t?e.jsx("input",{type:"text",value:x.department,onChange:m=>j({...x,department:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:x.department||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),t?e.jsxs("select",{value:(s==null?void 0:s.designation)||"",onChange:m=>j({...x,designation:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Designation"}),e.jsx("option",{value:"Assistant Professor",children:"Assistant Professor"}),e.jsx("option",{value:"Associate Professor",children:"Associate Professor"}),e.jsx("option",{value:"Professor",children:"Professor"}),e.jsx("option",{value:"Lecturer",children:"Lecturer"}),e.jsx("option",{value:"Senior Lecturer",children:"Senior Lecturer"}),e.jsx("option",{value:"Visiting Faculty",children:"Visiting Faculty"}),e.jsx("option",{value:"Guest Lecturer",children:"Guest Lecturer"}),e.jsx("option",{value:"Department Head",children:"Department Head"})]}):e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.designation)||"Not provided"})]})]}),(s==null?void 0:s.role)==="super_admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.employee_id)||"Not provided"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Employee ID cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:x.department||"System Administration"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.designation)||"Super Administrator"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),t?e.jsx("textarea",{value:x.bio,onChange:m=>j({...x,bio:m.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:x.bio})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),t?e.jsx("input",{type:"url",value:x.website,onChange:m=>j({...x,website:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("a",{href:x.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:x.website})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn"}),t?e.jsx("input",{type:"url",value:x.linkedin,onChange:m=>j({...x,linkedin:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("a",{href:x.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:"LinkedIn Profile"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub"}),t?e.jsx("input",{type:"url",value:x.github,onChange:m=>j({...x,github:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("a",{href:x.github,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:"GitHub Profile"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Achievements"}),e.jsx("div",{className:"space-y-4",children:d.map((m,C)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:m.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:m.title}),e.jsx("p",{className:"text-sm text-gray-600",children:m.description})]}),e.jsx("div",{className:"text-sm text-gray-500",children:m.date})]},C))})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Learning Stats"}),e.jsx("div",{className:"space-y-4",children:h.map((m,C)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gray-100 ${m.color}`,children:e.jsx(m.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:m.label}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:m.value})]})]},C))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enabled"})]})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Manage"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last changed 30 days ago"})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Change"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900",children:'Completed "Machine Learning Basics"'}),e.jsx("p",{className:"text-gray-500",children:"2 hours ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900",children:"Submitted assignment for Python Course"}),e.jsx("p",{className:"text-gray-500",children:"1 day ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900",children:'Earned "Assignment Master" badge'}),e.jsx("p",{className:"text-gray-500",children:"3 days ago"})]})]})]})]})]})]})},Er=()=>{const[s,r]=l.useState("profile"),[t,a]=l.useState("system"),[o,c]=l.useState("en"),[n,g]=l.useState(!1),[b,i]=l.useState(!1),[x,j]=l.useState(!1),[u,S]=l.useState({email:{courseUpdates:!0,assignments:!0,grades:!0,announcements:!0,reminders:!1},push:{courseUpdates:!1,assignments:!0,grades:!0,announcements:!1,reminders:!0}}),[y,f]=l.useState({profileVisibility:"public",showProgress:!0,showAchievements:!0,allowMessages:!0,showOnlineStatus:!1}),h=[{id:"profile",label:"Profile",icon:Ce},{id:"notifications",label:"Notifications",icon:Be},{id:"privacy",label:"Privacy & Security",icon:Me},{id:"appearance",label:"Appearance",icon:Tt},{id:"language",label:"Language & Region",icon:Et},{id:"data",label:"Data & Storage",icon:Ie}],d=(N,Y,k)=>{S(U=>({...U,[N]:{...U[N],[Y]:k}}))},w=(N,Y)=>{f(k=>({...k,[N]:Y}))},p=()=>{var Y;const{user:N}=re();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",defaultValue:(N==null?void 0:N.name)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",defaultValue:(N==null?void 0:N.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",defaultValue:(N==null?void 0:N.phone)||"",placeholder:"Enter your phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:((Y=N==null?void 0:N.role)==null?void 0:Y.replace("_"," ").toUpperCase())||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed capitalize"})]}),(N==null?void 0:N.role)==="student"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roll Number"}),e.jsx("input",{type:"text",value:(N==null?void 0:N.roll_number)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Roll number cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",defaultValue:(N==null?void 0:N.department)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsxs("select",{defaultValue:(N==null?void 0:N.year)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Year"}),e.jsx("option",{value:"1st Year",children:"1st Year"}),e.jsx("option",{value:"2nd Year",children:"2nd Year"}),e.jsx("option",{value:"3rd Year",children:"3rd Year"}),e.jsx("option",{value:"4th Year",children:"4th Year"}),e.jsx("option",{value:"Final Year",children:"Final Year"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),e.jsxs("select",{defaultValue:(N==null?void 0:N.semester)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Semester"}),e.jsx("option",{value:"1st Semester",children:"1st Semester"}),e.jsx("option",{value:"2nd Semester",children:"2nd Semester"}),e.jsx("option",{value:"3rd Semester",children:"3rd Semester"}),e.jsx("option",{value:"4th Semester",children:"4th Semester"}),e.jsx("option",{value:"5th Semester",children:"5th Semester"}),e.jsx("option",{value:"6th Semester",children:"6th Semester"}),e.jsx("option",{value:"7th Semester",children:"7th Semester"}),e.jsx("option",{value:"8th Semester",children:"8th Semester"})]})]})]}),(N==null?void 0:N.role)==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("input",{type:"text",value:(N==null?void 0:N.employee_id)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Employee ID cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",defaultValue:(N==null?void 0:N.department)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),e.jsxs("select",{defaultValue:(N==null?void 0:N.designation)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Designation"}),e.jsx("option",{value:"Assistant Professor",children:"Assistant Professor"}),e.jsx("option",{value:"Associate Professor",children:"Associate Professor"}),e.jsx("option",{value:"Professor",children:"Professor"}),e.jsx("option",{value:"Lecturer",children:"Lecturer"}),e.jsx("option",{value:"Senior Lecturer",children:"Senior Lecturer"}),e.jsx("option",{value:"Visiting Faculty",children:"Visiting Faculty"}),e.jsx("option",{value:"Guest Lecturer",children:"Guest Lecturer"}),e.jsx("option",{value:"Department Head",children:"Department Head"})]})]})]}),(N==null?void 0:N.role)==="super_admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("input",{type:"text",value:(N==null?void 0:N.employee_id)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",value:(N==null?void 0:N.department)||"System Administration",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>g(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:b?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>i(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>j(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Update Password"})]})]})]})},m=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Notifications"}),e.jsx("div",{className:"space-y-4",children:Object.entries(u.email).map(([N,Y])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(We,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:N.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive email notifications for ",N.toLowerCase()]})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Y,onChange:k=>d("email",N,k.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},N))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Push Notifications"}),e.jsx("div",{className:"space-y-4",children:Object.entries(u.push).map(([N,Y])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:N.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive push notifications for ",N.toLowerCase()]})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Y,onChange:k=>d("push",N,k.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},N))})]})]}),C=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Privacy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Visibility"}),e.jsxs("select",{value:y.profileVisibility,onChange:N=>w("profileVisibility",N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"public",children:"Public - Anyone can see your profile"}),e.jsx("option",{value:"students",children:"Students Only - Only other students can see"}),e.jsx("option",{value:"private",children:"Private - Only you can see your profile"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Learning Progress"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow others to see your course progress"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.showProgress,onChange:N=>w("showProgress",N.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Achievements"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Display your badges and certificates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.showAchievements,onChange:N=>w("showAchievements",N.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Communication"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Allow Direct Messages"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Let other users send you messages"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.allowMessages,onChange:N=>w("allowMessages",N.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Online Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Let others see when you're online"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.showOnlineStatus,onChange:N=>w("showOnlineStatus",N.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]}),L=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Theme"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"light",label:"Light",icon:Dt},{id:"dark",label:"Dark",icon:Ft},{id:"system",label:"System",icon:$t}].map(N=>e.jsxs("button",{onClick:()=>a(N.id),className:`p-4 border-2 rounded-lg transition-colors ${t===N.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(N.icon,{className:"h-8 w-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"font-medium text-gray-900",children:N.label})]},N.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Display"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"Small"}),e.jsx("option",{children:"Medium"}),e.jsx("option",{children:"Large"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sidebar Position"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"Left"}),e.jsx("option",{children:"Right"})]})]})]})]})]}),v=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Language"}),e.jsxs("select",{value:o,onChange:N=>c(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Espaol"}),e.jsx("option",{value:"fr",children:"Franais"}),e.jsx("option",{value:"de",children:"Deutsch"}),e.jsx("option",{value:"zh",children:""}),e.jsx("option",{value:"ja",children:""})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Region"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"UTC-8 (Pacific Time)"}),e.jsx("option",{children:"UTC-5 (Eastern Time)"}),e.jsx("option",{children:"UTC+0 (GMT)"}),e.jsx("option",{children:"UTC+1 (Central European Time)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"MM/DD/YYYY"}),e.jsx("option",{children:"DD/MM/YYYY"}),e.jsx("option",{children:"YYYY-MM-DD"})]})]})]})]})]}),E=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Export"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Download Your Data"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Export all your learning data including courses, progress, and achievements."}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Request Data Export"]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Storage"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Cache & Offline Data"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Clear cached data to free up storage space."}),e.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Clear Cache"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 text-red-600",children:"Danger Zone"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsxs("button",{className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Delete Account"]})]})})]})]}),A=()=>{switch(s){case"profile":return p();case"notifications":return m();case"privacy":return C();case"appearance":return L();case"language":return v();case"data":return E();default:return p()}};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account preferences and settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("nav",{className:"space-y-1",children:h.map(N=>e.jsxs("button",{onClick:()=>r(N.id),className:`w-full flex items-center gap-3 px-3 py-2 text-left rounded-lg transition-colors ${s===N.id?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(N.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:N.label})]},N.id))})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:A()})})]})]})},Dr=()=>{const{user:s}=re(),[r,t]=l.useState("profile"),[a,o]=l.useState(!1),[c,n]=l.useState(!1),[g,b]=l.useState(!1),[i,x]=l.useState(!1),[j,u]=l.useState({name:(s==null?void 0:s.name)||"",phone:(s==null?void 0:s.phone)||"",department:(s==null?void 0:s.department)||"System Administration"}),[S,y]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[f,h]=l.useState({maintenanceMode:!1,allowRegistration:!0,maxFileSize:"10",sessionTimeout:"60",backupFrequency:"daily"}),d=[{id:"profile",label:"Profile",icon:Ce},{id:"security",label:"Security",icon:Me},{id:"system",label:"System",icon:gs}],w=async()=>{x(!0);try{console.log("Saving profile data:",j),await new Promise(A=>setTimeout(A,1e3)),alert("Profile updated successfully!")}catch(A){console.error("Error updating profile:",A),alert("Failed to update profile. Please try again.")}finally{x(!1)}},p=async()=>{if(S.newPassword!==S.confirmPassword){alert("New passwords do not match!");return}if(S.newPassword.length<6){alert("Password must be at least 6 characters long!");return}x(!0);try{console.log("Changing password"),await new Promise(A=>setTimeout(A,1e3)),alert("Password changed successfully!"),y({currentPassword:"",newPassword:"",confirmPassword:""})}catch(A){console.error("Error changing password:",A),alert("Failed to change password. Please try again.")}finally{x(!1)}},m=async()=>{x(!0);try{console.log("Saving system settings:",f),await new Promise(A=>setTimeout(A,1e3)),alert("System settings updated successfully!")}catch(A){console.error("Error updating system settings:",A),alert("Failed to update system settings. Please try again.")}finally{x(!1)}},C=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-yellow-500"}),"Super Admin Profile"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:j.name,onChange:A=>u(N=>({...N,name:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:(s==null?void 0:s.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:j.phone,onChange:A=>u(N=>({...N,phone:A.target.value})),placeholder:"Enter your phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",value:j.department,onChange:A=>u(N=>({...N,department:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:"Super Administrator",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("input",{type:"text",value:(s==null?void 0:s.employee_id)||"SA-001",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:w,disabled:i,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4"}),i?"Saving...":"Save Changes"]})})]})}),L=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:a?"text":"password",value:S.currentPassword,onChange:A=>y(N=>({...N,currentPassword:A.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:S.newPassword,onChange:A=>y(N=>({...N,newPassword:A.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>n(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g?"text":"password",value:S.confirmPassword,onChange:A=>y(N=>({...N,confirmPassword:A.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>b(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g?e.jsx(Fe,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsxs("button",{onClick:p,disabled:i||!S.currentPassword||!S.newPassword||!S.confirmPassword,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),i?"Updating...":"Update Password"]})]})]})}),v=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enable maintenance mode to prevent user access during updates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.maintenanceMode,onChange:A=>h(N=>({...N,maintenanceMode:A.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Allow User Registration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow new users to register for accounts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.allowRegistration,onChange:A=>h(N=>({...N,allowRegistration:A.target.checked})),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"File Upload Settings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max File Size (MB)"}),e.jsxs("select",{value:f.maxFileSize,onChange:A=>h(N=>({...N,maxFileSize:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"5",children:"5 MB"}),e.jsx("option",{value:"10",children:"10 MB"}),e.jsx("option",{value:"25",children:"25 MB"}),e.jsx("option",{value:"50",children:"50 MB"}),e.jsx("option",{value:"100",children:"100 MB"})]})]})})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Session Settings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),e.jsxs("select",{value:f.sessionTimeout,onChange:A=>h(N=>({...N,sessionTimeout:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"30",children:"30 minutes"}),e.jsx("option",{value:"60",children:"1 hour"}),e.jsx("option",{value:"120",children:"2 hours"}),e.jsx("option",{value:"240",children:"4 hours"}),e.jsx("option",{value:"480",children:"8 hours"})]})]})})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Backup Settings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),e.jsxs("select",{value:f.backupFrequency,onChange:A=>h(N=>({...N,backupFrequency:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:m,disabled:i,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4"}),i?"Saving...":"Save System Settings"]})})]})]})}),E=()=>{switch(r){case"profile":return C();case"security":return L();case"system":return v();default:return C()}};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 p-2 rounded-lg",children:e.jsx(Ke,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin Settings"})]}),e.jsx("p",{className:"text-gray-600",children:"Manage your profile and system configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("nav",{className:"space-y-1",children:d.map(A=>e.jsxs("button",{onClick:()=>t(A.id),className:`w-full flex items-center gap-3 px-3 py-2 text-left rounded-lg transition-colors ${r===A.id?"bg-purple-50 text-purple-600 border-r-2 border-purple-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(A.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:A.label})]},A.id))})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:E()})})]})]})},Fr=()=>{const[s,r]=l.useState([]),[t,a]=l.useState(!0),[o,c]=l.useState("all"),[n,g]=l.useState(0),b=async()=>{a(!0);try{const y=await Ue.getAll(o==="unread");r(y.notifications||[]),g(y.unread_count||0)}catch(y){console.error("Failed to fetch notifications:",y)}finally{a(!1)}};l.useEffect(()=>{b()},[o]);const i=async y=>{try{await Ue.markAsRead(y),b()}catch(f){console.error("Failed to mark notification as read:",f)}},x=async()=>{try{await Ue.markAllAsRead(),b()}catch(y){console.error("Failed to mark all as read:",y)}},j=async y=>{try{await Ue.delete(y),b()}catch(f){console.error("Failed to delete notification:",f)}},u=y=>{switch(y){case"success":return"";case"warning":return"";case"error":return"";default:return""}},S=y=>{switch(y){case"success":return"border-green-200 bg-green-50";case"warning":return"border-yellow-200 bg-yellow-50";case"error":return"border-red-200 bg-red-50";default:return"border-blue-200 bg-blue-50"}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Be,{className:"h-6 w-6"}),"Notifications"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:n>0?`You have ${n} unread notification${n>1?"s":""}`:"All caught up!"})]}),n>0&&e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Lt,{className:"h-4 w-4"}),"Mark All as Read"]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>c("all"),className:`px-4 py-2 font-medium transition-colors ${o==="all"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"All"}),e.jsxs("button",{onClick:()=>c("unread"),className:`px-4 py-2 font-medium transition-colors ${o==="unread"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Unread ",n>0&&`(${n})`]})]})]}),t?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},y))}):s.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[e.jsx(Be,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-600",children:o==="unread"?"You're all caught up!":"You don't have any notifications yet."})]}):e.jsx("div",{className:"space-y-3",children:s.map(y=>e.jsx("div",{className:`border rounded-lg p-4 transition-all ${y.read?"bg-white border-gray-200":`${S(y.type)} border-l-4`}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:u(y.type)}),e.jsx("h3",{className:"font-semibold text-gray-900",children:y.title}),!y.read&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:"New"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:y.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsx("span",{children:new Date(y.created_at).toLocaleString()}),y.link&&e.jsx("a",{href:y.link,className:"text-blue-600 hover:text-blue-700 font-medium",onClick:()=>!y.read&&i(y._id),children:"View Details "})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!y.read&&e.jsx("button",{onClick:()=>i(y._id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Mark as read",children:e.jsx(ms,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(y._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete",children:e.jsx(Te,{className:"h-4 w-4"})})]})]})},y._id))})]})},$r=()=>{const[s,r]=l.useState("all"),[t,a]=l.useState(""),[o,c]=l.useState("all"),[n]=l.useState([{id:"1",title:"First Steps",description:"Complete your first course",icon:"",category:"learning",rarity:"common",points:10,unlockedAt:"2024-01-15T10:30:00Z",requirements:["Complete 1 course"]},{id:"2",title:"Assignment Master",description:"Score 100% on 5 assignments",icon:"",category:"performance",rarity:"rare",points:50,unlockedAt:"2024-01-25T14:20:00Z",requirements:["Score 100% on 5 assignments"]},{id:"3",title:"Week Warrior",description:"Study for 7 consecutive days",icon:"",category:"engagement",rarity:"rare",points:30,unlockedAt:"2024-01-20T09:15:00Z",requirements:["Study for 7 consecutive days"]},{id:"4",title:"AI Enthusiast",description:"Complete 3 AI-related courses",icon:"",category:"learning",rarity:"epic",points:100,unlockedAt:"2024-02-01T16:45:00Z",requirements:["Complete 3 AI courses"]},{id:"5",title:"Speed Learner",description:"Complete a course in under 2 weeks",icon:"",category:"performance",rarity:"rare",points:40,progress:{current:8,total:14},requirements:["Complete a course in under 14 days"]},{id:"6",title:"Social Butterfly",description:"Participate in 10 discussion threads",icon:"",category:"social",rarity:"common",points:20,progress:{current:6,total:10},requirements:["Participate in 10 discussions"]},{id:"7",title:"Perfect Score",description:"Get 100% on all assignments in a course",icon:"",category:"performance",rarity:"epic",points:75,progress:{current:4,total:5},requirements:["Score 100% on all assignments in one course"]},{id:"8",title:"Knowledge Seeker",description:"Complete 10 courses",icon:"",category:"learning",rarity:"legendary",points:200,progress:{current:3,total:10},requirements:["Complete 10 courses"]},{id:"9",title:"Early Bird",description:"Submit 5 assignments before the deadline",icon:"",category:"engagement",rarity:"common",points:15,unlockedAt:"2024-01-18T08:00:00Z",requirements:["Submit 5 assignments early"]},{id:"10",title:"Mentor",description:"Help 5 fellow students in discussions",icon:"",category:"social",rarity:"epic",points:80,progress:{current:2,total:5},requirements:["Help 5 students in discussions"]}]),g=h=>{switch(h){case"common":return"border-gray-300 bg-gray-50";case"rare":return"border-blue-300 bg-blue-50";case"epic":return"border-purple-300 bg-purple-50";case"legendary":return"border-yellow-300 bg-yellow-50";default:return"border-gray-300 bg-gray-50"}},b=h=>{switch(h){case"common":return"text-gray-700";case"rare":return"text-blue-700";case"epic":return"text-purple-700";case"legendary":return"text-yellow-700";default:return"text-gray-700"}},i=h=>{switch(h){case"learning":return ae;case"engagement":return oe;case"performance":return me;case"social":return ee;case"special":return Ke;default:return Qe}},x=n.filter(h=>s==="unlocked"?h.unlockedAt:s==="locked"?!h.unlockedAt:!0).filter(h=>o==="all"?!0:h.category===o).filter(h=>h.title.toLowerCase().includes(t.toLowerCase())||h.description.toLowerCase().includes(t.toLowerCase())),j=n.filter(h=>h.unlockedAt).reduce((h,d)=>h+d.points,0),u=n.filter(h=>h.unlockedAt).length,S=n.length,y=[{id:"all",label:"All Categories",icon:Qe},{id:"learning",label:"Learning",icon:ae},{id:"engagement",label:"Engagement",icon:oe},{id:"performance",label:"Performance",icon:me},{id:"social",label:"Social",icon:ee},{id:"special",label:"Special",icon:Ke}],f=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Achievements"}),e.jsx("p",{className:"text-gray-600",children:"Track your learning milestones and unlock rewards"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(Qe,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ie,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unlocked"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[u,"/",S]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Ns,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completion"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(u/S*100),"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(is,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rank"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"#12"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search achievements...",value:t,onChange:h=>a(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:s,onChange:h=>r(h.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Achievements"}),e.jsx("option",{value:"unlocked",children:"Unlocked"}),e.jsx("option",{value:"locked",children:"Locked"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:y.map(h=>e.jsxs("button",{onClick:()=>c(h.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${o===h.id?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(h.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:h.label})]},h.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(h=>{const d=i(h.category),w=!!h.unlockedAt;return e.jsxs("div",{className:`relative bg-white rounded-xl shadow-sm border-2 p-6 transition-all duration-200 hover:shadow-md ${w?g(h.rarity):"border-gray-200 bg-gray-50 opacity-75"}`,children:[e.jsx("div",{className:`absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-medium capitalize ${w?b(h.rarity):"text-gray-500"}`,children:h.rarity}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:`text-6xl mb-2 ${w?"":"grayscale"}`,children:h.icon}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(d,{className:`h-4 w-4 ${w?"text-gray-600":"text-gray-400"}`}),e.jsx("span",{className:`text-sm font-medium capitalize ${w?"text-gray-600":"text-gray-400"}`,children:h.category})]})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${w?"text-gray-900":"text-gray-500"}`,children:h.title}),e.jsx("p",{className:`text-sm ${w?"text-gray-600":"text-gray-400"}`,children:h.description})]}),!w&&h.progress&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[h.progress.current,"/",h.progress.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${h.progress.current/h.progress.total*100}%`}})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:`text-sm font-medium mb-2 ${w?"text-gray-700":"text-gray-500"}`,children:"Requirements:"}),e.jsx("ul",{className:"space-y-1",children:h.requirements.map((p,m)=>e.jsxs("li",{className:`text-xs flex items-center gap-2 ${w?"text-gray-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${w?"bg-green-500":"bg-gray-300"}`}),p]},m))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:`h-4 w-4 ${w?"text-yellow-500":"text-gray-400"}`}),e.jsxs("span",{className:`text-sm font-medium ${w?"text-gray-900":"text-gray-500"}`,children:[h.points," pts"]})]}),w?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:f(h.unlockedAt)})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Locked"})]})]}),w&&e.jsx("button",{className:"absolute top-3 left-3 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Ks,{className:"h-4 w-4"})})]},h.id)})}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No achievements found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})]})},Lr=()=>{const[s,r]=l.useState(""),[t,a]=l.useState("all"),[o,c]=l.useState([]),[n,g]=l.useState(!0),[b,i]=l.useState(null),[x,j]=l.useState(!1),u=async(f=!1)=>{try{f?j(!0):g(!0),i(null);const h=await _s.getAllStudents();c(h.map(d=>({...d,status:d.is_active?"active":"inactive",enrolledCourses:0,completedAssignments:0,averageGrade:0,totalPoints:0})))}catch(h){console.error("Failed to fetch students:",h),i("Failed to load students. Please try again.")}finally{g(!1),j(!1)}};l.useEffect(()=>{u()},[]);const S=()=>{u(!0)},y=o.filter(f=>t==="active"?f.status==="active":t==="inactive"?f.status==="inactive":!0).filter(f=>f.name.toLowerCase().includes(s.toLowerCase())||f.email.toLowerCase().includes(s.toLowerCase())||f.rollNo.toLowerCase().includes(s.toLowerCase()));return n?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(It,{className:"h-12 w-12 text-blue-600 mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Loading students..."})]})})}):b&&o.length===0?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx(Ee,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Students"}),e.jsx("p",{className:"text-red-700 mb-4",children:b}),e.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Students"}),e.jsx("p",{className:"text-gray-600",children:"Manage and track your students' progress"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:S,disabled:x,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx($e,{className:`h-4 w-4 ${x?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Export"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(ee,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(me,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.filter(f=>f.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(ze,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg. Grade"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(o.reduce((f,h)=>f+h.averageGrade,0)/o.length),"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(ie,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.reduce((f,h)=>f+h.totalPoints,0).toLocaleString()})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students...",value:s,onChange:f=>r(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:t,onChange:f=>a(f.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Students"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:y.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrolled"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white font-medium",children:f.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:f.name}),e.jsx("p",{className:"text-sm text-gray-500",children:f.email}),e.jsx("p",{className:"text-xs text-gray-400",children:f.roll_no})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-900",children:f.department})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 max-w-[100px]",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${f.progress}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[f.progress,"%"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(f.enrolled_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"View Details",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Send Message",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Send Email",children:e.jsx(We,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",title:"View Analytics",children:e.jsx(ze,{className:"h-4 w-4"})})]})})]},f.id))})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Students Found"}),e.jsx("p",{className:"text-gray-600",children:s||t!=="all"?"Try adjusting your search or filters":"No students are enrolled in your courses yet"})]})})]})},Mr=()=>{const[s,r]=l.useState(new Date),[t,a]=l.useState(null),[o,c]=l.useState(!1),[n,g]=l.useState(!1),[b,i]=l.useState({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""}),[x,j]=l.useState([{id:"1",title:"Machine Learning Lecture",description:"Introduction to Neural Networks",type:"class",startTime:"09:00",endTime:"10:30",date:"2024-02-12",location:"Room 101",courseName:"Machine Learning",color:"bg-blue-500"},{id:"2",title:"Office Hours",description:"Available for student questions",type:"office-hours",startTime:"14:00",endTime:"16:00",date:"2024-02-12",location:"Office 205",color:"bg-green-500"}]),u=p=>{const[m,C]=p.split(":"),L=parseInt(m),v=L>=12?"PM":"AM";return`${L%12||12}:${C} ${v}`},S=p=>{const m=[],C=new Date(p),L=C.getDay(),v=C.getDate()-L;C.setDate(v);for(let E=0;E<7;E++){const A=new Date(C);A.setDate(C.getDate()+E),m.push(A)}return m},y=p=>{const m=p.toISOString().split("T")[0];return x.filter(C=>C.date===m)},f=S(s),h=()=>{if(!b.title||!b.date||!b.startTime||!b.endTime){alert("Please fill in all required fields");return}const p={class:"bg-blue-500",meeting:"bg-purple-500",deadline:"bg-red-500",exam:"bg-orange-500","office-hours":"bg-green-500"},m={id:Date.now().toString(),title:b.title,description:b.description,type:b.type,startTime:b.startTime,endTime:b.endTime,date:b.date,location:b.location,courseName:b.courseName,color:p[b.type]};j(C=>[...C,m]),i({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""}),g(!1)},d=p=>{const m=new Date(s);m.setDate(s.getDate()+(p==="next"?7:-7)),r(m)},w=()=>{r(new Date)};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Schedule"}),e.jsx("p",{className:"text-gray-600",children:"Manage your classes and events"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add Event"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d("prev"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(us,{className:"h-5 w-5"})}),e.jsx("button",{onClick:w,className:"px-3 py-1 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg",children:"Today"}),e.jsx("button",{onClick:()=>d("next"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(hs,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(p=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:p},p)),f.map((p,m)=>{const C=y(p),L=p.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`min-h-[120px] p-2 border border-gray-100 ${L?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${L?"text-blue-600":"text-gray-900"}`,children:p.getDate()}),e.jsx("div",{className:"space-y-1",children:C.map(v=>e.jsxs("button",{onClick:()=>{a(v),c(!0)},className:`w-full text-left p-1 rounded text-xs text-white truncate ${v.color} hover:opacity-80`,children:[u(v.startTime)," ",v.title]},v.id))})]},m)})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Event"}),e.jsx("button",{onClick:()=>{g(!1),i({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""})},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(pe,{className:"h-6 w-6 rotate-45"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),e.jsx("input",{type:"text",value:b.title,onChange:p=>i(m=>({...m,title:p.target.value})),placeholder:"Enter event title",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Type *"}),e.jsxs("select",{value:b.type,onChange:p=>i(m=>({...m,type:p.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"class",children:"Class"}),e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"deadline",children:"Deadline"}),e.jsx("option",{value:"exam",children:"Exam"}),e.jsx("option",{value:"office-hours",children:"Office Hours"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:b.date,onChange:p=>i(m=>({...m,date:p.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),e.jsx("input",{type:"time",value:b.startTime,onChange:p=>i(m=>({...m,startTime:p.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),e.jsx("input",{type:"time",value:b.endTime,onChange:p=>i(m=>({...m,endTime:p.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Name"}),e.jsx("input",{type:"text",value:b.courseName,onChange:p=>i(m=>({...m,courseName:p.target.value})),placeholder:"e.g., Machine Learning",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:b.location,onChange:p=>i(m=>({...m,location:p.target.value})),placeholder:"e.g., Room 101 or Online",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:p=>i(m=>({...m,description:p.target.value})),placeholder:"Add event description or notes...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{g(!1),i({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""})},className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Add Event"]})]})]})}),o&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.title}),e.jsx("button",{onClick:()=>{c(!1),a(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(pe,{className:"h-6 w-6 rotate-45"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${t.color}`}),e.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:t.type})]}),t.courseName&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:t.courseName})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[u(t.startTime)," - ",u(t.endTime)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rt,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:t.location})]}),t.description&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-gray-700",children:t.description})})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{c(!1),a(null)},className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})})]})},ot=({videoId:s,title:r,onClose:t,onComplete:a,initialWatchTime:o=0,onProgressUpdate:c})=>{const n=l.useRef(null),[g,b]=l.useState(0),[i,x]=l.useState(0),[j,u]=l.useState(!1);l.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const S=()=>`http://localhost:5000/api/videos/stream/${s}`;return l.useEffect(()=>{if(n.current){const y=Pe();y&&(async()=>{try{const h=await fetch(S(),{headers:{Authorization:`Bearer ${y}`}});if(h.ok){const d=await h.blob(),w=URL.createObjectURL(d);n.current&&(n.current.src=w)}}catch(h){console.error("Failed to load video:",h)}})()}},[s]),l.useEffect(()=>{const y=n.current;if(!y)return;const f=async()=>{const m=Pe();if(!(!m||!i))try{await fetch(`http://localhost:5000/api/progress/video/${s}/watch-time`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({watch_time:g,total_duration:i})}),c&&c(g,i)}catch(C){console.error("Failed to update watch progress:",C)}},h=()=>{b(y.currentTime)},d=()=>{x(y.duration),o>0&&!j&&y.duration>0&&(y.currentTime=Math.min(o,y.duration-1),u(!0))},w=()=>{f(),a&&a()};y.addEventListener("timeupdate",h),y.addEventListener("loadedmetadata",d),y.addEventListener("ended",w);const p=setInterval(f,1e4);return()=>{y.removeEventListener("timeupdate",h),y.removeEventListener("loadedmetadata",d),y.removeEventListener("ended",w),clearInterval(p),f()}},[s,g,i,a]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:e.jsx("div",{className:"relative w-full max-w-5xl mx-4",children:e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(he,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"bg-black",children:e.jsx("video",{ref:n,controls:!0,autoPlay:!0,className:"w-full",style:{maxHeight:"70vh"},children:"Your browser does not support the video tag."})}),i>0&&e.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[e.jsxs("span",{children:["Progress: ",(g/i*100).toFixed(1),"%"]}),e.jsxs("span",{children:[Math.floor(g/60),":",String(Math.floor(g%60)).padStart(2,"0")," / ",Math.floor(i/60),":",String(Math.floor(i%60)).padStart(2,"0")]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${g/i*100}%`}})})]})]})})})},Ir=({courseId:s,courseTitle:r,onBack:t})=>{const[a,o]=l.useState([]),[c,n]=l.useState(!0),[g,b]=l.useState(null),[i,x]=l.useState(0),[j,u]=l.useState(0);l.useEffect(()=>{S()},[s]);const S=async()=>{try{const h=Pe();if(!h){b("Authentication required"),n(!1);return}const d=await fetch(`http://localhost:5000/api/progress/course/${s}/videos`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(d.ok){const w=await d.json();o(w.videos),x(w.total_videos),u(w.enrolled_students)}else{const w=await d.json();b(w.error||"Failed to fetch videos")}}catch(h){console.error("Error fetching videos:",h),b("Failed to load video statistics")}finally{n(!1)}},y=h=>{if(!h)return"N/A";const d=h/(1024*1024);return d>=1?`${d.toFixed(2)} MB`:`${(h/1024).toFixed(2)} KB`},f=h=>h?new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return c?e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading video statistics..."})]})}):g?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-red-600",children:g})})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[t&&e.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(ss,{className:"h-4 w-4"}),"Back to Course"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Course Videos"}),r&&e.jsx("p",{className:"text-gray-600",children:r})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(_e,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Videos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ee,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Enrolled Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(me,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Completion"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[a.length>0?Math.round(a.reduce((h,d)=>h+d.statistics.avg_completion_percentage,0)/a.length):0,"%"]})]})]})})]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx(_e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Videos Yet"}),e.jsx("p",{className:"text-gray-600",children:"Upload videos to your course to see statistics here."})]}):a.map(h=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:h.title}),h.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["Uploaded: ",f(h.uploaded_at)]}),e.jsxs("span",{children:["Size: ",y(h.file_size)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(es,{className:"h-5 w-5"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ie,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Views"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:h.statistics.total_views})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Watch Time"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:h.statistics.total_watch_time_formatted})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Avg Completion"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[h.statistics.avg_completion_percentage.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"View Rate"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[h.statistics.view_rate.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Average Student Progress"}),e.jsxs("span",{className:"text-xs font-medium text-gray-900",children:[h.statistics.avg_completion_percentage.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${h.statistics.avg_completion_percentage}%`}})})]})]},h.id))})]})},Rr=({courseId:s})=>{const{user:r}=re(),[t,a]=l.useState("overview"),[o,c]=l.useState(null),[n,g]=l.useState(null),[b,i]=l.useState(null),[x,j]=l.useState(!0),[u,S]=l.useState({show:!1,assignment:null}),[y,f]=l.useState(""),[h,d]=l.useState(null),[w,p]=l.useState(!1),[m,C]=l.useState(!1),[L,v]=l.useState(null),[E,A]=l.useState(null),[N,Y]=l.useState({}),[k,U]=l.useState({materials:{completed:0,total:0,percentage:0},videos:{completed:0,total:0,percentage:0},assignments:{completed:0,total:0,percentage:0},overall:0}),[V,R]=l.useState(!1),F=b||{id:"0",title:"Select a Course",description:"Please select a course from your courses list to view details.",instructor:"N/A",instructorAvatar:"",rating:0,students:0,duration:"N/A",level:"Beginner",category:"General",progress:0,thumbnail:"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",enrolled:!1,completedLessons:0,totalLessons:0,lastAccessed:new Date().toISOString(),skills:[],prerequisites:[]},I=(b==null?void 0:b.modules)||[],ne=(b==null?void 0:b.assignments)||[],we=async()=>{if(s){R(!0);try{const T=Pe();if(!T)return;const G=await fetch(`http://localhost:5000/api/progress/course/${s}`,{headers:{Authorization:`Bearer ${T}`,"Content-Type":"application/json"}});if(G.ok){const _=(await G.json()).progress;if(A(_),b){console.log(" Progress data from backend:",_),console.log(" Course modules:",b.modules),console.log(" Video progress state:",N);const M=ge(_,b.modules||[],b.assignments||[],N);console.log(" Calculated detailed progress:",M),U(M),i($=>{var Q;return{...$,progress:M.overall,completedLessons:((Q=_==null?void 0:_.materials)==null?void 0:Q.completed)||0}})}}}catch(T){console.error("Failed to refresh progress:",T)}finally{R(!1)}}},ge=(T,G,xe,_={})=>{var te,K,Le,$s;const M=((te=T==null?void 0:T.materials)==null?void 0:te.total)||0,$=((K=T==null?void 0:T.materials)==null?void 0:K.completed)||0,Q=M>0?$/M*100:0,Z=G.filter(Ye=>Ye.type==="video"),se=Z.length;let P=0;Z.forEach(Ye=>{if(Ye.completed)P++;else if(Ye.materials[0]){const ct=Ye.materials[0].id;(_[ct]||0)/600*100>=80&&P++}});const H=se>0?P/se*100:0,W=((Le=T==null?void 0:T.assignments)==null?void 0:Le.total)||xe.length||0,fe=(($s=T==null?void 0:T.assignments)==null?void 0:$s.submitted)||xe.filter(Ye=>Ye.status==="submitted"||Ye.status==="graded").length||0,je=W>0?fe/W*100:0;let ye=0,J=0;return M>0&&(ye+=Q*.4,J+=.4),se>0&&(ye+=H*.4,J+=.4),W>0&&(ye+=je*.2,J+=.2),J>0&&(ye=ye/J),{materials:{completed:$,total:M,percentage:Math.round(Q)},videos:{completed:P,total:se,percentage:Math.round(H)},assignments:{completed:fe,total:W,percentage:Math.round(je)},overall:Math.round(ye)}},Ve=async T=>{try{const G=Pe();if(!G)return;const xe={};for(const _ of T)try{const M=await fetch(`http://localhost:5000/api/progress/video/${_}/status`,{headers:{Authorization:`Bearer ${G}`,"Content-Type":"application/json"}});if(M.ok){const $=await M.json();$.watch_time&&(xe[_]=$.watch_time)}}catch(M){console.error(`Failed to fetch progress for video ${_}:`,M)}Y(xe)}catch(G){console.error("Failed to fetch video progress:",G)}};l.useEffect(()=>{(async()=>{var G,xe,_,M;try{const $=Pe();if(!$){j(!1);return}if(!s){const se=await fetch("http://localhost:5000/api/assignments/",{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}});if(se.ok){const H=(await se.json()).assignments.map(W=>{var fe,je,ye;return{id:W._id,title:W.title,description:W.description,dueDate:W.due_date,status:W.submission_status||"pending",maxPoints:W.max_points,grade:(fe=W.submission)==null?void 0:fe.grade,submittedAt:(je=W.submission)==null?void 0:je.submitted_at,feedback:(ye=W.submission)==null?void 0:ye.feedback}});i({...F,assignments:H})}j(!1);return}const[Q,Z]=await Promise.all([fetch(`http://localhost:5000/api/courses/${s}`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}}),fetch(`http://localhost:5000/api/progress/course/${s}`,{headers:{Authorization:`Bearer ${$}`,"Content-Type":"application/json"}})]);if(Q.ok){const P=(await Q.json()).course;let H=null;Z.ok&&(H=(await Z.json()).progress,A(H));const W=((G=H==null?void 0:H.materials)==null?void 0:G.completed_ids)||[],fe=((xe=P.materials)==null?void 0:xe.map((K,Le)=>({id:K._id,title:K.title,description:K.description||`Module ${Le+1}`,duration:K.duration||"10 min",completed:W.includes(K._id),type:K.type==="video"?"video":"reading",materials:[{id:K.content||K._id,title:K.title,type:K.type,url:K.content||K.file_path||K.url,size:K.file_size}]})))||[],je=((_=P.assignments)==null?void 0:_.map(K=>{var Le;return{id:K._id,title:K.title,description:K.description,dueDate:K.due_date,status:K.submission_status||"pending",maxPoints:K.max_points,grade:(Le=K.submission)==null?void 0:Le.grade}}))||[],ye={id:P._id,title:P.title,description:P.description,instructor:P.teacher_name||"Unknown",instructorAvatar:"",rating:4.5,students:0,duration:P.duration||"N/A",level:P.difficulty||"Beginner",category:P.category,progress:(H==null?void 0:H.overall_progress)||0,thumbnail:P.thumbnail||"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",enrolled:!0,completedLessons:((M=H==null?void 0:H.materials)==null?void 0:M.completed)||0,totalLessons:fe.length,lastAccessed:new Date().toISOString(),skills:P.learning_objectives||[],prerequisites:P.prerequisites||[],modules:fe,assignments:je};i(ye);const J=ge(H,fe,je);U(J),i(K=>({...K,progress:J.overall}));const te=fe.filter(K=>K.type==="video").map(K=>{var Le;return(Le=K.materials[0])==null?void 0:Le.id}).filter(Boolean);te.length>0&&await Ve(te)}else console.error("Failed to fetch course data"),i({...F,modules:[],assignments:[]})}catch($){console.error("Error fetching course data:",$),i({...F,modules:[],assignments:[]})}finally{j(!1)}})()},[s]),l.useEffect(()=>{if(b&&E){const T=ge(E,b.modules||[],b.assignments||[],N);console.log("Updated progress:",T),console.log("Video progress:",N),console.log("Course progress will be:",T.overall),U(T),i(G=>({...G,progress:T.overall}))}},[N,b==null?void 0:b.modules,b==null?void 0:b.assignments,E]);const D=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),q=T=>{switch(T){case"pending":return"text-yellow-600 bg-yellow-100";case"submitted":return"text-blue-600 bg-blue-100";case"graded":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},ce=async T=>{if(!y.trim()&&!h){v({type:"error",message:"Please provide either text content or upload a file"});return}const G=new Date(T.dueDate);if(new Date>G){v({type:"error",message:"Assignment deadline has passed"});return}if(h&&h.size>10*1024*1024){v({type:"error",message:"File size must be less than 10MB"});return}C(!0);try{const _=Pe();if(!_){alert("Please login to submit assignment");return}const M={text_content:y.trim()};h&&(M.file_name=h.name,M.file_path=`/uploads/${h.name}`);const $=await fetch(`http://localhost:5000/api/assignments/${T.id}/submit`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_}`},body:JSON.stringify(M)}),Q=await $.json();$.ok?(v({type:"success",message:"Assignment submitted successfully!"}),i(Z=>({...Z,assignments:Z.assignments.map(se=>se.id===T.id?{...se,status:"submitted",submittedAt:new Date().toISOString()}:se)})),await we(),f(""),d(null),S({show:!1,assignment:null})):v({type:"error",message:Q.error||"Failed to submit assignment"})}catch(_){console.error("Error submitting assignment:",_),v({type:"error",message:"Failed to submit assignment. Please try again."})}finally{C(!1)}},Ae=T=>{S({show:!0,assignment:T}),f(""),d(null)},Re=async T=>{try{const G=Pe();if(!G)return;(await fetch(`http://localhost:5000/api/progress/material/${T}/complete`,{method:"POST",headers:{Authorization:`Bearer ${G}`,"Content-Type":"application/json"}})).ok&&(i(_=>{var M;return{..._,modules:((M=_.modules)==null?void 0:M.map($=>$.id===T?{...$,completed:!0}:$))||[]}}),await we(),v({type:"success",message:"Material marked as complete!"}))}catch(G){console.error("Failed to mark material as complete:",G),v({type:"error",message:"Failed to mark material as complete"})}},qe=()=>e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(ae,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Overall Progress"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:[F.progress,"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(de,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Materials"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:[k.materials.completed,"/",k.materials.total]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-purple-100 rounded-lg",children:e.jsx(_e,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Videos"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:[k.videos.completed,"/",k.videos.total]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(X,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Assignments"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:[k.assignments.completed,"/",k.assignments.total]})]})]})})]}),(k.materials.total>0||k.videos.total>0||k.assignments.total>0)&&e.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-4 sm:p-6 transition-all ${V?"ring-2 ring-blue-200":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Progress Breakdown"}),V&&e.jsxs("span",{className:"text-xs text-blue-600 flex items-center gap-1",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-blue-600 border-t-transparent"}),"Updating..."]})]}),e.jsxs("div",{className:"space-y-4",children:[k.materials.total>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Materials"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[k.materials.completed,"/",k.materials.total," (",k.materials.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.materials.percentage}%`}})})]}),k.videos.total>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Videos"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[k.videos.completed,"/",k.videos.total," (",k.videos.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.videos.percentage}%`}})})]}),k.assignments.total>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Assignments"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[k.assignments.completed,"/",k.assignments.total," (",k.assignments.percentage,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.assignments.percentage}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:"About This Course"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 leading-relaxed mb-4 sm:mb-6",children:F.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2 sm:mb-3",children:"Skills You'll Learn"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:F.skills.map((T,G)=>e.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-blue-100 text-blue-700 rounded-full text-xs sm:text-sm",children:T},G))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2 sm:mb-3",children:"Prerequisites"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:F.prerequisites.map((T,G)=>e.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-gray-100 text-gray-700 rounded-full text-xs sm:text-sm",children:T},G))})]})]})]})]}),rs=()=>e.jsx("div",{className:"space-y-3 sm:space-y-4",children:I.map(T=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 flex-1",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${T.completed?"bg-green-100":"bg-gray-100"}`,children:T.completed?e.jsx(de,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}):e.jsx(Us,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:T.title}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:T.description}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:T.duration}),T.type==="video"&&T.materials[0]&&N[T.materials[0].id]>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"In Progress"}),e.jsxs("span",{children:[Math.floor(N[T.materials[0].id]/60),"m watched"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all",style:{width:"50%"}})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[T.completed?e.jsxs("button",{className:"bg-green-600 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm flex-1 sm:flex-initial justify-center",children:[e.jsx(de,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Completed"}),e.jsx("span",{className:"sm:hidden",children:"Done"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"bg-blue-600 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm flex-1 sm:flex-initial justify-center",children:[e.jsx(es,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Start"]}),e.jsx("button",{onClick:()=>Re(T.id),className:"bg-gray-600 text-white px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg hover:bg-gray-700 transition-colors text-xs sm:text-sm",title:"Mark as complete",children:""})]}),e.jsx("button",{onClick:()=>c(o===T.id?null:T.id),className:"p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ts,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]}),o===T.id&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Course Materials"}),e.jsx("div",{className:"space-y-3",children:T.materials.map(G=>e.jsx("div",{className:"bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[G.type==="video"&&e.jsx(_e,{className:"h-4 w-4 text-blue-600"}),G.type==="pdf"&&e.jsx(X,{className:"h-4 w-4 text-red-600"}),G.type==="link"&&e.jsx(Ot,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:G.title}),G.size&&e.jsx("p",{className:"text-sm text-gray-500",children:G.size}),G.type==="video"&&N[G.id]>0&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-blue-600 h-1 rounded-full",style:{width:`${Math.min(N[G.id]/600*100,100)}%`},title:`Watched: ${Math.floor(N[G.id]/60)}m ${Math.floor(N[G.id]%60)}s`})})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[G.type==="video"&&e.jsxs("button",{onClick:()=>g({id:G.id,title:G.title}),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(es,{className:"h-3 w-3"}),"Play"]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(Ie,{className:"h-4 w-4"})})]})]})},G.id))})]})]})},T.id))}),cs=()=>e.jsx("div",{className:"space-y-3 sm:space-y-4",children:ne.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(X,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-3 sm:mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No Assignments"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"No assignments available for this course yet."})]}):ne.map(T=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:T.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 line-clamp-2",children:T.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500",children:[e.jsxs("div",{className:`flex items-center gap-1 ${new Date(T.dueDate)<new Date?"text-red-600":new Date(T.dueDate)<new Date(Date.now()+24*60*60*1e3)?"text-orange-600":"text-gray-500"}`,children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",D(T.dueDate)]}),new Date(T.dueDate)<new Date&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full ml-2",children:"Overdue"}),new Date(T.dueDate)<new Date(Date.now()+24*60*60*1e3)&&new Date(T.dueDate)>new Date&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full ml-2",children:"Due Soon"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs("span",{children:[T.maxPoints," points"]})]}),T.submittedAt&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsxs("span",{children:["Submitted: ",D(T.submittedAt)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium capitalize ${q(T.status)}`,children:T.status==="pending"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Us,{className:"h-3 w-3"}),"Not Submitted"]}):T.status==="submitted"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),"Submitted"]}):T.status==="graded"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-3 w-3"}),"Graded"]}):T.status}),T.grade!==void 0&&e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[T.grade,"/",T.maxPoints]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Grade"})]}),T.status==="pending"?new Date(T.dueDate)<new Date?e.jsxs("button",{disabled:!0,className:"bg-gray-400 text-white px-4 py-2 rounded-lg cursor-not-allowed flex items-center gap-2",title:"Assignment deadline has passed",children:[e.jsx(ve,{className:"h-4 w-4"}),"Overdue"]}):e.jsxs("button",{onClick:()=>Ae(T),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Submit"]}):e.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"View"})]})]})},T.id))}),Se=[{id:"overview",label:"Overview",icon:ae},{id:"modules",label:"Modules",icon:es},{id:"assignments",label:"Assignments",icon:X},{id:"discussions",label:"Discussions",icon:ns}];return x?e.jsx("div",{className:"p-3 sm:p-4 md:p-6 flex items-center justify-center min-h-[300px] sm:min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Loading course details..."})]})}):w&&(r==null?void 0:r.role)==="teacher"&&s?e.jsx(Ir,{courseId:s,courseTitle:F.title,onBack:()=>p(!1)}):e.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 text-sm sm:text-base",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Courses"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4 sm:gap-6",children:[e.jsx("img",{src:F.thumbnail,alt:F.title,className:"w-full sm:w-32 h-48 sm:h-24 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:F.title}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:["by ",F.instructor]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-6 text-xs sm:text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ns,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current"}),e.jsx("span",{children:F.rating})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{className:"hidden sm:inline",children:[F.students.toLocaleString()," students"]}),e.jsx("span",{className:"sm:hidden",children:F.students})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:F.duration})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[(r==null?void 0:r.role)==="teacher"&&s&&e.jsxs("button",{onClick:()=>p(!w),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-xs sm:text-sm",children:[e.jsx(_e,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Video Stats"})]}),e.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ut,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ks,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),e.jsxs("div",{className:"mt-3 sm:mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Overall Course Progress"}),e.jsxs("div",{className:"flex items-center gap-2",children:[V&&e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-blue-600 border-t-transparent"}),e.jsxs("span",{className:"font-semibold text-blue-600",children:[F.progress,"% Complete"]})]})]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-3 relative overflow-hidden",children:[e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${F.progress}%`}}),V&&e.jsx("div",{className:"absolute inset-0 bg-blue-100 opacity-50 animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[k.materials.total>0&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(ae,{className:"h-3 w-3"}),"Materials"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[k.materials.completed,"/",k.materials.total]})]}),k.videos.total>0&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(_e,{className:"h-3 w-3"}),"Videos"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[k.videos.completed,"/",k.videos.total]})]}),k.assignments.total>0&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-1",children:[e.jsx(X,{className:"h-3 w-3"}),"Assignments"]}),e.jsxs("span",{className:"font-medium text-gray-900",children:[k.assignments.completed,"/",k.assignments.total]})]})]})]})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6 sm:mb-8 -mx-3 sm:mx-0 px-3 sm:px-0",children:e.jsx("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto scrollbar-hide",children:Se.map(T=>e.jsxs("button",{onClick:()=>a(T.id),className:`flex items-center gap-1.5 sm:gap-2 py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap ${t===T.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(T.icon,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:T.label})]},T.id))})}),e.jsxs("div",{children:[t==="overview"&&qe(),t==="modules"&&rs(),t==="assignments"&&cs(),t==="discussions"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Course Discussions"}),e.jsx("p",{className:"text-gray-600",children:"Connect with fellow students and instructors"})]})]}),n&&e.jsx(ot,{videoId:n.id,title:n.title,onClose:()=>{g(null),we()},onComplete:async()=>{await Re(n.id)},onProgressUpdate:(T,G)=>{if(Y(_=>({..._,[n.id]:T})),T/G*100>=80&&(b!=null&&b.modules)){const _=b.modules.find(M=>M.id===n.id);_&&!_.completed&&Re(n.id)}},initialWatchTime:N[n.id]||0}),u.show&&u.assignment&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Submit Assignment"}),e.jsx("button",{onClick:()=>S({show:!1,assignment:null}),className:"text-gray-400 hover:text-gray-600 text-2xl sm:text-3xl",children:""})]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2",children:u.assignment.title})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2",children:"Assignment Details"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:u.assignment.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{children:["Due: ",D(u.assignment.dueDate)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{children:[u.assignment.maxPoints," points"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Submission"}),e.jsx("textarea",{value:y,onChange:T=>f(T.target.value),placeholder:"Enter your assignment text here...",className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Upload (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",onChange:T=>{var xe;const G=(xe=T.target.files)==null?void 0:xe[0];if(G){if(G.size>10*1024*1024){v({type:"error",message:"File size must be less than 10MB"}),T.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","image/jpeg","image/jpg","image/png"].includes(G.type)){v({type:"error",message:"Please upload a valid file type (PDF, DOC, DOCX, TXT, JPG, PNG)"}),T.target.value="";return}d(G)}},className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:h?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(X,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium",children:h.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(h.size/(1024*1024)).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),d(null);const G=document.getElementById("file-upload");G&&(G.value="")},className:"text-red-600 hover:text-red-800",children:e.jsx(he,{className:"h-5 w-5"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Click to upload a file"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PDF, DOC, DOCX, TXT, JPG, PNG (Max 10MB)"})]})})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(ve,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Important"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Once submitted, you cannot modify your assignment. Please review your work before submitting."})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>S({show:!1,assignment:null}),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{onClick:()=>ce(u.assignment),disabled:m||!y.trim()&&!h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4"}),"Submit Assignment"]})})]})]})}),L&&e.jsx(os,{type:L.type,message:L.message,onClose:()=>v(null)})]})},Ur=()=>{const[s,r]=l.useState("details"),[t,a]=l.useState(null),[o,c]=l.useState(""),[n,g]=l.useState(!1),[b,i]=l.useState(!1),[x,j]=l.useState(null),u={title:"Linear Regression Project",description:"Implement a linear regression model using Python and scikit-learn to predict house prices based on various features.",instructions:`
      ## Project Requirements
      
      1. **Data Analysis**: Perform exploratory data analysis on the provided housing dataset
      2. **Feature Engineering**: Create meaningful features from the raw data
      3. **Model Implementation**: Implement linear regression using scikit-learn
      4. **Evaluation**: Evaluate your model using appropriate metrics (RMSE, R)
      5. **Documentation**: Provide clear documentation and comments in your code
      
      ## Deliverables
      
      - Python notebook (.ipynb) with your complete analysis
      - Written report (PDF) summarizing your findings
      - Dataset with your engineered features
      
      ## Grading Criteria
      
      - Code Quality (30%)
      - Analysis Depth (25%)
      - Model Performance (25%)
      - Documentation (20%)
    `,courseName:"Machine Learning Fundamentals",instructor:"Dr. Sarah Johnson",dueDate:"2024-02-15T23:59:00Z",maxPoints:100,submissionType:"file",allowedFileTypes:[".py",".ipynb",".pdf",".csv"],maxFileSize:"10MB",status:"pending"},S=[{id:"1",studentId:"student1",studentName:"Alice Johnson",submittedAt:"2024-02-14T18:30:00Z",files:[{name:"linear_regression_analysis.ipynb",size:"2.3 MB",url:"#"},{name:"housing_report.pdf",size:"1.8 MB",url:"#"},{name:"processed_data.csv",size:"450 KB",url:"#"}],grade:92,feedback:"Excellent work! Your analysis was thorough and the model performance was impressive. Consider exploring feature interactions in future projects.",status:"graded"},{id:"2",studentId:"student2",studentName:"Bob Smith",submittedAt:"2024-02-15T22:45:00Z",files:[{name:"ml_project.ipynb",size:"1.9 MB",url:"#"},{name:"analysis_report.pdf",size:"1.2 MB",url:"#"}],status:"submitted"},{id:"3",studentId:"student3",studentName:"Carol Davis",submittedAt:"2024-02-16T08:15:00Z",files:[{name:"regression_project.ipynb",size:"2.1 MB",url:"#"}],status:"late"}],y=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=v=>{const E=new Date,N=new Date(v).getTime()-E.getTime();if(N<0)return"Overdue";const Y=Math.floor(N/(1e3*60*60*24)),k=Math.floor(N%(1e3*60*60*24)/(1e3*60*60));return Y>0?`${Y} days, ${k} hours remaining`:`${k} hours remaining`},h=v=>{switch(v){case"submitted":return"text-blue-600 bg-blue-100";case"graded":return"text-green-600 bg-green-100";case"late":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},d=v=>{var A;const E=(A=v.target.files)==null?void 0:A[0];E&&a(E)},w=async()=>{g(!0),setTimeout(()=>{g(!1)},2e3)},p=()=>e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:u.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:u.description}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",y(u.dueDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs("span",{children:[u.maxPoints," points"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{children:u.instructor})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${new Date(u.dueDate)<new Date?"text-red-600 bg-red-100":"text-green-600 bg-green-100"}`,children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),f(u.dueDate)]})})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Instructions"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:u.instructions})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Submission Requirements"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[" Allowed file types: ",u.allowedFileTypes.join(", ")]}),e.jsxs("p",{children:[" Maximum file size: ",u.maxFileSize]}),e.jsxs("p",{children:[" Submission type: ",u.submissionType]})]})]})]})}),m=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Submit Assignment"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",onChange:d,className:"hidden",id:"file-upload",accept:u.allowedFileTypes.join(",")}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(ke,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Click to upload or drag and drop"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[u.allowedFileTypes.join(", ")," up to ",u.maxFileSize]})]})]}),t&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:()=>a(null),className:"text-red-600 hover:text-red-700",children:e.jsx(he,{className:"h-4 w-4"})})]})]}),u.submissionType==="both",e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:w,disabled:n||!t&&!o.trim(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(ke,{className:"h-4 w-4"}),n?"Submitting...":"Submit Assignment"]})})]})]})}),C=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Student Submissions"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[S.length," submissions"]})]}),S.map(v=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:v.studentName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:v.studentName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted ",y(v.submittedAt)]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${h(v.status)}`,children:v.status})]}),e.jsx("div",{className:"space-y-2 mb-4",children:v.files.map((E,A)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx(X,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-900",children:E.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",E.size,")"]}),e.jsx("button",{className:"ml-auto p-1 text-gray-400 hover:text-gray-600",children:e.jsx(Ie,{className:"h-4 w-4"})})]},A))}),v.grade!==void 0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium text-green-900",children:["Grade: ",v.grade,"/",u.maxPoints]}),e.jsxs("span",{className:"text-sm text-green-700",children:[Math.round(v.grade/u.maxPoints*100),"%"]})]}),v.feedback&&e.jsx("p",{className:"text-sm text-green-800",children:v.feedback})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ns,{className:"h-4 w-4"})}),v.status==="submitted"&&e.jsx("button",{className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Grade"})]})]})},v.id))]}),L=[{id:"details",label:"Details",icon:X},{id:"submit",label:"Submit",icon:ke},{id:"submissions",label:"Submissions",icon:Users}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(ss,{className:"h-4 w-4"}),"Back to Assignments"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:u.title}),e.jsx("p",{className:"text-gray-600",children:u.courseName})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[u.status==="graded",e.jsx("div",{className:"px-4 py-2 rounded-lg font-medium bg-yellow-100 text-yellow-800",children:"Not Submitted"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"flex space-x-8",children:L.map(v=>e.jsxs("button",{onClick:()=>r(v.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${s===v.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(v.icon,{className:"h-4 w-4"}),v.label]},v.id))})}),e.jsxs("div",{children:[s==="details"&&p(),s==="submit"&&m(),s==="submissions"&&C()]})]})},Or=()=>{const[s,r]=l.useState(null),[t,a]=l.useState([]),[o,c]=l.useState(!1),[n,g]=l.useState(null),[b,i]=l.useState("all"),[x,j]=l.useState(null),[u,S]=l.useState(null),y=async()=>{c(!0),g(null);try{const[p,m]=await Promise.all([He.getPerformanceAnalysis(void 0,b),He.getPerformanceAlerts()]);r(p),a(m.alerts||[])}catch(p){g(p.message||"Failed to fetch learner analytics")}finally{c(!1)}},f=async p=>{try{const m=await He.getStudentRecommendations(p);S(m)}catch(m){console.error("Failed to fetch recommendations:",m)}};l.useEffect(()=>{y()},[b]);const h=p=>{switch(p){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},d=p=>{switch(p){case"fast":return e.jsx(me,{className:"h-4 w-4 text-green-600"});case"slow":return e.jsx(xs,{className:"h-4 w-4 text-red-600"});default:return e.jsx(is,{className:"h-4 w-4 text-blue-600"})}},w=p=>{switch(p){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return o&&!s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx($e,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading learner analytics..."})]}):n?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Os,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("span",{className:"text-red-800",children:n})]}),e.jsx("button",{onClick:y,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Learner Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Monitor student performance and identify learning patterns"})]}),e.jsxs("button",{onClick:y,disabled:o,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx($e,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Refresh"]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.total_students})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xs,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Slow Learners"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.summary.slow_learners_count})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fast Learners"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.summary.fast_learners_count})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:s.summary.students_at_risk})]})]})})]}),t.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ee,{className:"h-5 w-5 text-yellow-600 mr-2"}),"Performance Alerts"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:t.slice(0,5).map((p,m)=>e.jsx("div",{className:`p-4 rounded-lg border ${w(p.severity)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:p.message}),e.jsxs("p",{className:"text-sm opacity-75 mt-1",children:["Type: ",p.type,"  ",new Date(p.created_at).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(p.severity)}`,children:p.severity})]})},m))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"all",label:"All Students",icon:ee},{key:"slow",label:"Slow Learners",icon:xs},{key:"fast",label:"Fast Learners",icon:me}].map(({key:p,label:m,icon:C})=>e.jsxs("button",{onClick:()=>i(p),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${b===p?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),m]},p))})}),e.jsx("div",{className:"p-6",children:s&&s.students.length>0?e.jsx("div",{className:"space-y-4",children:s.students.map(p=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ce,{className:"h-10 w-10 text-gray-400 bg-gray-100 rounded-full p-2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:p.student_name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(We,{className:"h-4 w-4 mr-1"}),p.email]}),e.jsxs("span",{children:[p.department,"  ",p.year]}),e.jsxs("span",{children:["Roll: ",p.roll_number]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-sm",children:["Performance: ",e.jsxs("strong",{children:[p.performance_score,"%"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[d(p.learning_pace),e.jsxs("span",{className:"text-sm ml-2",children:["Pace: ",e.jsx("strong",{className:"capitalize",children:p.learning_pace})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(oe,{className:"h-4 w-4 text-gray-600 mr-2"}),e.jsxs("span",{className:"text-sm",children:["Last login: ",e.jsxs("strong",{children:[p.days_since_login," days ago"]})]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium border ${h(p.risk_level)}`,children:[p.risk_level.toUpperCase()," RISK"]})]}),p.difficulties.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Areas of Difficulty:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.difficulties.map((m,C)=>e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:m.description},C))})]}),p.course_data&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:p.course_data.course_name}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Progress: ",p.course_data.progress,"%"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${p.course_data.progress}%`}})})]})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("button",{onClick:()=>{j(p),f(p.student_id)},className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"View Recommendations"})})]})},p.student_id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No students found for the selected criteria."})]})})]}),x&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Recommendations for ",x.student_name]}),e.jsx("button",{onClick:()=>{j(null),S(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Os,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Performance Overview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Score"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[u.performance_metrics.performance_score,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Learning Pace"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:u.performance_metrics.learning_pace})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Risk Level"}),e.jsx("p",{className:`text-lg font-semibold capitalize ${u.performance_metrics.risk_level==="high"?"text-red-600":u.performance_metrics.risk_level==="medium"?"text-yellow-600":"text-green-600"}`,children:u.performance_metrics.risk_level})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Recommended Actions"}),u.recommendations.map((p,m)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full mt-2 mr-3 ${p.type==="urgent"?"bg-red-500":p.type==="moderate"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:p.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.description}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Suggested Actions:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:p.actions.map((C,L)=>e.jsx("li",{children:C},L))})]})]})]})},m))]})]})]})})]})},zr=()=>{const{user:s}=re(),[r,t]=l.useState([]),[a,o]=l.useState(!1),[c,n]=l.useState(null),[g,b]=l.useState(""),[i,x]=l.useState(""),[j,u]=l.useState(null),[S,y]=l.useState(!1),[f,h]=l.useState(!1),[d,w]=l.useState({}),p=async()=>{o(!0),n(null);try{const k=new URLSearchParams;i&&k.append("role",i),g&&k.append("search",g),k.append("page","1"),k.append("limit","50");const U=localStorage.getItem("access_token");if(!U)throw new Error("No authentication token found. Please login again.");const V=`http://localhost:5000/api/users?${k.toString()}`;console.log("Fetching users from:",V);const R=await fetch(V,{method:"GET",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json",Accept:"application/json"}});if(!R.ok)throw R.status===401?new Error("Authentication failed. Please login again."):R.status===403?new Error("Access denied. Admin privileges required."):R.status===404?new Error("API endpoint not found. Check backend configuration."):new Error(`Server error: ${R.status}`);const F=await R.json();console.log("Users data received:",F),F.users&&Array.isArray(F.users)?t(F.users):Array.isArray(F)?t(F):(console.warn("Unexpected response structure:",F),t([]))}catch(k){console.error("Error fetching users:",k),k.message.includes("Failed to fetch")||k.name==="TypeError"?n("Cannot connect to server. Please check if the backend is running on http://localhost:5000"):n(k.message||"An unexpected error occurred while fetching users.")}finally{o(!1)}};l.useEffect(()=>{s&&["admin","super_admin"].includes(s.role)&&p()},[s,i,g]),l.useEffect(()=>{const k=async()=>{try{const U=await fetch("http://localhost:5000/api/health",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(U.ok){const V=await U.json();console.log("Backend connection successful:",V.message)}else throw new Error(`Health check failed: ${U.status}`)}catch(U){console.error("Backend connection failed:",U),n("Cannot connect to backend server. Please ensure it is running on http://localhost:5000")}};s&&["admin","super_admin"].includes(s.role)&&k()},[s]);const m=async(k,U)=>{if(confirm(`Are you sure you want to ${U} this user?`))try{const V=localStorage.getItem("access_token");if(!V){alert("Authentication token not found. Please login again.");return}const R=`http://localhost:5000/api/users/${k}/${U}`,F=await fetch(R,{method:"POST",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json",Accept:"application/json"}});if(F.ok){const I=await F.json();await p(),alert(I.message||`User ${U}d successfully`)}else{let I=`Failed to ${U} user`;if(F.status===401)I="Authentication failed. Please login again.";else if(F.status===403)I="Access denied. Admin privileges required.";else if(F.status===400)I="Cannot perform this action on the selected user.";else if(F.status===404)I="User not found.";else try{I=(await F.json()).error||I}catch{I=`Server error (${F.status})`}alert(I)}}catch(V){console.error(`Error ${U}ing user:`,V),alert("Error: Cannot connect to server. Please check if the backend is running.")}},C=async(k,U)=>{if(confirm(`Are you sure you want to DELETE user "${U}"? This action cannot be undone!`))try{const V=localStorage.getItem("access_token");if(!V){alert("Authentication token not found. Please login again.");return}const R=`http://localhost:5000/api/users/${k}`,F=await fetch(R,{method:"DELETE",headers:{Authorization:`Bearer ${V}`,"Content-Type":"application/json",Accept:"application/json"}});if(F.ok)await p(),alert("User deleted successfully");else{let I="Failed to delete user";if(F.status===401)I="Authentication failed. Please login again.";else if(F.status===403)I="Access denied. Super admin privileges required.";else if(F.status===404)I="User not found.";else try{I=(await F.json()).error||I}catch{I=`Server error (${F.status})`}alert(I)}}catch(V){console.error("Error deleting user:",V),alert("Error: Cannot connect to server. Please check if the backend is running.")}},L=async(k,U)=>{const V=prompt(`Enter new password for ${U}:`);if(V){if(V.length<8){alert("Password must be at least 8 characters long");return}try{const R=localStorage.getItem("access_token");if(!R){alert("Authentication token not found. Please login again.");return}const F=`http://localhost:5000/api/users/${k}/reset-password`,I=await fetch(F,{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({new_password:V})});if(I.ok){const ne=await I.json();alert(ne.message||"Password reset successfully")}else{let ne="Failed to reset password";if(I.status===401)ne="Authentication failed. Please login again.";else if(I.status===403)ne="Access denied. Admin privileges required.";else if(I.status===404)ne="User not found.";else try{ne=(await I.json()).error||ne}catch{ne=`Server error (${I.status})`}alert(ne)}}catch(R){console.error("Error resetting password:",R),alert("Error: Cannot connect to server. Please check if the backend is running.")}}},v=async k=>{try{const U=localStorage.getItem("access_token");if(!U){alert("Authentication token not found. Please login again.");return}const V=await fetch(`http://localhost:5000/api/users/${k}`,{method:"GET",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json",Accept:"application/json"}});if(V.ok){const R=await V.json();u(R.user),w({name:R.user.name,email:R.user.email,role:R.user.role,department:R.user.department||"",phone:R.user.phone||"",is_active:R.user.is_active}),h(!0)}else{let R="Failed to fetch user details";V.status===401?R="Authentication failed. Please login again.":V.status===403?R="Access denied. Admin privileges required.":V.status===404&&(R="User not found."),alert(R)}}catch(U){console.error("Error fetching user details:",U),alert("Error: Cannot connect to server. Please check if the backend is running.")}},E=async()=>{if(j)try{const k=localStorage.getItem("access_token");if(!k){alert("Authentication token not found. Please login again.");return}const U=await fetch(`http://localhost:5000/api/users/${j._id}`,{method:"PUT",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(d)});if(U.ok){const V=await U.json();h(!1),u(null),w({}),await p(),alert(V.message||"User updated successfully")}else{let V="Failed to update user";if(U.status===401)V="Authentication failed. Please login again.";else if(U.status===403)V="Access denied. Admin privileges required.";else if(U.status===404)V="User not found.";else try{V=(await U.json()).error||V}catch{V=`Server error (${U.status})`}alert(V)}}catch(k){console.error("Error updating user:",k),alert("Error: Cannot connect to server. Please check if the backend is running.")}},A=async k=>{try{const U=localStorage.getItem("access_token");if(!U){alert("Authentication token not found. Please login again.");return}const V=await fetch(`http://localhost:5000/api/users/${k}`,{method:"GET",headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json",Accept:"application/json"}});if(V.ok){const R=await V.json();u(R.user),y(!0)}else{let R="Failed to fetch user details";V.status===401?R="Authentication failed. Please login again.":V.status===403?R="Access denied. Admin privileges required.":V.status===404&&(R="User not found."),alert(R)}}catch(U){console.error("Error fetching user details:",U),alert("Error: Cannot connect to server. Please check if the backend is running.")}},N=k=>{switch(k){case"student":return e.jsx(Oe,{className:"h-4 w-4 text-blue-600"});case"teacher":return e.jsx(ae,{className:"h-4 w-4 text-green-600"});case"admin":return e.jsx(Me,{className:"h-4 w-4 text-orange-600"});case"super_admin":return e.jsx(Me,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(ee,{className:"h-4 w-4 text-gray-600"})}},Y=k=>{switch(k){case"student":return"bg-blue-100 text-blue-800";case"teacher":return"bg-green-100 text-green-800";case"admin":return"bg-orange-100 text-orange-800";case"super_admin":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return!s||!["admin","super_admin"].includes(s.role)?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-800",children:"Access denied. Admin privileges required."}),e.jsxs("div",{className:"mt-2 text-sm text-red-600",children:[e.jsxs("p",{children:["Current user role: ",(s==null?void 0:s.role)||"Not logged in"]}),e.jsxs("p",{children:["Token exists: ",localStorage.getItem("access_token")?"Yes":"No"]})]})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{window.history.pushState({},"","/dashboard"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:" Back to Dashboard"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage all users, roles, and permissions"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const k=await fetch("http://localhost:5000/api/health",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(k.ok){const U=await k.json();alert(`Backend Status: ${U.status}
Message: ${U.message}
Timestamp: ${U.timestamp}`)}else alert(`Backend connection failed: HTTP ${k.status}`)}catch(k){alert(`Backend connection failed: ${k.message||"Cannot reach server"}`)}},className:"flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Test Connection"}),e.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),!1,!a&&!c&&r.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(k=>k.role==="student").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Teachers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(k=>k.role==="teacher").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(k=>["admin","super_admin"].includes(k.role)).length})]})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:g,onChange:k=>b(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:i,onChange:k=>x(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"teacher",children:"Teachers"}),e.jsx("option",{value:"admin",children:"Admins"}),e.jsx("option",{value:"super_admin",children:"Super Admins"})]}),e.jsxs("button",{onClick:p,disabled:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:[e.jsx($e,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:[c&&e.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:c}),c.includes("Cannot connect to server")&&e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsx("p",{className:"font-medium",children:"To start the backend server:"}),e.jsxs("ol",{className:"list-decimal list-inside mt-1 space-y-1",children:[e.jsxs("li",{children:["Open a terminal in the ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"backend"})," directory"]}),e.jsxs("li",{children:["Install dependencies: ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"pip install -r requirements.txt"})]}),e.jsxs("li",{children:["Start the server: ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"python run.py"})]}),e.jsx("li",{children:"Ensure MongoDB is running (required for the backend)"}),e.jsxs("li",{children:["Server should start on ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"http://localhost:5000"})]})]})]})]}),e.jsx("button",{onClick:p,className:"text-red-600 hover:text-red-800 text-sm underline",children:"Retry"})]})}),a&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx($e,{className:"h-8 w-8 animate-spin mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading users..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This may take a few seconds"})]}),!a&&!c&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:["No users found. ",g||i?"Try adjusting your search criteria.":"Start by adding some users."]})}):r.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:k.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name}),e.jsx("div",{className:"text-sm text-gray-500",children:k.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[N(k.role),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${Y(k.role)}`,children:k.role.replace("_"," ").toUpperCase()})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:k.department||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>A(k._id),className:"p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded",title:"View Details",children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(k._id),className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-50 rounded",title:"Edit User",children:e.jsx(js,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>L(k._id,k.name),className:"p-1 text-orange-600 hover:text-orange-900 hover:bg-orange-50 rounded",title:"Reset Password",children:e.jsx(zt,{className:"h-4 w-4"})}),k.is_active?e.jsx("button",{onClick:()=>m(k._id,"deactivate"),className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded",title:"Block/Deactivate User",children:e.jsx(ls,{className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>m(k._id,"activate"),className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-50 rounded",title:"Unblock/Activate User",children:e.jsx(Bt,{className:"h-4 w-4"})}),(s==null?void 0:s.role)==="super_admin"&&e.jsx("button",{onClick:()=>C(k._id,k.name),className:"p-1 text-red-700 hover:text-red-900 hover:bg-red-50 rounded",title:"Delete User (Super Admin Only)",children:e.jsx(Te,{className:"h-4 w-4"})})]})})]},k._id))})]})})]}),S&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"User Details"}),e.jsx("button",{onClick:()=>{y(!1),u(null)},className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-medium text-gray-700",children:j.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:j.name}),e.jsx("p",{className:"text-gray-600",children:j.email}),e.jsxs("div",{className:"flex items-center mt-1",children:[N(j.role),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${Y(j.role)}`,children:j.role.replace("_"," ").toUpperCase()})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${j.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.is_active?"Active":"Inactive"})]}),j.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:j.phone})]}),j.department&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:j.department})]}),j.roll_no&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Roll Number"}),e.jsx("p",{className:"text-gray-900",children:j.roll_no})]}),j.employee_id&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:j.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created At"}),e.jsx("p",{className:"text-gray-900",children:new Date(j.created_at).toLocaleDateString()})]}),j.last_login&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Last Login"}),e.jsx("p",{className:"text-gray-900",children:new Date(j.last_login).toLocaleDateString()})]})]}),j.role==="student"&&j.enrolled_courses_details&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrolled Courses"}),e.jsx("div",{className:"space-y-2",children:j.enrolled_courses_details.length>0?j.enrolled_courses_details.map((k,U)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:k.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Progress: ",k.progress,"%"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Enrolled: ",new Date(k.enrolled_at).toLocaleDateString()]})]},U)):e.jsx("p",{className:"text-gray-500",children:"No courses enrolled"})})]}),j.role==="teacher"&&j.created_courses_details&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Created Courses"}),e.jsx("div",{className:"space-y-2",children:j.created_courses_details.length>0?j.created_courses_details.map((k,U)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:k.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Students: ",k.enrolled_students]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",new Date(k.created_at).toLocaleDateString()]})]},U)):e.jsx("p",{className:"text-gray-500",children:"No courses created"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>{y(!1),u(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"}),e.jsx("button",{onClick:()=>{y(!1),u(null),v(j._id)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit User"})]})]})}),f&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit User"}),e.jsx("button",{onClick:()=>{h(!1),u(null),w({})},className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:d.name||"",onChange:k=>w({...d,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:d.email||"",onChange:k=>w({...d,email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("select",{value:d.role||"",onChange:k=>w({...d,role:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"teacher",children:"Teacher"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"super_admin",children:"Super Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsx("input",{type:"text",value:d.department||"",onChange:k=>w({...d,department:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"text",value:d.phone||"",onChange:k=>w({...d,phone:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:d.is_active||!1,onChange:k=>w({...d,is_active:k.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active User"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>{h(!1),u(null),w({})},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Update User"})]})]})})]})},Br=()=>{const{user:s}=re(),[r,t]=l.useState([]),[a,o]=l.useState(null),[c,n]=l.useState(!1),[g,b]=l.useState("suggestions");l.useEffect(()=>{i()},[]);const i=async()=>{n(!0);try{const[f]=await Promise.all([He.getPerformanceAnalysis()]);o(f.summary),x(f.summary)}catch(f){console.error("Failed to load teaching insights:",f)}finally{n(!1)}},x=f=>{const h=[];f.slow_learners_count>f.total_students*.3&&h.push({type:"content",title:"Simplify Course Content",description:`${f.slow_learners_count} students are struggling. Consider breaking down complex topics.`,priority:"high",actionItems:["Create additional practice materials","Add more visual explanations","Provide step-by-step guides","Offer supplementary resources"]}),f.inactive_students>0&&h.push({type:"engagement",title:"Boost Student Engagement",description:`${f.inactive_students} students haven't been active recently.`,priority:"medium",actionItems:["Send personalized check-in messages","Create interactive assignments","Schedule virtual office hours","Form study groups"]}),f.average_performance<70&&h.push({type:"assessment",title:"Adjust Assessment Strategy",description:`Average performance is ${f.average_performance}%. Consider modifying assessments.`,priority:"high",actionItems:["Provide more practice opportunities","Offer formative assessments","Give detailed feedback","Create rubrics for clarity"]}),f.students_at_risk>0&&h.push({type:"support",title:"Support At-Risk Students",description:`${f.students_at_risk} students need additional support.`,priority:"high",actionItems:["Schedule one-on-one meetings","Provide additional resources","Connect with academic advisors","Offer flexible deadlines"]}),t(h)},j=f=>{switch(f){case"high":return"border-red-200 bg-red-50 text-red-800";case"medium":return"border-yellow-200 bg-yellow-50 text-yellow-800";case"low":return"border-blue-200 bg-blue-50 text-blue-800";default:return"border-gray-200 bg-gray-50 text-gray-800"}},u=f=>{switch(f){case"content":return e.jsx(ae,{className:"h-5 w-5"});case"engagement":return e.jsx(ee,{className:"h-5 w-5"});case"assessment":return e.jsx(ie,{className:"h-5 w-5"});case"support":return e.jsx(is,{className:"h-5 w-5"});default:return e.jsx(fs,{className:"h-5 w-5"})}},S=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"AI Teaching Suggestions"}),e.jsxs("button",{onClick:i,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx($e,{className:`h-4 w-4 ${c?"animate-spin":""}`}),"Refresh"]})]}),c?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx($e,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Analyzing student data..."})]}):r.length>0?e.jsx("div",{className:"grid gap-6",children:r.map((f,h)=>e.jsx("div",{className:`border rounded-lg p-6 ${j(f.priority)}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:u(f.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:f.title}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.priority==="high"?"bg-red-100 text-red-700":f.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:[f.priority," priority"]})]}),e.jsx("p",{className:"text-sm mb-4",children:f.description}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Recommended Actions:"}),e.jsx("ul",{className:"text-sm space-y-1",children:f.actionItems.map((d,w)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full"}),d]},w))})]})]})]})},h))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ne,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No specific suggestions at this time. Your students are doing well!"})]})]}),y=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Student Performance Insights"}),a?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ee,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.total_students})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(me,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Average Performance"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[a.average_performance,"%"]})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ee,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.students_at_risk})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(oe,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Slow Learners"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:a.slow_learners_count})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ie,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Fast Learners"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.fast_learners_count})]})]})}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ee,{className:"h-8 w-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Inactive Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:a.inactive_students})]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx($e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading insights..."})]})]});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI Teaching Assistant"}),e.jsx("p",{className:"text-gray-600",children:"Get AI-powered insights and suggestions to improve your teaching"})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>b("suggestions"),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${g==="suggestions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(fs,{className:"h-4 w-4"}),"Teaching Suggestions"]}),e.jsxs("button",{onClick:()=>b("insights"),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${g==="insights"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(me,{className:"h-4 w-4"}),"Student Insights"]})]})}),e.jsxs("div",{children:[g==="suggestions"&&S(),g==="insights"&&y()]})]})},Gr=({onUploadComplete:s,courseId:r,maxSizeMB:t=100})=>{const[a,o]=l.useState(null),[c,n]=l.useState(""),[g,b]=l.useState(""),[i,x]=l.useState(!1),[j,u]=l.useState(0),[S,y]=l.useState(""),[f,h]=l.useState(!1),d=m=>{var v;const C=(v=m.target.files)==null?void 0:v[0];if(!C)return;if(!C.type.startsWith("video/")){y("Please select a valid video file");return}if(C.size/(1024*1024)>t){y(`File size must be less than ${t}MB`);return}o(C),y(""),h(!1)},w=async()=>{if(!a)return;if(!c.trim()){y("Please enter a video title");return}x(!0),y(""),u(0);const m=localStorage.getItem("access_token")||localStorage.getItem("token");if(!m){y("Please login first. Token not found."),x(!1);return}console.log(" Using token for upload:",m.substring(0,20)+"...");const C=new FormData;C.append("video",a),C.append("title",c),C.append("description",g),r&&C.append("courseId",r);const L=new XMLHttpRequest;L.upload.addEventListener("progress",v=>{if(v.lengthComputable){const E=Math.round(v.loaded/v.total*100);u(E)}}),L.addEventListener("load",()=>{if(L.status===201)try{const v=JSON.parse(L.responseText);u(100),h(!0),s&&s(v)}catch{y("Upload completed but failed to parse response")}else try{const v=JSON.parse(L.responseText);y(v.error||`Upload failed with status ${L.status}`)}catch{y(`Upload failed with status ${L.status}`)}x(!1)}),L.addEventListener("error",()=>{y("Network error. Please check your connection and try again."),x(!1)}),L.addEventListener("abort",()=>{y("Upload cancelled"),x(!1)}),L.open("POST","http://localhost:5000/api/videos/upload"),L.setRequestHeader("Authorization",`Bearer ${m}`),L.send(C)},p=()=>{o(null),n(""),b(""),u(0),y(""),h(!1)};return e.jsx("div",{className:"w-full",children:a?e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-10 h-10 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(a.size/(1024*1024)).toFixed(2)," MB"]})]})]}),!i&&!f&&e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(he,{className:"w-5 h-5"})})]}),!i&&!f&&e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"videoTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Title *"}),e.jsx("input",{id:"videoTitle",type:"text",value:c,onChange:m=>n(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter video title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"videoDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"videoDescription",value:g,onChange:m=>b(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter video description",rows:3})]})]}),i&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${j}%`}})})]}),f&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-4",children:[e.jsx(de,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload successful!"})]}),S&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:S})]}),!i&&!f&&e.jsx("button",{onClick:w,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Video"})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(ke,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["MP4, AVI, MOV, or other video formats (Max ",t,"MB)"]})]}),e.jsx("input",{type:"file",className:"hidden",accept:"video/*",onChange:d})]})})},Vr=({courseId:s,isTeacher:r=!1,onVideoSelect:t})=>{const[a,o]=l.useState([]),[c,n]=l.useState(!0),[g,b]=l.useState(""),[i,x]=l.useState(1),[j,u]=l.useState(1);l.useEffect(()=>{S()},[s,i]);const S=async()=>{try{n(!0);const d=localStorage.getItem("access_token")||localStorage.getItem("token");if(!d){b("Please login first. Token not found."),n(!1);return}const w=new URL("http://localhost:5000/api/videos/list");s&&w.searchParams.append("courseId",s),w.searchParams.append("page",i.toString()),w.searchParams.append("limit","10");const p=await fetch(w.toString(),{headers:{Authorization:`Bearer ${d}`}});if(!p.ok)throw new Error("Failed to fetch videos");const m=await p.json();o(m.videos),u(m.totalPages)}catch(d){b(d.message||"Failed to load videos")}finally{n(!1)}},y=async d=>{if(confirm("Are you sure you want to delete this video?"))try{const w=localStorage.getItem("token");if(!(await fetch(`http://localhost:5000/api/videos/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${w}`}})).ok)throw new Error("Failed to delete video");S()}catch(w){alert(w.message||"Failed to delete video")}},f=d=>d<1024*1024?`${(d/1024).toFixed(2)} KB`:`${(d/(1024*1024)).toFixed(2)} MB`,h=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return c?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):g?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:g}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No videos uploaded yet"})]}):e.jsxs("div",{className:"space-y-4",children:[a.map(d=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-24 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(_e,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:d.title}),d.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:d.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ue,{className:"w-4 h-4"}),d.views," views"]}),e.jsx("span",{children:f(d.fileSize)}),e.jsxs("span",{children:["Uploaded by ",d.uploadedBy.name]}),e.jsx("span",{children:h(d.uploadedAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t&&t(d),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Play video",children:e.jsx(es,{className:"w-5 h-5"})}),r&&e.jsx("button",{onClick:()=>y(d.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete video",children:e.jsx(Te,{className:"w-5 h-5"})})]})]})},d.id)),j>1&&e.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>x(d=>Math.max(1,d-1)),disabled:i===1,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700",children:["Page ",i," of ",j]}),e.jsx("button",{onClick:()=>x(d=>Math.min(j,d+1)),disabled:i===j,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})},qr=()=>{const{user:s}=re(),[r,t]=l.useState("list"),[a,o]=l.useState(null),[c,n]=l.useState(0),g=(s==null?void 0:s.role)==="teacher",b=x=>{n(j=>j+1),t("list")},i=x=>{o(x)};return g?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Video Management"}),e.jsx("p",{className:"text-gray-600",children:"Upload and manage your course videos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>t("list"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${r==="list"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Js,{className:"w-5 h-5"}),"My Videos"]}),e.jsxs("button",{onClick:()=>t("upload"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${r==="upload"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ke,{className:"w-5 h-5"}),"Upload Video"]})]})}),e.jsx("div",{className:"p-6",children:r==="upload"?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(Gr,{onUploadComplete:b})}):e.jsx(Vr,{isTeacher:!0,onVideoSelect:i},c)})]})]}),a&&e.jsx(ot,{videoId:a.id,title:a.title,onClose:()=>o(null)})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"Only teachers can access the video management page."})]})})},Yr=()=>{const[s,r]=l.useState([]),[t,a]=l.useState(!0),[o,c]=l.useState(null);l.useEffect(()=>{n()},[]);const n=async()=>{try{const i=Pe();if(!i){console.log("No token found"),a(!1);return}const x=await fetch("http://localhost:5000/api/assignments/",{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(x.ok){const j=await x.json();r(j.assignments),console.log("Assignments fetched:",j.assignments)}else console.error("Failed to fetch assignments:",x.status)}catch(i){console.error("Error fetching assignments:",i)}finally{a(!1)}},g=async i=>{c(i);try{const x=Pe(),j=await fetch(`http://localhost:5000/api/assignments/${i}/submit`,{method:"POST",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"},body:JSON.stringify({text_content:`Test submission for assignment ${i} at ${new Date().toISOString()}`,file_name:"test-submission.txt",file_path:"/uploads/test-submission.txt"})}),u=await j.json();j.ok?(console.log("Assignment submitted successfully:",u),n()):console.error("Failed to submit assignment:",u.error)}catch(x){console.error("Error submitting assignment:",x)}finally{c(null)}},b=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return t?e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Assignment Test Page"}),e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"}),e.jsx("span",{className:"ml-3",children:"Loading assignments..."})]})]}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Assignment Test Page"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h2",{className:"font-semibold text-blue-900 mb-2",children:"Test Instructions:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" This page shows all assignments for the logged-in student"}),e.jsx("li",{children:' Click "Test Submit" to submit an assignment with sample data'}),e.jsx("li",{children:' Status should change from "pending" to "submitted"'}),e.jsx("li",{children:" Check browser console for detailed logs"})]})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-600",children:"No assignments found. Make sure you're logged in as a student."})}):s.map(i=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:i.title}),e.jsx("p",{className:"text-gray-600 mb-3",children:i.description}),e.jsxs("p",{className:"text-sm text-blue-600 mb-3",children:["Course: ",i.course_title]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",b(i.due_date)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs("span",{children:[i.max_points," points"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ${i.submission_status==="submitted"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:i.submission_status==="submitted"?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-3 w-3"}),"Submitted"]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"h-3 w-3"}),"Pending"]})}),i.submission_status==="pending"&&e.jsx("button",{onClick:()=>g(i._id),disabled:o===i._id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:o===i._id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4"}),"Test Submit"]})})]})]})},i._id))}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Debug Info:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total assignments: ",s.length]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Pending: ",s.filter(i=>i.submission_status==="pending").length]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted: ",s.filter(i=>i.submission_status==="submitted").length]})]})]})},Hr=()=>{const{user:s}=re();return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"System Status Check"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Frontend Running: Port 5174"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Backend Running: Port 5000"})]}),e.jsx("div",{className:"flex items-center gap-3",children:s?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-gray-700",children:["User Logged In: ",s.name," (",s.role,")"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-gray-700",children:"No User Logged In"})]})})]})]}),(s==null?void 0:s.role)==="teacher"?e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Teacher Assignment View"}),e.jsx(Fs,{})]}):(s==null?void 0:s.role)==="student"?e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Student View"}),e.jsx("p",{className:"text-blue-700",children:"Go to Assignments page to submit assignments or Course Details to view course assignments."}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("a",{href:"/assignments",className:"block text-blue-600 hover:underline",children:" Go to Assignments Page"}),e.jsx("a",{href:"/courses/detail",className:"block text-blue-600 hover:underline",children:" Go to Course Details"}),e.jsx("a",{href:"/test/assignments",className:"block text-blue-600 hover:underline",children:" Go to Assignment Test Page"})]})]}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsx("p",{className:"text-gray-600",children:"Please login to continue"})})]})},Wr=()=>{const{user:s}=re(),[r,t]=as.useState("/dashboard");as.useEffect(()=>{const o=window.location.pathname;t(o==="/"?"/dashboard":o);const c=()=>{const n=window.location.pathname;t(n==="/"?"/dashboard":n)};return window.addEventListener("popstate",c),()=>window.removeEventListener("popstate",c)},[]);const a=()=>{if(r.startsWith("/courses/")&&r!=="/courses/create"){const o=r.split("/")[2];return e.jsx(Rr,{courseId:o})}switch(r){case"/dashboard":return e.jsx(Ss,{});case"/courses":return e.jsx(hr,{});case"/courses/create":return e.jsx(ds,{allowedRoles:["teacher","instructor","super_admin","admin"],children:e.jsx(Nr,{})});case"/videos":return e.jsx(ds,{allowedRoles:["teacher","instructor","super_admin","admin"],children:e.jsx(qr,{})});case"/assignments":return e.jsx(Cr,{});case"/discussions":return e.jsx(Ar,{});case"/analytics":return e.jsx(_r,{});case"/admin/users":return e.jsx(ds,{allowedRoles:["super_admin","admin"],children:e.jsx(zr,{})});case"/profile":return e.jsx(Tr,{});case"/settings":case"/admin/settings":return(s==null?void 0:s.role)==="super_admin"?e.jsx(Dr,{}):e.jsx(Er,{});case"/notifications":return e.jsx(Fr,{});case"/messages":return window.history.replaceState({},"","/dashboard"),e.jsx(Ss,{});case"/achievements":return e.jsx($r,{});case"/students":return e.jsx(ds,{allowedRoles:["teacher","instructor","super_admin","admin"],children:e.jsx(Lr,{})});case"/schedule":return e.jsx(Mr,{});case"/assignments/detail":return e.jsx(Ur,{});case"/assignments/teacher":return e.jsx(ds,{allowedRoles:["teacher","instructor","super_admin","admin"],children:e.jsx(Fs,{})});case"/analytics/learners":return e.jsx(Or,{});case"/test/assignments":return e.jsx(Yr,{});case"/test":return e.jsx(Hr,{});case"/ai-assistant":return(s==null?void 0:s.role)==="teacher"?e.jsx(Br,{}):e.jsx(Pr,{});default:return e.jsx(Ss,{})}};return as.useEffect(()=>{const o=c=>{const n=c.target;if(n.tagName==="A"&&n.href.startsWith(window.location.origin)){c.preventDefault();const g=n.pathname;t(g),window.history.pushState({},"",g)}};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[]),a()},Jr=(s=5)=>{const[r,t]=l.useState({isExpiringSoon:!1,timeUntilExpiration:0,shouldRefresh:!1});return l.useEffect(()=>{const a=()=>{const c=le.getAccessToken();if(!c){t({isExpiringSoon:!1,timeUntilExpiration:0,shouldRefresh:!1});return}try{const g=JSON.parse(atob(c.split(".")[1])).exp*1e3,b=Date.now(),i=g-b,x=s*60*1e3;t({isExpiringSoon:i<=x&&i>0,timeUntilExpiration:Math.max(0,i),shouldRefresh:i<=x&&i>0})}catch(n){console.error("Error parsing token:",n),t({isExpiringSoon:!1,timeUntilExpiration:0,shouldRefresh:!1})}};a();const o=setInterval(a,60*1e3);return()=>clearInterval(o)},[s]),r},Kr=s=>{const[r,t]=l.useState("");return l.useEffect(()=>{const a=()=>{if(s<=0){t("Expired");return}const c=Math.floor(s/(1e3*60)),n=Math.floor(s%(1e3*60)/1e3);c>0?t(`${c}m ${n}s`):t(`${n}s`)};a();const o=setInterval(a,1e3);return()=>clearInterval(o)},[s]),r},Zr=({warningThresholdMinutes:s=5,className:r=""})=>{const{isExpiringSoon:t,timeUntilExpiration:a}=Jr(s),o=Kr(a),{refreshUser:c}=re(),[n,g]=l.useState(!1),[b,i]=l.useState(!1),x=async()=>{g(!0);try{await De.refreshToken(),await c(),i(!0),setTimeout(()=>i(!1),3e4)}catch(j){console.error("Failed to refresh token:",j)}finally{g(!1)}};return!t||b?null:e.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg max-w-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Session Expiring Soon"}),e.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:e.jsxs("p",{children:["Your session will expire in ",o]})}),e.jsxs("div",{className:"mt-3 flex space-x-2",children:[e.jsx("button",{onClick:x,disabled:n,className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 text-xs font-medium px-3 py-1 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Refreshing...":"Extend Session"}),e.jsx("button",{onClick:()=>i(!0),className:"text-yellow-800 hover:text-yellow-900 text-xs font-medium px-3 py-1 rounded-md transition-colors",children:"Dismiss"})]})]}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("button",{onClick:()=>i(!0),className:"inline-flex text-yellow-400 hover:text-yellow-500 focus:outline-none focus:text-yellow-500 transition-colors",children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})})},Qr=()=>{const{user:s,isAuthenticated:r}=re();return s?e.jsxs(Kt,{children:[e.jsx(ir,{children:e.jsx(Wr,{})}),r&&e.jsx(Zr,{warningThresholdMinutes:5})]}):e.jsx(tr,{})};function Xr(){return e.jsx(Jt,{children:e.jsx(Qr,{})})}Xs(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Xr,{})}));
