import{r,a as tt,R as ss}from"./vendor-B5ZO-m6Q.js";import{A as Ne,M as Me,L as Ye,E as Ie,a as ie,b as at,C as K,c as es,d as rs,U as Es,e as ls,f as xs,g as be,H as ys,B as us,G as Pe,h as ve,P as rt,S as De,i as He,j as fe,k as me,l as ds,m as W,T as re,n as G,o as Z,p as bs,F as te,q as we,r as Re,s as le,t as $e,u as Ee,v as fs,w as lt,V as Qe,x as nt,y as Ke,z as Ce,D as it,I as _s,J as Ls,K as $s,N as ot,O as cs,Q as ct,Z as Is,X as oe,R as Q,W as ts,Y as dt,_ as Fe,$ as mt,a0 as Ms,a1 as as,a2 as Be,a3 as Rs,a4 as Fs,a5 as Ze,a6 as xt,a7 as xe,a8 as ns,a9 as ut,aa as ht,ab as Os,ac as gt,ad as qe,ae as zs,af as We,ag as Us,ah as pt,ai as bt,aj as ft,ak as jt,al as Ns,am as yt,an as Nt,ao as vt,ap as wt,aq as St,ar as kt,as as Ct,at as At,au as Tt,av as Pt,aw as Gs,ax as Dt,ay as Et,az as vs,aA as _t,aB as Lt,aC as ws,aD as $t,aE as It}from"./ui-BkAeax9J.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&n(x)}).observe(document,{childList:!0,subtree:!0});function t(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(u){if(u.ep)return;u.ep=!0;const d=t(u);fetch(u.href,d)}})();var Bs={exports:{}},ms={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=r,Rt=Symbol.for("react.element"),Ft=Symbol.for("react.fragment"),Ot=Object.prototype.hasOwnProperty,zt=Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ut={key:!0,ref:!0,__self:!0,__source:!0};function qs(s,a,t){var n,u={},d=null,x=null;t!==void 0&&(d=""+t),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(x=a.ref);for(n in a)Ot.call(a,n)&&!Ut.hasOwnProperty(n)&&(u[n]=a[n]);if(s&&s.defaultProps)for(n in a=s.defaultProps,a)u[n]===void 0&&(u[n]=a[n]);return{$$typeof:Rt,type:s,key:d,ref:x,props:u,_owner:zt.current}}ms.Fragment=Ft;ms.jsx=qs;ms.jsxs=qs;Bs.exports=ms;var e=Bs.exports,Vs,Ss=tt;Vs=Ss.createRoot,Ss.hydrateRoot;const M="https://your-backend-name.onrender.com/api",O={AUTH:{LOGIN:`${M}/auth/login`,GOOGLE_LOGIN:`${M}/auth/google/login`,REGISTER:`${M}/auth/register`,PROFILE:`${M}/auth/profile`,CHANGE_PASSWORD:`${M}/auth/change-password`,LOGOUT:`${M}/auth/logout`,LOGOUT_ALL:`${M}/auth/logout-all`,REFRESH:`${M}/auth/refresh`,VALIDATE_TOKEN:`${M}/auth/validate-token`,FORGOT_PASSWORD:`${M}/auth/forgot-password`,RESET_PASSWORD:`${M}/auth/reset-password`,VERIFY_RESET_TOKEN:`${M}/auth/verify-reset-token`,CLEANUP_TOKENS:`${M}/auth/cleanup-tokens`,TOKEN_STATS:`${M}/auth/token-stats`},COURSES:{BASE:`${M}/courses`,BY_ID:s=>`${M}/courses/${s}`,ENROLL:s=>`${M}/courses/${s}/enroll`,UNENROLL:s=>`${M}/courses/${s}/unenroll`,MATERIALS:s=>`${M}/courses/${s}/materials`,STUDENTS:s=>`${M}/courses/${s}/students`},ASSIGNMENTS:{BASE:`${M}/assignments`,BY_ID:s=>`${M}/assignments/${s}`,SUBMIT:s=>`${M}/assignments/${s}/submit`,GRADE:s=>`${M}/assignments/submissions/${s}/grade`},QUIZZES:{BASE:`${M}/quizzes`,BY_ID:s=>`${M}/quizzes/${s}`,ATTEMPT:s=>`${M}/quizzes/${s}/attempt`,ATTEMPTS:s=>`${M}/quizzes/${s}/attempts`},USERS:{BASE:`${M}/users`,BY_ID:s=>`${M}/users/${s}`,DEACTIVATE:s=>`${M}/users/${s}/deactivate`,ACTIVATE:s=>`${M}/users/${s}/activate`,RESET_PASSWORD:s=>`${M}/users/${s}/reset-password`,BULK_IMPORT:`${M}/users/bulk-import`,STATISTICS:`${M}/users/statistics`},AI:{CHAT:`${M}/ai/chat`,CHAT_WELCOME:`${M}/ai/chat/welcome`,SUMMARIZE:`${M}/ai/summarize`,GENERATE_QUIZ:`${M}/ai/generate-quiz`,RECOMMENDATIONS:`${M}/ai/recommendations`,CHAT_HISTORY:`${M}/ai/chat-history`,LEARNING_PATH:`${M}/ai/learning-path`},ANALYTICS:{DASHBOARD:`${M}/analytics/dashboard`,COURSE:s=>`${M}/analytics/course/${s}`,STUDENT:s=>`${M}/analytics/student/${s}`,SYSTEM:`${M}/analytics/system`},LEARNER_ANALYTICS:{PERFORMANCE_ANALYSIS:`${M}/learner-analytics/performance-analysis`,STUDENT_RECOMMENDATIONS:`${M}/learner-analytics/student-recommendations`,PERFORMANCE_ALERTS:`${M}/learner-analytics/performance-alerts`},NOTIFICATIONS:{BASE:`${M}/notifications`,BY_ID:s=>`${M}/notifications/${s}`,MARK_READ:s=>`${M}/notifications/${s}/read`,MARK_ALL_READ:`${M}/notifications/read-all`,UNREAD_COUNT:`${M}/notifications/unread-count`},HEALTH:`${M}/health`},Ys={timeout:3e4,headers:{"Content-Type":"application/json"}},q={getAccessToken:()=>localStorage.getItem("access_token"),getRefreshToken:()=>localStorage.getItem("refresh_token"),setTokens:(s,a)=>{localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",a)},clearTokens:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},isTokenExpired:s=>{try{const a=JSON.parse(atob(s.split(".")[1]));return Date.now()>=a.exp*1e3}catch{return!0}}},hs=()=>{const s=q.getAccessToken();return s?{Authorization:`Bearer ${s}`}:{}};class Hs{constructor(a=M){this.isRefreshing=!1,this.refreshPromise=null,this.baseURL=a}async refreshToken(){const a=q.getRefreshToken();if(!a)throw new Error("No refresh token available");try{const t=await fetch(`${this.baseURL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({refresh_token:a})});if(!t.ok)throw new Error("Token refresh failed");const n=await t.json();q.setTokens(n.access_token,n.refresh_token)}catch(t){throw q.clearTokens(),window.dispatchEvent(new CustomEvent("auth:token-expired")),t}}async request(a,t={}){const n=a.startsWith("http")?a:`${this.baseURL}${a}`,u=q.getAccessToken();u&&q.isTokenExpired(u)&&!a.includes("/auth/refresh")&&(this.isRefreshing||(this.isRefreshing=!0,this.refreshPromise=this.refreshToken().finally(()=>{this.isRefreshing=!1,this.refreshPromise=null})),this.refreshPromise&&await this.refreshPromise);const d={...Ys.headers,...hs(),...t.headers||{}},x={...t,headers:d};try{const b=await fetch(n,x);if(!b.ok){const i=await b.json().catch(()=>({}));if(b.status===401&&i.code==="TOKEN_EXPIRED"&&!a.includes("/auth/refresh"))try{await this.refreshToken();const c={...x.headers||{},...hs()},g={...x,headers:c},N=await fetch(n,g);if(N.ok)return await N.json()}catch{}throw new Error(i.error||`HTTP ${b.status}: ${b.statusText}`)}return await b.json()}catch(b){throw console.error("API Request failed:",b),b}}async get(a){return this.request(a,{method:"GET"})}async post(a,t){return this.request(a,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(a,t){return this.request(a,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(a){return this.request(a,{method:"DELETE"})}}const z=new Hs,je={login:async(s,a)=>{const t=await z.post(O.AUTH.LOGIN,{email:s,password:a});return t.access_token&&t.refresh_token&&q.setTokens(t.access_token,t.refresh_token),t},googleLogin:async(s,a="student")=>{const t=await z.post(O.AUTH.GOOGLE_LOGIN,{credential:s,role:a});return t.access_token&&t.refresh_token&&q.setTokens(t.access_token,t.refresh_token),t},register:async s=>{const a=await z.post(O.AUTH.REGISTER,s);return a.access_token&&a.refresh_token&&q.setTokens(a.access_token,a.refresh_token),a},logout:async()=>{try{await z.post(O.AUTH.LOGOUT)}finally{q.clearTokens()}},logoutAll:async()=>{try{await z.post(O.AUTH.LOGOUT_ALL)}finally{q.clearTokens()}},refreshToken:async()=>{const s=q.getRefreshToken();if(!s)throw new Error("No refresh token available");const a=await z.post(O.AUTH.REFRESH,{refresh_token:s});return a.access_token&&a.refresh_token&&q.setTokens(a.access_token,a.refresh_token),a},validateToken:()=>z.get(O.AUTH.VALIDATE_TOKEN),getProfile:()=>z.get(O.AUTH.PROFILE),updateProfile:s=>z.put(O.AUTH.PROFILE,s),changePassword:(s,a)=>z.post(O.AUTH.CHANGE_PASSWORD,{current_password:s,new_password:a}),forgotPassword:s=>z.post(O.AUTH.FORGOT_PASSWORD,{email:s}),resetPassword:(s,a)=>z.post(O.AUTH.RESET_PASSWORD,{token:s,new_password:a}),verifyResetToken:s=>z.post(O.AUTH.VERIFY_RESET_TOKEN,{token:s}),cleanupTokens:()=>z.post(O.AUTH.CLEANUP_TOKENS),getTokenStats:()=>z.get(O.AUTH.TOKEN_STATS)},Ue={chat:s=>z.post(O.AI.CHAT,{message:s}),getWelcomeMessage:()=>z.get(O.AI.CHAT_WELCOME),summarize:(s,a="text")=>z.post(O.AI.SUMMARIZE,{content:s,type:a}),generateQuiz:(s,a,t=5,n="medium")=>z.post(O.AI.GENERATE_QUIZ,{content:s,course_id:a,num_questions:t,difficulty:n}),getRecommendations:()=>z.get(O.AI.RECOMMENDATIONS),getChatHistory:(s=1,a=20)=>z.get(`${O.AI.CHAT_HISTORY}?page=${s}&limit=${a}`),generateLearningPath:(s,a="month")=>z.post(O.AI.LEARNING_PATH,{goal:s,timeframe:a})},Ve={getPerformanceAnalysis:(s,a)=>{const t=new URLSearchParams;s&&t.append("course_id",s),a&&t.append("type",a);const n=t.toString();return z.get(`${O.LEARNER_ANALYTICS.PERFORMANCE_ANALYSIS}${n?`?${n}`:""}`)},getStudentRecommendations:s=>z.get(`${O.LEARNER_ANALYTICS.STUDENT_RECOMMENDATIONS}?student_id=${s}`),getPerformanceAlerts:()=>z.get(O.LEARNER_ANALYTICS.PERFORMANCE_ALERTS)},Ge={getAll:(s=!1,a=50)=>z.get(`${O.NOTIFICATIONS.BASE}?unread_only=${s}&limit=${a}`),markAsRead:s=>z.post(O.NOTIFICATIONS.MARK_READ(s)),markAllAsRead:()=>z.post(O.NOTIFICATIONS.MARK_ALL_READ),getUnreadCount:()=>z.get(O.NOTIFICATIONS.UNREAD_COUNT),delete:s=>z.delete(O.NOTIFICATIONS.BY_ID(s))},Ws=Object.freeze(Object.defineProperty({__proto__:null,API_ENDPOINTS:O,ApiClient:Hs,HTTP_CONFIG:Ys,aiAPI:Ue,apiClient:z,authAPI:je,getAuthHeaders:hs,learnerAnalyticsAPI:Ve,notificationsAPI:Ge,tokenManager:q},Symbol.toStringTag,{value:"Module"})),Js=r.createContext(void 0),V=()=>{const s=r.useContext(Js);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Gt=({children:s})=>{const[a,t]=r.useState(null),[n,u]=r.useState(!0),d=!!a&&!!q.getAccessToken(),x=async()=>{if(!q.getAccessToken())return!1;try{return await je.validateToken(),!0}catch(p){return console.error("Token validation failed:",p),!1}},b=async()=>{const v=q.getAccessToken();if(!v){u(!1);return}try{if(q.isTokenExpired(v))try{await je.refreshToken()}catch(m){console.error("Token refresh failed:",m),q.clearTokens(),u(!1);return}const p=await je.getProfile();t(p.user)}catch(p){console.error("Failed to load user:",p),q.clearTokens()}finally{u(!1)}},i=async(v,p)=>{try{const m=await je.login(v,p);t(m.user)}catch(m){throw console.error("Login failed:",m),m}},c=async(v,p="student")=>{try{const m=await je.googleLogin(v,p);t(m.user)}catch(m){throw console.error("Google login failed:",m),m}},g=async v=>{try{const p=await je.register(v);t(p.user)}catch(p){throw console.error("Registration failed:",p),p}},N=async()=>{try{await je.logout()}catch(v){console.error("Logout API call failed:",v)}finally{t(null),q.clearTokens()}},j=async()=>{try{await je.logoutAll()}catch(v){console.error("Logout all API call failed:",v)}finally{t(null),q.clearTokens()}},A=async()=>{try{const v=await je.getProfile();t(v.user)}catch(v){throw console.error("Failed to refresh user:",v),v}};r.useEffect(()=>{const v=()=>{console.log("Token expired, logging out user"),t(null),q.clearTokens(),window.location.href="/login"};return window.addEventListener("auth:token-expired",v),()=>{window.removeEventListener("auth:token-expired",v)}},[]),r.useEffect(()=>{b()},[]),r.useEffect(()=>{if(!d)return;const v=setInterval(async()=>{await x()||(console.log("Token validation failed, logging out user"),t(null),q.clearTokens())},5*60*1e3);return()=>clearInterval(v)},[d]);const y={user:a,isAuthenticated:d,isLoading:n,login:i,googleLogin:c,register:g,logout:N,logoutAll:j,refreshUser:A,checkTokenValidity:x};return e.jsx(Js.Provider,{value:y,children:s})},Qs=r.createContext(void 0),_e=()=>{const s=r.useContext(Qs);if(s===void 0)throw new Error("useLMS must be used within an LMSProvider");return s},Bt=({children:s})=>{const[a,t]=r.useState(!0),[n,u]=r.useState(null),[d,x]=r.useState([]),[b,i]=r.useState(!0);ss.useEffect(()=>{c()},[]);const c=async()=>{var A;try{const y=localStorage.getItem("access_token")||localStorage.getItem("token");if(!y){i(!1);return}const v=await fetch("http://localhost:5000/api/courses",{headers:{Authorization:`Bearer ${y}`}});if(v.ok){const m=((A=(await v.json()).courses)==null?void 0:A.map(w=>{var l;return{id:w._id||w.id,title:w.title,description:w.description,instructor:w.instructor||"Instructor",progress:w.progress||0,totalLessons:w.total_lessons||((l=w.modules)==null?void 0:l.length)||0,completedLessons:w.completed_lessons||0,thumbnail:w.thumbnail||"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",category:w.category,difficulty:w.difficulty||"Beginner",rating:w.rating||4.5,students:w.students||0,createdAt:w.created_at,duration:w.duration}}))||[];x(m)}}catch(y){console.error("Failed to fetch courses:",y)}finally{i(!1)}},g=[],N=[],j=d;return e.jsx(Qs.Provider,{value:{courses:j,assignments:g,announcements:N,sidebarOpen:a,setSidebarOpen:t,selectedCourse:n,setSelectedCourse:u},children:s})},qt=({role:s="student"})=>{const{googleLogin:a}=V(),t=()=>{typeof window<"u"&&window.google?(window.google.accounts.id.initialize({client_id:"YOUR_GOOGLE_CLIENT_ID",callback:async n=>{try{await a(n.credential,s)}catch(u){console.error("Google login failed:",u)}}}),window.google.accounts.id.prompt()):console.error("Google Sign-In not loaded")};return e.jsxs("button",{type:"button",onClick:t,className:"flex items-center justify-center px-3 sm:px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors w-full",children:[e.jsxs("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.17.81-.67z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm font-medium text-gray-700",children:"Google"})]})},Vt=({onToggleForm:s,onForgotPassword:a})=>{const[t,n]=r.useState(""),[u,d]=r.useState(""),[x,b]=r.useState("student"),[i,c]=r.useState(!1),[g,N]=r.useState(""),[j,A]=r.useState(!1),{login:y,isLoading:v}=V(),p=async w=>{w.preventDefault(),N("");try{await y(t,u,x)}catch{N("Invalid email or password")}},m=(w,l)=>{n(w),d(l),w.includes("student")?b("student"):w.includes("teacher")?b("teacher"):w.includes("superadmin")&&b("super_admin")};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Sign in to continue your learning journey"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4 sm:space-y-6",children:[g&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[e.jsx(Ne,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:g})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:t,onChange:w=>n(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Login as"}),e.jsxs("select",{id:"role",value:x,onChange:w=>b(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",required:!0,children:[e.jsx("option",{value:"student",children:"Student"}),e.jsx("option",{value:"teacher",children:"Teacher"}),e.jsx("option",{value:"super_admin",children:"Super Administrator"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("button",{type:"button",onClick:a,className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:i?"text":"password",value:u,onChange:w=>d(w.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:i?e.jsx(Ie,{}):e.jsx(ie,{})})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",checked:j,onChange:w=>A(w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]})}),e.jsx("button",{type:"submit",disabled:v,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:v?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-5 w-5"}),"Sign In"]})})]}),e.jsxs("div",{className:"relative my-4 sm:my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-xs sm:text-sm",children:e.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx(qt,{role:x}),e.jsxs("button",{type:"button",disabled:!0,className:"flex items-center justify-center px-3 sm:px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed opacity-60",children:[e.jsx("svg",{className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"#1877F2",d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.407c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385c5.737-.9 10.125-5.864 10.125-11.854z"})}),e.jsx("span",{className:"ml-1 sm:ml-2 text-xs sm:text-sm font-medium text-gray-700",children:"Facebook"})]})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 sm:mb-3",children:[e.jsx(K,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),e.jsx("p",{className:"text-xs sm:text-sm font-medium text-blue-900",children:"Try Demo Accounts"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("button",{type:"button",className:"text-left p-2 bg-white border border-gray-300 rounded-lg hover:bg-blue-50 transition-colors",onClick:()=>m("student01@datams.edu","Stud@2025"),children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Student Account"}),e.jsx("div",{className:"text-xs text-blue-700 truncate",children:"student01@datams.edu"})]}),e.jsxs("button",{type:"button",className:"text-left p-2 bg-white border border-gray-300 rounded-lg hover:bg-blue-50 transition-colors",onClick:()=>m("teacher01@datams.edu","Teach@2025"),children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Teacher Account"}),e.jsx("div",{className:"text-xs text-blue-700 truncate",children:"teacher01@datams.edu"})]}),e.jsxs("button",{type:"button",className:"text-left p-2 bg-white border border-gray-300 rounded-lg hover:bg-blue-50 transition-colors",onClick:()=>m("superadmin@datams.edu","Admin@123456"),children:[e.jsx("p",{className:"text-xs font-medium text-blue-900",children:"Super Administrator"}),e.jsx("div",{className:"text-xs text-blue-700 truncate",children:"superadmin@datams.edu"})]})]})]}),x!=="super_admin"&&e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign up for free"})]}),x==="super_admin"&&e.jsx("p",{className:"text-center text-sm text-gray-500 mt-6 italic",children:"Super Administrator accounts are predefined by the system."})]})},Yt=({onToggleForm:s})=>{const[a,t]=r.useState(1),[n,u]=r.useState([]),[d,x]=r.useState(""),[b,i]=r.useState(""),[c,g]=r.useState(""),[N,j]=r.useState(""),[A,y]=r.useState(""),[v,p]=r.useState("student"),[m,w]=r.useState(null),[l,o]=r.useState(!1),[S,h]=r.useState(!1),[f,D]=r.useState(""),[I,C]=r.useState(""),[Y,ue]=r.useState(""),[H,pe]=r.useState(""),[Ae,Oe]=r.useState(""),[Se,Le]=r.useState(""),[E,R]=r.useState(""),[ge,J]=r.useState(!1),{register:X,isLoading:k}=V(),U=(()=>{const T=[{id:1,title:"Role Selection",description:"Choose your role"},{id:2,title:"Basic Info",description:"Personal details"},{id:3,title:"Account Security",description:"Password setup"}];return v==="student"?[...T,{id:4,title:"Academic Info",description:"Student details"},{id:5,title:"Profile Picture",description:"Optional photo"}]:v==="teacher"?[...T,{id:4,title:"Professional Info",description:"Faculty details"},{id:5,title:"Profile Picture",description:"Optional photo"}]:[...T,{id:4,title:"Profile Picture",description:"Optional photo"}]})(),ee=U.length,B=["Computer Science","Data Science","Information Technology","Electronics","Mechanical Engineering","Civil Engineering","Business Administration","Mathematics","Physics","Chemistry"],ne=["1st Year","2nd Year","3rd Year","4th Year","Final Year"],he=["1st Semester","2nd Semester","3rd Semester","4th Semester","5th Semester","6th Semester","7th Semester","8th Semester"],Te=["Assistant Professor","Associate Professor","Professor","Lecturer","Senior Lecturer","Visiting Faculty","Guest Lecturer","Department Head"],P=T=>{var ze;const de=(ze=T.target.files)==null?void 0:ze[0];de&&w(de)},_=T=>{switch(T){case 1:return v?null:"Please select your role";case 2:return d.trim()?b.trim()?c.trim()?null:"Phone number is required":"Email is required":"Full name is required";case 3:return N.length<8?"Password must be at least 8 characters":N!==A?"Passwords do not match":null;case 4:if(v==="student"){if(!f.trim())return"Roll number is required";if(!I)return"Department is required";if(!Y)return"Year is required";if(!H)return"Semester is required"}else if(v==="teacher"){if(!Ae.trim())return"Employee ID is required";if(!I)return"Department is required";if(!Se)return"Designation is required"}return null;case 5:return null;default:return null}},L=()=>{for(let T=1;T<=ee;T++){const de=_(T);if(de)return de}return null},se=()=>{const T=_(a);if(T){R(T);return}R(""),n.includes(a)||u([...n,a]),a<ee&&t(a+1)},F=()=>{a>1&&(t(a-1),R(""))},ce=T=>{(n.includes(T)||T===a)&&(t(T),R(""))},Xe=async()=>{R("");const T=L();if(T){R(T);return}try{const de={name:d,email:b,phone:c,password:N,role:v,...v==="student"&&{rollNumber:f,department:I,year:Y,semester:H},...v==="teacher"&&{employeeId:Ae,department:I,designation:Se}};await X(de),J(!0)}catch(de){R(de.message||"Registration failed. Please try again.")}},Je=()=>{switch(a){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Choose Your Role"}),e.jsx("p",{className:"text-gray-600",children:"Select how you'll be using our platform"})]}),e.jsx("div",{className:"space-y-4",children:[{value:"student",title:"Student",description:"Access courses, assignments, and learning materials",icon:Pe},{value:"teacher",title:"Teacher",description:"Create courses, manage students, and track progress",icon:ve}].map(({value:T,title:de,description:ze,icon:is})=>e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${v===T?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"radio",name:"role",value:T,checked:v===T,onChange:ae=>p(ae.target.value),className:"sr-only"}),e.jsx(is,{className:`h-6 w-6 mr-4 ${v===T?"text-blue-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:de}),e.jsx("div",{className:"text-sm text-gray-500",children:ze})]}),v===T&&e.jsx(es,{className:"h-5 w-5 text-blue-600 ml-auto"})]},T))})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Basic Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about yourself"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"name",type:"text",value:d,onChange:T=>x(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:b,onChange:T=>i(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(rt,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"phone",type:"tel",value:c,onChange:T=>g(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your phone number",required:!0})]})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Account Security"}),e.jsx("p",{className:"text-gray-600",children:"Create a secure password for your account"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:l?"text":"password",value:N,onChange:T=>j(T.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your password (min 8 characters)",required:!0}),e.jsx("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-3 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:l?e.jsx(Ie,{}):e.jsx(ie,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"confirmPassword",type:S?"text":"password",value:A,onChange:T=>y(T.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Confirm your password",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!S),className:"absolute right-3 top-3 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:S?e.jsx(Ie,{}):e.jsx(ie,{})})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{className:`flex items-center ${N.length>=8?"text-green-600":""}`,children:[e.jsx(es,{className:`h-4 w-4 mr-2 ${N.length>=8?"text-green-600":"text-gray-400"}`}),"At least 8 characters"]}),e.jsxs("li",{className:`flex items-center ${N===A&&N?"text-green-600":""}`,children:[e.jsx(es,{className:`h-4 w-4 mr-2 ${N===A&&N?"text-green-600":"text-gray-400"}`}),"Passwords match"]})]})]})]});case 4:return v==="student"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Academic Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your academic details"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rollNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enrollment Number / Roll Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(ys,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"rollNumber",type:"text",value:f,onChange:T=>D(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your roll number",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department / Course"}),e.jsxs("div",{className:"relative",children:[e.jsx(us,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"department",value:I,onChange:T=>C(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),B.map(T=>e.jsx("option",{value:T,children:T},T))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"year",value:Y,onChange:T=>ue(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Year"}),ne.map(T=>e.jsx("option",{value:T,children:T},T))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"semester",className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),e.jsxs("select",{id:"semester",value:H,onChange:T=>pe(T.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Semester"}),he.map(T=>e.jsx("option",{value:T,children:T},T))]})]})]})]}):v==="teacher"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Professional Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your professional details"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employeeId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID / Faculty ID"}),e.jsxs("div",{className:"relative",children:[e.jsx(ys,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"employeeId",type:"text",value:Ae,onChange:T=>Oe(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your employee ID",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(us,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"department",value:I,onChange:T=>C(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),B.map(T=>e.jsx("option",{value:T,children:T},T))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"designation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),e.jsxs("select",{id:"designation",value:Se,onChange:T=>Le(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Designation"}),Te.map(T=>e.jsx("option",{value:T,children:T},T))]})]})]})]}):null;case 5:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Profile Picture"}),e.jsx("p",{className:"text-gray-600",children:"Add a profile picture (optional)"})]}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"profilePicture",className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:m?e.jsxs("div",{className:"text-center",children:[e.jsx(xs,{className:"w-12 h-12 mb-4 text-green-500 mx-auto"}),e.jsx("p",{className:"text-lg text-green-600 font-medium mb-2",children:m.name}),e.jsx("p",{className:"text-sm text-gray-500",children:"Click to change"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(be,{className:"w-12 h-12 mb-4 text-gray-400 mx-auto"}),e.jsxs("p",{className:"mb-2 text-lg text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," profile picture"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG or JPEG (MAX. 5MB)"})]})}),e.jsx("input",{id:"profilePicture",type:"file",className:"hidden",accept:"image/*",onChange:P})]})}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"You can skip this step and add a profile picture later from your account settings."})})]});default:return null}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),e.jsx("p",{className:"text-gray-600",children:"Join our learning community"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:U.map((T,de)=>e.jsxs(ss.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"button",onClick:()=>ce(T.id),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-200 ${n.includes(T.id)?"bg-green-500 text-white cursor-pointer hover:bg-green-600":T.id===a?"bg-blue-500 text-white":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,disabled:!n.includes(T.id)&&T.id!==a,children:n.includes(T.id)?e.jsx(es,{className:"h-5 w-5"}):T.id}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("div",{className:`text-sm font-medium ${T.id===a?"text-blue-600":n.includes(T.id)?"text-green-600":"text-gray-500"}`,children:T.title}),e.jsx("div",{className:"text-xs text-gray-500",children:T.description})]})]}),de<U.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 ${n.includes(T.id)?"bg-green-500":"bg-gray-200"}`})]},T.id))})}),E&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:E}),ge&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-lg",children:"ðŸŽ‰ Registration successful! Welcome to EduNexa! You're being logged in..."}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 mb-6",children:Je()}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("button",{type:"button",onClick:F,disabled:a===1,className:`flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${a===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx(rs,{className:"h-5 w-5"}),"Previous"]}),a===ee?e.jsx("button",{type:"button",onClick:Xe,disabled:k,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:k?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"h-5 w-5"}),"Create Account"]})}):e.jsxs("button",{type:"button",onClick:se,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200",children:["Next",e.jsx(ls,{className:"h-5 w-5"})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Sign in here"})]})})]})},Ht=({onBackToLogin:s})=>{const[a,t]=r.useState(""),[n,u]=r.useState(!1),[d,x]=r.useState(!1),[b,i]=r.useState(""),c=async g=>{g.preventDefault(),i(""),u(!0);try{await new Promise(N=>setTimeout(N,2e3)),x(!0)}catch{i("Failed to send reset email. Please try again.")}finally{u(!1)}};return d?e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(K,{className:"h-8 w-8 text-green-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-gray-600",children:["We've sent a password reset link to ",e.jsx("strong",{children:a})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Didn't receive the email?"}),e.jsxs("ul",{className:"space-y-1 text-blue-700",children:[e.jsx("li",{children:"â€¢ Check your spam or junk folder"}),e.jsx("li",{children:"â€¢ Make sure you entered the correct email address"}),e.jsx("li",{children:"â€¢ The link will expire in 1 hour"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>{x(!1),t("")},className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),"Send Another Email"]}),e.jsxs("button",{onClick:s,className:"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(He,{className:"h-5 w-5"}),"Back to Login"]})]})]}):e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600",children:"No worries! Enter your email address and we'll send you a reset link."})]}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[b&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[e.jsx(Ne,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:b})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"email",type:"email",value:a,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter your email address",required:!0})]})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:n?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-5 w-5"}),"Send Reset Link"]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:s,className:"text-blue-600 hover:text-blue-700 font-medium transition-colors flex items-center justify-center gap-2 mx-auto",children:[e.jsx(He,{className:"h-4 w-4"}),"Back to Login"]})})]})},Wt=({token:s,onSuccess:a,onError:t})=>{const[n,u]=r.useState(""),[d,x]=r.useState(""),[b,i]=r.useState(!1),[c,g]=r.useState(!1),[N,j]=r.useState(!1),[A,y]=r.useState(!0),[v,p]=r.useState(!1),[m,w]=r.useState(""),[l,o]=r.useState(""),S=[{regex:/.{8,}/,text:"At least 8 characters"},{regex:/[A-Z]/,text:"One uppercase letter"},{regex:/[a-z]/,text:"One lowercase letter"},{regex:/\d/,text:"One number"},{regex:/[!@#$%^&*(),.?":{}|<>]/,text:"One special character"}];r.useEffect(()=>{h()},[s]);const h=async()=>{try{await new Promise(D=>setTimeout(D,1e3)),p(!0),w("user@example.com")}catch{t("Invalid or expired reset token")}finally{y(!1)}},f=async D=>{if(D.preventDefault(),o(""),n!==d){o("Passwords do not match");return}if(!S.every(I=>I.regex.test(n))){o("Password does not meet all requirements");return}j(!0);try{await new Promise(I=>setTimeout(I,2e3)),a()}catch{o("Failed to reset password. Please try again.")}finally{j(!1)}};return A?e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verifying reset token..."})]})}):v?e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(fe,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset Password"}),e.jsxs("p",{className:"text-gray-600",children:["Create a new password for ",e.jsx("strong",{children:m})]})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[l&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg flex items-center gap-3",children:[e.jsx(Ne,{className:"h-5 w-5 flex-shrink-0"}),e.jsx("span",{children:l})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"password",type:b?"text":"password",value:n,onChange:D=>u(D.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Enter new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>i(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:b?e.jsx(Ie,{}):e.jsx(ie,{})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{id:"confirmPassword",type:c?"text":"password",value:d,onChange:D=>x(D.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-white",placeholder:"Confirm new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 hover:text-gray-600 transition-colors",children:c?e.jsx(Ie,{}):e.jsx(ie,{})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Password Requirements:"}),e.jsx("div",{className:"space-y-2",children:S.map((D,I)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${D.regex.test(n)?"bg-green-100":"bg-gray-200"}`,children:D.regex.test(n)&&e.jsx(K,{className:"w-3 h-3 text-green-600"})}),e.jsx("span",{className:`text-sm ${D.regex.test(n)?"text-green-700":"text-gray-600"}`,children:D.text})]},I))})]}),e.jsx("button",{type:"submit",disabled:N||!S.every(D=>D.regex.test(n)),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:N?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-5 w-5"}),"Reset Password"]})})]})]}):e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ne,{className:"h-8 w-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This password reset link is invalid or has expired. Please request a new one."}),e.jsx("button",{onClick:()=>window.location.href="/auth",className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Login"})]})})},Jt=({onBackToLanding:s})=>{const[a,t]=r.useState("login"),[n,u]=r.useState(""),d=[{icon:me,title:"AI-Powered Learning",description:"Personalized learning paths powered by advanced AI"},{icon:re,title:"Progress Analytics",description:"Real-time progress tracking and detailed insights"},{icon:G,title:"Interactive Content",description:"Engaging multimedia courses and assessments"},{icon:Z,title:"Achievements",description:"24/7 AI teaching assistant and community support"}],x=[{name:"Sarah Johnson",role:"Data Science Student",content:"EduNexa transformed my learning experience completely!",rating:5},{name:"Michael Chen",role:"Software Engineer",content:"The AI recommendations are incredibly accurate.",rating:5}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-green-50",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between p-6",children:[s&&e.jsxs("button",{onClick:s,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(He,{className:"h-4 w-4"}),"Back to Home"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-xl",children:e.jsx(me,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-green-600 p-2 rounded-xl",children:e.jsx(Pe,{className:"h-5 w-5 text-white"})})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-gray-500",children:"AI-Powered Learning"})]})]})]})}),e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 pt-20 pb-8",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-4 leading-tight",children:["Welcome to the",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-green-600 bg-clip-text text-transparent",children:" Future of Learning"})]}),e.jsx("p",{className:"text-xl text-gray-600 leading-relaxed",children:"Join thousands of students transforming their education with AI-powered personalized learning experiences."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"50K+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"1.2K+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Expert Instructors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"98%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]})]}),e.jsx("div",{className:"space-y-4",children:d.map((b,i)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white/50 rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg flex-shrink-0",children:e.jsx(b.icon,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:b.title}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description})]})]},i))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"What our students say:"}),x.map((b,i)=>e.jsxs("div",{className:"bg-white/70 rounded-xl p-4 backdrop-blur-sm",children:[e.jsx("div",{className:"flex items-center gap-1 mb-2",children:[...Array(b.rating)].map((c,g)=>e.jsx(ds,{className:"h-4 w-4 text-yellow-500 fill-current"},g))}),e.jsxs("p",{className:"text-gray-700 text-sm mb-2 italic",children:['"',b.content,'"']}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:b.name})," - ",b.role]})]},i))]}),e.jsx("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:"Trusted by 50,000+ students"})]})})]})}),e.jsxs("div",{className:"w-full max-w-md mx-auto lg:max-w-none",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 sm:p-8 lg:p-10 border border-white/20 backdrop-blur-sm",children:[e.jsxs("div",{className:"lg:hidden text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-xl",children:e.jsx(me,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-green-600 p-2 rounded-xl",children:e.jsx(Pe,{className:"h-5 w-5 text-white"})})]}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1",children:"Welcome to EduNexa"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-Powered Learning Platform"})]}),a==="login"&&e.jsx(Vt,{onToggleForm:()=>t("register"),onForgotPassword:()=>t("forgot-password")}),a==="register"&&e.jsx(Yt,{onToggleForm:()=>t("login")}),a==="forgot-password"&&e.jsx(Ht,{onBackToLogin:()=>t("login")}),a==="reset-password"&&e.jsx(Wt,{token:n,onSuccess:()=>{alert("Password reset successfully! Please login with your new password."),t("login")},onError:b=>{alert(b),t("forgot-password")}}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"text-center text-xs sm:text-sm text-gray-500",children:[e.jsx("p",{className:"mb-2",children:"By continuing, you agree to our Terms of Service and Privacy Policy"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 sm:gap-4 flex-wrap",children:[e.jsx("span",{children:"Secure & Private"}),e.jsx("span",{children:"Available Worldwide"})]})]})})]}),e.jsx("div",{className:"lg:hidden mt-6 space-y-3 max-w-md mx-auto",children:d.slice(0,2).map((b,i)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-white/70 rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg flex-shrink-0",children:e.jsx(b.icon,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:b.title}),e.jsx("p",{className:"text-xs text-gray-600",children:b.description})]})]},i))})]})]})})]})},ks=()=>{const{sidebarOpen:s,setSidebarOpen:a}=_e(),{user:t}=V(),[n,u]=r.useState(0),[d,x]=r.useState(0),[b,i]=r.useState(0),[c,g]=r.useState(!1);r.useEffect(()=>{const j=()=>{g(window.innerWidth<1024)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),r.useEffect(()=>{const j=async()=>{try{const A=await Ge.getUnreadCount();u(A.unread_count||0),x(0),i(0)}catch(A){console.error("Failed to fetch counts:",A)}};if(t){j();const A=setInterval(j,3e4);return()=>clearInterval(A)}},[t]);const N=[{icon:bs,label:"Dashboard",href:"/dashboard"},{icon:G,label:"My Courses",href:"/courses"},{icon:te,label:"Assignments",href:"/assignments",badge:b||void 0},{icon:we,label:"Discussions",href:"/discussions",badge:d||void 0},{icon:Re,label:"My Progress",href:"/analytics"},{icon:me,label:"AI Assistant",href:"/ai-assistant"},{icon:le,label:"Schedule",href:"/schedule"},{icon:$e,label:"Achievements",href:"/achievements"},{icon:Ee,label:"Notifications",href:"/notifications",badge:n||void 0},{icon:ve,label:"Profile",href:"/profile"},{icon:fs,label:"Settings",href:"/settings"}];return e.jsxs(e.Fragment,{children:[c&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>a(!1)}),e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-lg transition-all duration-300 ${c?s?"translate-x-0 w-64":"-translate-x-full w-64":s?"w-64":"w-16"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-200",children:[(s||c)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-1.5 sm:p-2 rounded-lg",children:e.jsx(me,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base sm:text-lg font-bold text-gray-900",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Student Portal"})]})]}),e.jsx("button",{onClick:()=>a(!s),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s?e.jsx(rs,{className:"h-5 w-5 text-gray-600"}):e.jsx(ls,{className:"h-5 w-5 text-gray-600"})})]}),e.jsx("nav",{className:"flex-1 px-2 sm:px-4 py-4 sm:py-6 space-y-1 sm:space-y-2 overflow-y-auto",children:N.map((j,A)=>e.jsxs("a",{href:j.href,onClick:()=>c&&a(!1),className:"flex items-center gap-3 px-2 sm:px-3 py-2.5 sm:py-3 text-sm sm:text-base text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition-all duration-200 group",children:[e.jsx(j.icon,{className:"h-5 w-5 flex-shrink-0"}),(s||c)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:j.label}),j.badge&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-0.5 sm:py-1 rounded-full min-w-[20px] text-center",children:j.badge>9?"9+":j.badge})]})]},A))}),(s||c)&&e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white text-sm sm:text-base font-medium",children:t==null?void 0:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:"Student"})]})]})})]})})]})},Qt=()=>{const{sidebarOpen:s,setSidebarOpen:a}=_e(),{user:t}=V(),n=[{icon:bs,label:"Dashboard",href:"/dashboard"},{icon:G,label:"My Courses",href:"/courses"},{icon:lt,label:"Create Course",href:"/courses/create"},{icon:Qe,label:"Video Management",href:"/videos"},{icon:te,label:"Assignments",href:"/assignments",badge:8},{icon:nt,label:"Grading",href:"/grading",badge:12},{icon:W,label:"My Students",href:"/students"},{icon:we,label:"Discussions",href:"/discussions",badge:4},{icon:Re,label:"Analytics",href:"/analytics"},{icon:me,label:"AI Assistant",href:"/ai-assistant"},{icon:le,label:"Schedule",href:"/schedule"},{icon:Ee,label:"Notifications",href:"/notifications",badge:3},{icon:ve,label:"Profile",href:"/profile"},{icon:fs,label:"Settings",href:"/settings"}];return e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-lg transition-all duration-300 ${s?"w-64":"w-16"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 p-2 rounded-lg",children:e.jsx(Pe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Portal"})]})]}),e.jsx("button",{onClick:()=>a(!s),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:s?e.jsx(rs,{className:"h-5 w-5 text-gray-600"}):e.jsx(ls,{className:"h-5 w-5 text-gray-600"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:n.map((u,d)=>e.jsxs("a",{href:u.href,className:"flex items-center gap-3 px-3 py-3 text-gray-700 rounded-lg hover:bg-green-50 hover:text-green-600 transition-all duration-200 group",children:[e.jsx(u.icon,{className:"h-5 w-5 flex-shrink-0"}),s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:u.label}),u.badge&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:u.badge})]})]},d))}),s&&e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium",children:t==null?void 0:t.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:"Teacher"})]})]})})]})})},Kt=()=>{const{sidebarOpen:s,setSidebarOpen:a}=_e(),{user:t}=V(),n=[{icon:bs,label:"Dashboard",href:"/dashboard",color:"purple"},{icon:W,label:"User Management",href:"/admin/users",badge:12,color:"blue"},{icon:it,label:"Role Management",href:"/admin/roles",color:"blue"},{icon:us,label:"Institutions",href:"/admin/institutions",color:"blue"},{icon:G,label:"Course Management",href:"/admin/courses",badge:5,color:"green"},{icon:te,label:"Content Approval",href:"/admin/content",badge:8,color:"green"},{icon:we,label:"Communication",href:"/admin/messages",color:"green"},{icon:_s,label:"System Health",href:"/admin/system",color:"red"},{icon:Ls,label:"Database Control",href:"/admin/database",color:"red"},{icon:$s,label:"Performance",href:"/admin/performance",color:"red"},{icon:ot,label:"Storage Management",href:"/admin/storage",color:"red"},{icon:fe,label:"Security Center",href:"/admin/security",badge:3,color:"yellow"},{icon:Ye,label:"Access Control",href:"/admin/access",color:"yellow"},{icon:Ce,label:"System Alerts",href:"/admin/alerts",badge:7,color:"yellow"},{icon:Re,label:"Global Analytics",href:"/admin/analytics",color:"indigo"},{icon:cs,label:"Usage Statistics",href:"/admin/usage",color:"indigo"},{icon:ct,label:"Billing & Revenue",href:"/admin/billing",color:"indigo"},{icon:me,label:"AI Control Center",href:"/admin/ai",color:"purple"},{icon:Is,label:"System Automation",href:"/admin/automation",color:"purple"},{icon:fs,label:"Global Settings",href:"/admin/settings",color:"gray"}],u=d=>{switch(d){case"blue":return"hover:bg-blue-50 hover:text-blue-600";case"green":return"hover:bg-green-50 hover:text-green-600";case"red":return"hover:bg-red-50 hover:text-red-600";case"yellow":return"hover:bg-yellow-50 hover:text-yellow-600";case"indigo":return"hover:bg-indigo-50 hover:text-indigo-600";case"purple":return"hover:bg-purple-50 hover:text-purple-600";default:return"hover:bg-gray-50 hover:text-gray-600"}};return e.jsx("div",{className:`fixed inset-y-0 left-0 z-50 bg-white shadow-lg transition-all duration-300 ${s?"w-64":"w-16"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-purple-900 to-indigo-900",children:[s&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 p-2 rounded-lg",children:e.jsx(Ke,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"EduNexa"}),e.jsx("p",{className:"text-xs text-purple-200",children:"Super Admin"})]})]}),e.jsx("button",{onClick:()=>a(!s),className:"p-2 rounded-lg hover:bg-purple-800 transition-colors",children:s?e.jsx(rs,{className:"h-5 w-5 text-white"}):e.jsx(ls,{className:"h-5 w-5 text-white"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:n.map((d,x)=>e.jsxs("a",{href:d.href,className:`flex items-center gap-3 px-3 py-2 text-gray-700 rounded-lg transition-all duration-200 group text-sm ${u(d.color)}`,children:[e.jsx(d.icon,{className:"h-4 w-4 flex-shrink-0"}),s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:d.label}),d.badge&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:d.badge})]})]},x))}),s&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-red-50",children:e.jsxs("button",{className:"w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Emergency Stop"]})}),s&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx(Ke,{className:"h-5 w-5 text-yellow-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t==null?void 0:t.name}),e.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Super Administrator"})]})]})})]})})},Zt=({className:s=""})=>{const{user:a}=V(),[t,n]=r.useState([]),[u,d]=r.useState(!1),[x,b]=r.useState(!1),[i,c]=r.useState(new Set),g=async()=>{if(!(!a||!["teacher","super_admin"].includes(a.role))){b(!0);try{const m=await Ve.getPerformanceAlerts();n(m.alerts||[])}catch(m){console.error("Failed to fetch learner alerts:",m)}finally{b(!1)}}};r.useEffect(()=>{g();const m=setInterval(g,5*60*1e3);return()=>clearInterval(m)},[a]);const N=(m,w)=>{switch(m){case"inactive":return e.jsx(Q,{className:"h-4 w-4"});case"academic":return e.jsx(ts,{className:"h-4 w-4"});case"performance":return e.jsx(Ce,{className:"h-4 w-4"});case"deadline":return e.jsx(Q,{className:"h-4 w-4"});default:return e.jsx(Ee,{className:"h-4 w-4"})}},j=m=>{switch(m){case"high":return"bg-red-50 border-red-200 text-red-800";case"medium":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"low":return"bg-blue-50 border-blue-200 text-blue-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},A=m=>{const w=`${t[m].student_id}-${t[m].type}-${t[m].created_at}`;c(l=>new Set([...l,w]))},y=t.filter((m,w)=>{const l=`${m.student_id}-${m.type}-${m.created_at}`;return!i.has(l)}),v=y.filter(m=>m.severity==="high"),p=y.length>0;return!a||!["teacher","super_admin"].includes(a.role)?null:e.jsxs("div",{className:`relative ${s}`,children:[e.jsxs("button",{onClick:()=>d(!u),className:`relative p-2 rounded-full transition-colors ${p?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Ee,{className:"h-5 w-5"}),p&&e.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:y.length>9?"9+":y.length})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Student Alerts"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(oe,{className:"h-5 w-5"})})]}),v.length>0&&e.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[v.length," high priority alert",v.length!==1?"s":""]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:x?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading alerts..."})]}):y.length>0?e.jsx("div",{className:"divide-y divide-gray-200",children:y.map((m,w)=>e.jsx("div",{className:`p-4 border-l-4 ${m.severity==="high"?"border-red-500":m.severity==="medium"?"border-yellow-500":"border-blue-500"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`p-1 rounded-full ${j(m.severity)}`,children:N(m.type,m.severity)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ve,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:m.student_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m.severity==="high"?"bg-red-100 text-red-800":m.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:m.severity})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.message}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[new Date(m.created_at).toLocaleDateString()," â€¢ ",m.type]})]})]}),e.jsx("button",{onClick:()=>A(w),className:"ml-2 text-gray-400 hover:text-gray-600",title:"Dismiss alert",children:e.jsx(K,{className:"h-4 w-4"})})]})},`${m.student_id}-${m.type}-${w}`))}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(K,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No active alerts"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"All students are performing well!"})]})}),y.length>0&&e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:g,disabled:x,className:"text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",children:"Refresh"}),e.jsx("button",{onClick:()=>{console.log("Navigating to learner analytics..."),d(!1),window.history.pushState({},"","/analytics/learners"),window.location.href="/analytics/learners"},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All Analytics â†’"})]})})]}),v.length>0&&!u&&e.jsx("div",{className:"fixed top-20 right-4 z-40 max-w-sm",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ce,{className:"h-5 w-5 text-red-600 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:"High Priority Student Alert"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[v.length," student",v.length!==1?"s":""," need",v.length===1?"s":""," immediate attention"]}),e.jsx("button",{onClick:()=>d(!0),className:"text-sm text-red-600 hover:text-red-700 font-medium mt-2",children:"View Details â†’"})]}),e.jsx("button",{onClick:()=>c(m=>{const w=new Set(m);return v.forEach(l=>{const o=`${l.student_id}-${l.type}-${l.created_at}`;w.add(o)}),w}),className:"text-red-400 hover:text-red-600 ml-2",children:e.jsx(oe,{className:"h-4 w-4"})})]})})})]})},Xt=()=>{const{user:s,logout:a}=V(),{setSidebarOpen:t}=_e(),[n,u]=r.useState(0),[d,x]=r.useState(0);return r.useEffect(()=>{const b=async()=>{try{const i=await Ge.getUnreadCount();u(i.unread_count||0),x(0)}catch(i){console.error("Failed to fetch unread counts:",i)}};if(s){b();const i=setInterval(b,3e4);return()=>clearInterval(i)}},[s]),e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-3 sm:px-4 md:px-6 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1",children:[e.jsx("button",{onClick:()=>t(!0),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(dt,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Fe,{className:"absolute left-2 sm:left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-8 sm:pl-10 pr-2 sm:pr-4 py-1.5 sm:py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-4",children:[s&&["teacher","super_admin"].includes(s.role)&&e.jsx("div",{className:"hidden md:block",children:e.jsx(Zt,{})}),e.jsxs("a",{href:"/notifications",className:"relative p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(Ee,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),n>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-red-500 text-white text-[10px] sm:text-xs w-4 h-4 sm:w-5 sm:h-5 rounded-full flex items-center justify-center",children:n>9?"9+":n})]}),e.jsxs("a",{href:"/messages",className:"hidden xs:block relative p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(we,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),d>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-green-500 text-white text-[10px] sm:text-xs w-4 h-4 sm:w-5 sm:h-5 rounded-full flex items-center justify-center",children:d>9?"9+":d})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center gap-2 sm:gap-3 p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-medium",children:s==null?void 0:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate max-w-[120px]",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:s==null?void 0:s.role})]})]}),e.jsx("div",{className:"absolute right-0 top-full mt-2 w-44 sm:w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("a",{href:"/profile",className:"flex items-center gap-3 px-3 sm:px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(ve,{className:"h-4 w-4"}),"Profile"]}),e.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(mt,{className:"h-4 w-4"}),"Sign Out"]})]})})]})]})]})})},ea=({children:s})=>{const{sidebarOpen:a}=_e(),{user:t}=V(),n=()=>{switch(t==null?void 0:t.role){case"student":return e.jsx(ks,{});case"teacher":return e.jsx(Qt,{});case"super_admin":return e.jsx(Kt,{});default:return e.jsx(ks,{})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n(),e.jsxs("div",{className:`transition-all duration-300 ${a?"lg:ml-64":"lg:ml-16"}`,children:[e.jsx(Xt,{}),e.jsx("main",{className:"min-h-[calc(100vh-64px)] sm:min-h-[calc(100vh-72px)] md:min-h-[calc(100vh-80px)]",children:s})]})]})},js=({title:s,value:a,change:t,changeType:n="neutral",icon:u,color:d})=>{const x={blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",green:"bg-green-100 text-green-600",yellow:"bg-yellow-100 text-yellow-600",red:"bg-red-100 text-red-600"},b={positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"};return e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6 hover:shadow-md transition-shadow duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3 md:mb-4",children:[e.jsx("div",{className:`p-2 sm:p-2.5 md:p-3 rounded-lg ${x[d]}`,children:e.jsx(u,{className:"h-4 w-4 sm:h-5 sm:w-5 md:h-6 md:w-6"})}),t&&e.jsx("span",{className:`text-xs sm:text-sm font-medium ${b[n]} hidden sm:inline`,children:t})]}),e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-600 mb-1",children:s}),e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-900",children:a}),t&&e.jsx("span",{className:`text-xs font-medium ${b[n]} sm:hidden mt-1 block`,children:t})]})},sa=({announcement:s})=>{const a=()=>{switch(s.type){case"info":return e.jsx(Ms,{className:"h-5 w-5 text-blue-600"});case"warning":return e.jsx(Ce,{className:"h-5 w-5 text-yellow-600"});case"success":return e.jsx(K,{className:"h-5 w-5 text-green-600"})}},t=()=>{switch(s.type){case"info":return"bg-blue-50 border-blue-200";case"warning":return"bg-yellow-50 border-yellow-200";case"success":return"bg-green-50 border-green-200"}};return e.jsxs("div",{className:`border rounded-lg p-4 ${t()}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[a(),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-700",children:s.content})]})]}),e.jsx("p",{className:"text-xs text-gray-500 text-right",children:new Date(s.date).toLocaleDateString()})]})},gs=({content:s,className:a=""})=>{const t=n=>(n=n.replace(/^### (.*$)/gim,'<h3 class="text-sm font-semibold text-gray-800 mt-3 mb-2">$1</h3>'),n=n.replace(/^## (.*$)/gim,'<h2 class="text-base font-bold text-gray-900 mt-4 mb-2">$1</h2>'),n=n.replace(/^# (.*$)/gim,'<h1 class="text-lg font-bold text-gray-900 mt-4 mb-3">$1</h1>'),n=n.replace(/\*\*(.*?)\*\*/g,'<strong class="font-semibold text-gray-900">$1</strong>'),n=n.replace(/\*(.*?)\*/g,'<em class="italic">$1</em>'),n=n.replace(/^- (.*$)/gim,'<li class="ml-4 mb-1">â€¢ $1</li>'),n=n.replace(/^(\d+)\. (.*$)/gim,'<li class="ml-4 mb-1">$1. $2</li>'),n=n.replace(/\n/g,"<br />"),n=n.replace(/(<li.*?<\/li>(?:<br \/>)*)+/g,'<ul class="mb-2">$&</ul>'),n=n.replace(/<br \/><br \/>/g,"<br />"),n);return e.jsx("div",{className:`prose prose-sm max-w-none ${a}`,dangerouslySetInnerHTML:{__html:t(s)}})},Cs=()=>{var Se,Le,E,R,ge,J,X;const{user:s}=V(),{courses:a,assignments:t,announcements:n}=_e(),[u,d]=r.useState(!1),[x,b]=r.useState(""),[i,c]=r.useState([]),[g,N]=r.useState(!1),[j,A]=r.useState(null),[y,v]=r.useState(null),[p,m]=r.useState(!1),[w,l]=r.useState(!1),o=()=>{const k=new Date().getHours();return k<12?"Good morning":k<18?"Good afternoon":"Good evening"},S=async()=>{m(!0);try{console.log("Fetching AI recommendations...");const k=await Ue.getRecommendations().catch($=>(console.error("Failed to fetch recommendations:",$),{course_recommendations:[],study_tips:["Create a consistent daily study schedule","Use active recall techniques when reviewing material","Take regular breaks to maintain focus and retention","Form study groups with classmates for collaborative learning","Practice with past quizzes and assignments regularly"],performance_summary:{strong_areas:[],weak_areas:[],total_points:(s==null?void 0:s.total_points)||0,courses_enrolled:a.length,quizzes_attempted:0,assignments_submitted:0}}));console.log("Recommendations received:",k),A(k)}catch(k){console.error("Failed to fetch recommendations:",k)}finally{m(!1)}},h=async k=>{l(!0);try{const $=k||`Complete my current courses, improve in weak areas, and advance my skills in ${(s==null?void 0:s.department)||"my field of study"}`;console.log("Generating learning path with goal:",$);const U=await Ue.generateLearningPath($,"month").catch(ee=>(console.error("Failed to generate learning path:",ee),{learning_path:{goal:$,timeframe:"month",learning_path:`### ðŸŽ¯ Month Learning Plan

**Goal:** ${$}

**Focus Areas:** Complete enrolled courses and strengthen understanding

**Study Time:** 10-15 hours per week

**Action Plan:** Catch up on materials, strengthen weak areas, and practice consistently

**Quick Tips:**
- Set daily study goals and track progress
- Review material regularly using active recall
- Join study groups for collaborative learning
- Take breaks to maintain focus

*Click "New Path" to generate a custom plan for different goals*`}}));console.log("Learning path received:",U),v(U),localStorage.setItem("learningPath",JSON.stringify(U)),localStorage.setItem("learningPathDate",Date.now().toString())}catch($){console.error("Failed to generate learning path:",$)}finally{l(!1)}};r.useEffect(()=>{if(s&&s.role==="student"){S();const k=localStorage.getItem("learningPath"),$=localStorage.getItem("learningPathDate");!k||!$||Date.now()-parseInt($)>7*24*60*60*1e3?h():v(JSON.parse(k))}},[s]),r.useEffect(()=>{u&&i.length===0&&(async()=>{try{const $=await Ue.getWelcomeMessage();c([{type:"ai",message:$.message}])}catch($){console.error("Failed to load welcome message:",$),c([{type:"ai",message:`## ðŸ‘‹ Hello ${s==null?void 0:s.name}!

I'm your AI study assistant. How can I help you with your studies today?`}])}})()},[u,i.length,s==null?void 0:s.name]);const f=async()=>{if(!x.trim())return;const k=x;b(""),c($=>[...$,{type:"user",message:k}]),N(!0);try{const $=await Ue.chat(k);c(U=>[...U,{type:"ai",message:$.response}])}catch{c(U=>[...U,{type:"ai",message:"Sorry, I encountered an error. Please try again."}])}finally{N(!1)}},D=t.filter(k=>new Date(k.dueDate)>new Date).slice(0,4),I=n.slice(0,3),C=[{id:"1",title:"Machine Learning Quiz 1",course:"Introduction to Machine Learning",score:85,maxScore:100,date:"2024-02-08"},{id:"2",title:"Python Basics Test",course:"Advanced Python Programming",score:92,maxScore:100,date:"2024-02-06"},{id:"3",title:"Data Structures Quiz",course:"Data Science Fundamentals",score:78,maxScore:100,date:"2024-02-04"}],Y=a.map(k=>({...k,progress:k.progress||Math.floor(Math.random()*100),nextLesson:`Lesson ${Math.floor(k.progress/10)+1}`,totalLessons:k.totalLessons||12,completedLessons:k.completedLessons||Math.floor((k.progress||0)/10)})),ue=k=>{const $=a.find(U=>U.id===k);return $?$.title:"Unknown Course"},H=k=>{const $=new Date(k),U=new Date,ee=Math.ceil(($.getTime()-U.getTime())/(1e3*60*60*24));return ee<=2?"high":ee<=7?"medium":"low"},pe=C.length>0?Math.round(C.reduce((k,$)=>k+$.score/$.maxScore*100,0)/C.length):0,Ae=Y.length>0?Math.round(Y.reduce((k,$)=>k+$.progress,0)/Y.length):0,Oe=[{title:"Enrolled Courses",value:a.length.toString(),icon:G,color:"blue",change:"+2 this month"},{title:"Average Progress",value:`${Ae}%`,icon:re,color:"green",change:"+12% this week"},{title:"Quiz Average",value:`${pe}%`,icon:$e,color:"purple",change:"+5% improvement"},{title:"Study Streak",value:"7 days",icon:le,color:"yellow",change:"Personal best!"}];return e.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-green-600 rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-1 sm:mb-2",children:[o(),", ",s==null?void 0:s.name,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg mb-3 sm:mb-4",children:"Ready to continue your learning journey?"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 md:gap-6 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(as,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Daily goal: 2 hours"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(le,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Streak: 7 days"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(Z,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Level: Intermediate"})]})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(me,{className:"h-16 w-16 md:h-20 md:w-20 lg:h-24 lg:w-24 text-white opacity-20"})})]})}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:Oe.map((k,$)=>e.jsx(js,{title:k.title,value:k.value,change:k.change,changeType:"positive",icon:k.icon,color:k.color},$))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"My Courses"}),e.jsx("a",{href:"/courses",className:"text-blue-600 hover:text-blue-700 font-medium text-xs sm:text-sm",children:"View all courses"})]}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:Y.slice(0,3).map(k=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg sm:rounded-xl p-4 sm:p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex-1 pr-2",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-1 sm:mb-2",children:k.title}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm mb-2 sm:mb-3 line-clamp-2",children:k.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:k.instructor})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{className:"h-3 w-3 sm:h-4 sm:w-4"}),k.completedLessons,"/",k.totalLessons]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Next: "}),k.nextLesson]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-blue-600 mb-1",children:[k.progress,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Complete"})]})]}),e.jsxs("div",{className:"mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"text-gray-900 font-medium hidden sm:inline",children:[k.completedLessons," of ",k.totalLessons," completed"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${k.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${k.progress>80?"bg-green-500":k.progress>50?"bg-yellow-500":"bg-blue-500"}`}),e.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:k.progress>80?"Almost done!":k.progress>50?"Good progress":"Just started"})]}),e.jsxs("button",{className:"bg-blue-600 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[e.jsx(Be,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Continue"}),e.jsx("span",{className:"sm:hidden",children:"Go"})]})]})]},k.id))}),e.jsxs("div",{className:"mt-6 sm:mt-8",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[e.jsxs("a",{href:"/courses",className:"bg-blue-50 hover:bg-blue-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx(G,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-blue-900 block",children:"Browse Courses"})]}),e.jsxs("a",{href:"/assignments",className:"bg-green-50 hover:bg-green-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx($e,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-green-900 block",children:"Assignments"})]}),e.jsxs("a",{href:"/ai-assistant",className:"bg-purple-50 hover:bg-purple-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx(me,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-purple-900 block",children:"AI Assistant"})]}),e.jsxs("a",{href:"/achievements",className:"bg-yellow-50 hover:bg-yellow-100 p-3 sm:p-4 rounded-lg text-center transition-colors",children:[e.jsx(Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600 mx-auto mb-1 sm:mb-2"}),e.jsx("span",{className:"text-xs sm:text-sm font-medium text-yellow-900 block",children:"Achievements"})]})]})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Recent Quiz Results"}),e.jsx("a",{href:"/quizzes",className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"View all"})]}),e.jsx("div",{className:"space-y-3",children:C.map(k=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:k.title}),e.jsx("p",{className:"text-sm text-gray-600",children:k.course})]}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.score>=90?"bg-green-100 text-green-800":k.score>=75?"bg-blue-100 text-blue-800":k.score>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Math.round(k.score/k.maxScore*100),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[k.score,"/",k.maxScore," points"]}),e.jsx("span",{children:new Date(k.date).toLocaleDateString()})]})]},k.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Upcoming Assignments"}),e.jsx("a",{href:"/assignments",className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"View all"})]}),e.jsx("div",{className:"space-y-3",children:D.slice(0,3).map(k=>{const $=H(k.dueDate),U=ue(k.courseId),ee=new Date(k.dueDate).toLocaleDateString();return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:k.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:U}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(Q,{className:"h-3 w-3 text-gray-400"}),e.jsxs("span",{className:"text-gray-500",children:["Due ",ee]})]})]}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${$==="high"?"bg-red-100 text-red-800":$==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:$})]})},k.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Recent Achievements"}),e.jsx("a",{href:"/achievements",className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"View all"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-yellow-100 p-2 rounded-full",children:e.jsx($e,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Assignment Master"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Completed 10 assignments"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(K,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Course Completion"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Finished Python Basics"})]})]})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Announcements"}),e.jsx("a",{href:"/announcements",className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm",children:"View all"})]}),e.jsx("div",{className:"space-y-3",children:I.map(k=>e.jsx(sa,{announcement:k},k.id))})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg sm:rounded-xl p-4 sm:p-6 border border-purple-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(me,{className:"h-5 w-5 sm:h-6 sm:w-6 text-purple-600 flex-shrink-0"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 italic",children:"Your Personalized Learning Path"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>S(),disabled:p,className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm font-medium disabled:opacity-50 whitespace-nowrap",children:p?"ðŸ”„ Loading...":"ðŸ”„ Refresh Tips"}),e.jsx("button",{onClick:()=>{const k=prompt("What would you like to focus on in your learning journey?")||`Improve my skills in ${(s==null?void 0:s.department)||"my field of study"} and complete current courses`;h(k)},disabled:w,className:"text-purple-600 hover:text-purple-700 text-xs sm:text-sm font-medium disabled:opacity-50 whitespace-nowrap",children:w?"ðŸ”„ Generating...":"ðŸ”„ New Path"})]})]}),w?e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Generating your personalized learning path..."})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 animate-pulse"})]})]}):y?e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"ðŸŽ¯ AI-Generated Study Plan"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Goal: ",((Se=y.learning_path)==null?void 0:Se.goal)||"Personal Development"]})]}),e.jsx("div",{className:"text-sm text-gray-700 prose prose-sm max-w-none",children:e.jsx(gs,{content:((Le=y.learning_path)==null?void 0:Le.learning_path)||y.learning_path||"Loading your personalized learning path..."})}),((E=y.learning_path)==null?void 0:E.timeframe)&&e.jsxs("div",{className:"mt-3 text-xs text-purple-600 bg-purple-50 px-2 py-1 rounded",children:["ðŸ“… Timeframe: ",y.learning_path.timeframe]})]}):e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Generating your personalized learning path..."})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3 animate-pulse"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4",children:j?e.jsxs(e.Fragment,{children:[j.course_recommendations&&j.course_recommendations.length>0?j.course_recommendations.slice(0,3).map((k,$)=>{var U;return e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:"ðŸ“š Recommended Course"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 font-medium line-clamp-2",children:k.title}),e.jsxs("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:[(U=k.description)==null?void 0:U.substring(0,80),"..."]}),e.jsx("button",{onClick:()=>window.location.href="/courses",className:"text-blue-600 text-xs sm:text-sm font-medium hover:text-blue-700 flex items-center gap-1",children:"View Course â†’"})]},$)}):e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:"ðŸŽ¯ Current Focus"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:"Complete your enrolled courses and improve your performance"}),e.jsx("button",{onClick:()=>window.location.href="/courses",className:"text-purple-600 text-xs sm:text-sm font-medium hover:text-purple-700",children:"Continue Learning â†’"})]}),j.performance_summary&&e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:"ðŸ“Š Your Progress"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Courses:"}),e.jsx("span",{className:"font-medium",children:j.performance_summary.courses_enrolled})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Quizzes:"}),e.jsx("span",{className:"font-medium",children:j.performance_summary.quizzes_attempted})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Points:"}),e.jsx("span",{className:"font-medium text-purple-600",children:j.performance_summary.total_points})]})]})]}),((ge=(R=j.performance_summary)==null?void 0:R.strong_areas)==null?void 0:ge.length)>0&&e.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:"ðŸ’ª Strong Areas"}),e.jsx("div",{className:"space-y-1",children:j.performance_summary.strong_areas.slice(0,3).map((k,$)=>e.jsxs("div",{className:"text-xs sm:text-sm text-green-700 bg-green-50 px-2 py-1 rounded",children:["âœ“ ",k]},$))})]})]}):Array.from({length:3}).map((k,$)=>e.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})},$))}),(j==null?void 0:j.study_tips)&&j.study_tips.length>0&&e.jsxs("div",{className:"mt-3 sm:mt-4 bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(Rs,{className:"h-4 w-4 text-yellow-500"}),"ðŸ’¡ Personalized Study Tips"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3",children:j.study_tips.slice(0,4).map((k,$)=>e.jsxs("div",{className:"flex items-start gap-2 text-xs sm:text-sm text-gray-600 bg-yellow-50 p-2 sm:p-3 rounded-lg",children:[e.jsx("span",{className:"text-yellow-500 mt-0.5 font-bold",children:"â€¢"}),e.jsx("span",{children:k})]},$))})]}),((X=(J=j==null?void 0:j.performance_summary)==null?void 0:J.weak_areas)==null?void 0:X.length)>0&&e.jsxs("div",{className:"mt-3 sm:mt-4 bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-2 sm:mb-3 flex items-center gap-2 text-sm sm:text-base",children:[e.jsx(as,{className:"h-4 w-4 text-orange-500"}),"ðŸŽ¯ Areas for Improvement"]}),e.jsx("div",{className:"space-y-2",children:j.performance_summary.weak_areas.map((k,$)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-orange-700 bg-orange-50 px-2 sm:px-3 py-2 rounded-lg",children:[e.jsx("span",{className:"text-orange-500",children:"âš ï¸"}),e.jsxs("span",{children:["Focus more on: ",e.jsx("strong",{children:k})]})]},$))})]})]}),u&&e.jsxs("div",{className:"fixed bottom-2 right-2 sm:bottom-4 sm:right-4 w-[calc(100vw-1rem)] sm:w-80 h-[70vh] sm:h-96 bg-white rounded-lg shadow-2xl border border-gray-200 flex flex-col z-50",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 sm:p-4 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"font-medium text-sm sm:text-base",children:"AI Study Assistant"})]}),e.jsx("button",{onClick:()=>d(!1),className:"text-white hover:text-gray-200",children:e.jsx(oe,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:[i.length===0&&e.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[e.jsx(me,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"Loading your personalized welcome message..."})]}),i.map((k,$)=>e.jsx("div",{className:`flex ${k.type==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-xs p-3 rounded-lg text-sm ${k.type==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:k.type==="ai"?e.jsx(gs,{content:k.message}):k.message})},$)),g&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 text-gray-900 p-3 rounded-lg text-sm",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:k=>b(k.target.value),onKeyDown:k=>k.key==="Enter"&&!k.shiftKey&&f(),placeholder:"Ask me anything...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),e.jsx("button",{onClick:f,disabled:!x.trim()||g,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(De,{className:"h-4 w-4"})})]})})]}),!u&&e.jsx("button",{onClick:()=>d(!0),className:"fixed bottom-4 right-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-40",children:e.jsx(Fs,{className:"h-6 w-6"})})]})},Ks=({className:s=""})=>{const[a,t]=r.useState(null),[n,u]=r.useState([]),[d,x]=r.useState(!1),b=async()=>{x(!0);try{const[c,g]=await Promise.all([Ve.getPerformanceAnalysis(),Ve.getPerformanceAlerts()]);t(c.summary),u(g.alerts.slice(0,3))}catch(c){console.error("Failed to fetch learner insights:",c)}finally{x(!1)}};r.useEffect(()=>{b()},[]);const i=c=>{switch(c){case"high":return"text-red-600 bg-red-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}};return d&&!a?e.jsx("div",{className:`bg-white rounded-lg shadow border p-6 ${s}`,children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Ze,{className:"h-6 w-6 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading insights..."})]})}):e.jsxs("div",{className:`bg-white rounded-lg shadow border ${s}`,children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Learner Insights"}),e.jsx("button",{onClick:b,disabled:d,className:"text-blue-600 hover:text-blue-700 disabled:opacity-50",children:e.jsx(Ze,{className:`h-4 w-4 ${d?"animate-spin":""}`})})]})}),e.jsx("div",{className:"p-6",children:a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx(ts,{className:"h-6 w-6 text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.slow_learners_count}),e.jsx("p",{className:"text-sm text-red-700",children:"Slow Learners"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(re,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.fast_learners_count}),e.jsx("p",{className:"text-sm text-green-700",children:"Fast Learners"})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsx("span",{className:"font-medium text-yellow-800",children:"Students at Risk"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mb-1",children:a.students_at_risk}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["out of ",a.total_students," total students"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Average Performance"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[a.average_performance,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a.average_performance}%`}})})]}),n.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-gray-900 flex items-center",children:[e.jsx(Ce,{className:"h-4 w-4 text-yellow-600 mr-2"}),"Recent Alerts"]}),e.jsx("div",{className:"space-y-2",children:n.map((c,g)=>e.jsxs("div",{className:`p-3 rounded-lg text-sm ${i(c.severity)}`,children:[e.jsx("p",{className:"font-medium",children:c.student_name}),e.jsx("p",{className:"opacity-75",children:c.message})]},g))})]}),a.inactive_students>0&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-600 mr-2"}),e.jsx("span",{className:"font-medium text-gray-800",children:"Inactive Students"})]}),e.jsx("p",{className:"text-lg font-bold text-gray-600 mb-1",children:a.inactive_students}),e.jsx("p",{className:"text-sm text-gray-600",children:"Haven't logged in recently"})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>{console.log("Navigating to learner analytics from dashboard..."),window.location.href="/analytics/learners"},className:"flex items-center justify-center w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{children:"View Detailed Analytics"}),e.jsx(xt,{className:"h-4 w-4 ml-2"})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No learner data available"})]})})]})},ta=()=>{const{user:s}=V(),{courses:a,assignments:t,announcements:n}=_e(),u=()=>{const c=new Date().getHours();return c<12?"Good morning":c<18?"Good afternoon":"Good evening"},d=[{title:"Active Courses",value:a.length,icon:G,color:"blue",change:"+1 this month"},{title:"Total Students",value:"156",icon:W,color:"green",change:"+12 this week"},{title:"Pending Grades",value:"23",icon:te,color:"yellow",change:"5 due today"},{title:"Course Rating",value:"4.8",icon:re,color:"purple",change:"+0.2 this month"}],x=a.slice(0,3),b=t.filter(c=>c.status==="submitted").slice(0,5),i=n.slice(0,3);return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-green-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[u(),", ",s==null?void 0:s.name,"! ðŸ‘¨â€ðŸ«"]}),e.jsx("p",{className:"text-blue-100 text-lg mb-4",children:"Ready to inspire and educate your students?"}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.length," Active Courses"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:"156 Students"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"4.8 Rating"})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx(me,{className:"h-24 w-24 text-white opacity-20"})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((c,g)=>e.jsx(js,{title:c.title,value:c.value,change:c.change,changeType:"positive",icon:c.icon,color:c.color},g))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Courses"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("a",{href:"/courses/create",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"New Course"]}),e.jsxs("a",{href:"/courses",className:"text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center",children:["View all",e.jsx(ie,{className:"h-4 w-4 ml-1"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map(c=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:c.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),c.students," students"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),c.totalLessons," lessons"]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Active"})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Manage â†’"})]})]},c.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Pending Grades"}),e.jsx("a",{href:"/assignments",className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"View all"})]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg",children:e.jsx("div",{className:"divide-y divide-gray-200",children:b.map(c=>e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Submitted by Student â€¢ Due: ",c.dueDate]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full",children:"Pending Review"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Grade"})]})]})},c.id))})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("a",{href:"/courses/new",className:"bg-blue-50 hover:bg-blue-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(G,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Create Course"})]}),e.jsxs("a",{href:"/assignments/new",className:"bg-green-50 hover:bg-green-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(te,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-green-900",children:"New Assignment"})]}),e.jsxs("a",{href:"/quizzes/new",className:"bg-purple-50 hover:bg-purple-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(me,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Create Quiz"})]}),e.jsxs("a",{href:"/analytics",className:"bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg text-center transition-colors",children:[e.jsx(re,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-medium text-yellow-900",children:"View Analytics"})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(Ks,{}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600 mr-2"}),"Today's Schedule"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Machine Learning - Lecture"}),e.jsx("p",{className:"text-sm text-gray-600",children:"10:00 AM - 11:30 AM"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Office Hours"}),e.jsx("p",{className:"text-sm text-gray-600",children:"2:00 PM - 4:00 PM"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Python Programming - Lab"}),e.jsx("p",{className:"text-sm text-gray-600",children:"4:30 PM - 6:00 PM"})]})]})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Announcements"}),e.jsx("a",{href:"/announcements",className:"text-blue-600 hover:text-blue-700 text-sm",children:"View all"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:i.map(c=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.content}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:c.date})]},c.id))})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(me,{className:"h-6 w-6 text-indigo-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Teaching Assistant"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Generate Quiz"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Create quizzes from your course content"}),e.jsx("button",{className:"text-indigo-600 text-sm font-medium hover:text-indigo-700",children:"Try AI Quiz Generator â†’"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Student Insights"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Get AI-powered student performance analysis"}),e.jsx("button",{className:"text-purple-600 text-sm font-medium hover:text-purple-700",children:"View Insights â†’"})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Content Suggestions"}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Get personalized teaching recommendations"}),e.jsx("button",{className:"text-green-600 text-sm font-medium hover:text-green-700",children:"Get Suggestions â†’"})]})]})]})]})},aa=()=>{const{user:s}=V(),a=()=>{const n=new Date().getHours();return n<12?"Good morning":n<18?"Good afternoon":"Good evening"},t=[{title:"Total Users",value:"1,247",icon:W,color:"blue",change:"+12% this month"},{title:"System Uptime",value:"99.9%",icon:_s,color:"green",change:"30 days stable"},{title:"Security Score",value:"98/100",icon:fe,color:"purple",change:"Excellent"},{title:"Global Revenue",value:"$124,580",icon:re,color:"yellow",change:"+25% this quarter"}];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-900 via-indigo-800 to-blue-900 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(Ke,{className:"h-8 w-8 text-yellow-400"}),a(),", ",s==null?void 0:s.name,"! ðŸ‘‘"]}),e.jsx("p",{className:"text-purple-100 text-lg mb-4",children:"Complete system control and oversight dashboard"}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Global Access"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Maximum Security"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsx("span",{children:"Full Control"})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx(Ke,{className:"h-24 w-24 text-yellow-400 opacity-30"})})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((n,u)=>e.jsx(js,{title:n.title,value:n.value,change:n.change,changeType:"positive",icon:n.icon,color:n.color},u))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-blue-600"}),"User Management"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>{window.history.pushState({},"","/admin/users"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"w-full bg-blue-50 hover:bg-blue-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-blue-900",children:"Manage All Users"}),e.jsx("div",{className:"text-xs text-blue-700",children:"1,247 total users"})]}),e.jsxs("button",{className:"w-full bg-blue-50 hover:bg-blue-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-blue-900",children:"Role Management"}),e.jsx("div",{className:"text-xs text-blue-700",children:"Assign & modify roles"})]}),e.jsxs("button",{className:"w-full bg-blue-50 hover:bg-blue-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-blue-900",children:"Institution Control"}),e.jsx("div",{className:"text-xs text-blue-700",children:"247 institutions"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-green-600"}),"Content Control"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full bg-green-50 hover:bg-green-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-green-900",children:"Course Approval"}),e.jsx("div",{className:"text-xs text-green-700",children:"8 pending approvals"})]}),e.jsxs("button",{className:"w-full bg-green-50 hover:bg-green-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-green-900",children:"Content Moderation"}),e.jsx("div",{className:"text-xs text-green-700",children:"Review flagged content"})]}),e.jsxs("button",{className:"w-full bg-green-50 hover:bg-green-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-green-900",children:"Global Announcements"}),e.jsx("div",{className:"text-xs text-green-700",children:"System-wide messaging"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-red-600"}),"System Security"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full bg-red-50 hover:bg-red-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-red-900",children:"Security Monitoring"}),e.jsx("div",{className:"text-xs text-red-700",children:"3 active threats"})]}),e.jsxs("button",{className:"w-full bg-red-50 hover:bg-red-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-red-900",children:"Access Control"}),e.jsx("div",{className:"text-xs text-red-700",children:"Manage permissions"})]}),e.jsxs("button",{className:"w-full bg-red-50 hover:bg-red-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-red-900",children:"Audit Logs"}),e.jsx("div",{className:"text-xs text-red-700",children:"System activity logs"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-purple-600"}),"Analytics & Revenue"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full bg-purple-50 hover:bg-purple-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-purple-900",children:"Global Analytics"}),e.jsx("div",{className:"text-xs text-purple-700",children:"Cross-platform insights"})]}),e.jsxs("button",{className:"w-full bg-purple-50 hover:bg-purple-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-purple-900",children:"Revenue Management"}),e.jsx("div",{className:"text-xs text-purple-700",children:"$124,580 this quarter"})]}),e.jsxs("button",{className:"w-full bg-purple-50 hover:bg-purple-100 p-3 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-purple-900",children:"Usage Statistics"}),e.jsx("div",{className:"text-xs text-purple-700",children:"Platform utilization"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(Ks,{})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{window.history.pushState({},"","/admin/users"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"p-4 bg-blue-50 hover:bg-blue-100 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-blue-900",children:"User Management"}),e.jsx("div",{className:"text-sm text-blue-700 mt-1",children:"Manage all system users"})]}),e.jsxs("button",{className:"p-4 bg-green-50 hover:bg-green-100 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-green-900",children:"System Settings"}),e.jsx("div",{className:"text-sm text-green-700 mt-1",children:"Configure system parameters"})]}),e.jsxs("button",{className:"p-4 bg-purple-50 hover:bg-purple-100 rounded-lg text-left transition-colors",children:[e.jsx("div",{className:"font-medium text-purple-900",children:"Reports"}),e.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"Generate system reports"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5 text-green-600"}),"System Health"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Overall Health"}),e.jsx("span",{className:"text-green-600 font-semibold",children:"Excellent"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"98%"}})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:"99.9%"}),e.jsx("div",{className:"text-xs text-green-700",children:"Uptime"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:"0.2s"}),e.jsx("div",{className:"text-xs text-blue-700",children:"Response"})]})]}),e.jsx("button",{className:"w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Emergency System Stop"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ls,{className:"h-5 w-5 text-blue-600"}),"Database Control"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Storage Used"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"2.4 TB / 5 TB"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Connections"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"1,247"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Query Performance"}),e.jsx("span",{className:"font-semibold text-green-600",children:"Optimal"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsx("button",{className:"bg-blue-50 text-blue-700 py-2 px-3 rounded text-sm font-medium hover:bg-blue-100",children:"Backup Now"}),e.jsx("button",{className:"bg-yellow-50 text-yellow-700 py-2 px-3 rounded text-sm font-medium hover:bg-yellow-100",children:"Optimize DB"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(cs,{className:"h-5 w-5 text-purple-600"}),"Global Overview"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Institutions"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"247"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Licenses"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"1,247"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Global Users"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"45,892"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Monthly Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:"$124,580"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Data Processed"}),e.jsx("span",{className:"font-semibold text-gray-900",children:"847 GB"})]}),e.jsx("button",{className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Generate Global Report"})]})]})]})]})},As=()=>{const{user:s}=V();switch(s==null?void 0:s.role){case"student":return e.jsx(Cs,{});case"teacher":return e.jsx(ta,{});case"super_admin":return e.jsx(aa,{});default:return e.jsx(Cs,{})}},ra=({course:s,onClick:a,viewMode:t="grid",isTeacher:n=!1})=>{const u=d=>{switch(d){case"Beginner":return"bg-green-100 text-green-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{onClick:a,className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer group",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center",children:e.jsx(Be,{className:"h-12 w-12 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300"})}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(s.difficulty)}`,children:s.difficulty})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:s.students})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ds,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{children:s.rating})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.totalLessons," lessons"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.completedLessons,"/",s.totalLessons]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["by ",s.instructor]}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[s.progress,"%"]})]})]})]})},la=()=>{const{user:s}=V(),{courses:a}=_e(),[t,n]=r.useState(""),[u,d]=r.useState("all"),[x,b]=r.useState("all"),[i,c]=r.useState("grid"),[g,N]=r.useState("title"),j=["all","AI & Machine Learning","Programming","Data Science","Web Development","Mobile Development","Database","Cloud Computing","Cybersecurity","DevOps"],A=(s==null?void 0:s.role)==="teacher",y=a.filter(p=>p.title.toLowerCase().includes(t.toLowerCase())||p.description.toLowerCase().includes(t.toLowerCase())).filter(p=>u==="all"||p.category===u).filter(p=>x==="all"?!0:x==="active"?p.progress<100:x==="completed"?p.progress===100:!0).sort((p,m)=>{switch(g){case"title":return p.title.localeCompare(m.title);case"progress":return(m.progress||0)-(p.progress||0);case"rating":return(m.rating||0)-(p.rating||0);case"students":return(m.students||0)-(p.students||0);case"recent":return new Date(m.createdAt||0).getTime()-new Date(p.createdAt||0).getTime();default:return 0}}),v={total:a.length,active:a.filter(p=>p.progress<100).length,completed:a.filter(p=>p.progress===100).length,totalStudents:a.reduce((p,m)=>p+(m.students||0),0)};return e.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"My Courses"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:A?"Create and manage your courses":"Manage and continue your learning journey"})]}),A&&e.jsxs("a",{href:"/courses/create",className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base",children:[e.jsx(xe,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Create Course"]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(G,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Total Courses"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:v.total})]}),!A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Q,{className:"h-6 w-6 sm:h-8 sm:w-8 text-yellow-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"In Progress"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:v.active})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(re,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Completed"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:v.completed})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Re,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Avg Progress"}),e.jsxs("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:[v.total>0?Math.round(a.reduce((p,m)=>p+(m.progress||0),0)/v.total):0,"%"]})]})]}),A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(W,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Total Students"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:v.totalStudents})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(re,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Avg Rating"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:v.total>0?(a.reduce((p,m)=>p+(m.rating||0),0)/v.total).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(ie,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:"Active Courses"}),e.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:v.total})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6 mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search courses...",value:t,onChange:p=>n(p.target.value),className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-2.5 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsx("select",{value:u,onChange:p=>d(p.target.value),className:"flex-1 px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:j.map(p=>e.jsx("option",{value:p,children:p==="all"?"All Categories":p},p))})]}),!A&&e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(Q,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("select",{value:x,onChange:p=>b(p.target.value),className:"flex-1 px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(ut,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),e.jsxs("select",{value:g,onChange:p=>N(p.target.value),className:"flex-1 px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"recent",children:"Most Recent"}),!A&&e.jsx("option",{value:"progress",children:"Progress"}),e.jsx("option",{value:"rating",children:"Rating"}),A&&e.jsx("option",{value:"students",children:"Students"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>c("grid"),className:`p-2 rounded-md transition-colors ${i==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Grid View",children:e.jsx(ht,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>c("list"),className:`p-2 rounded-md transition-colors ${i==="list"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"List View",children:e.jsx(Os,{className:"h-4 w-4"})})]})]})]})}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-gray-900",children:y.length})," of"," ",e.jsx("span",{className:"font-semibold text-gray-900",children:a.length})," courses"]}),e.jsx("div",{className:i==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6":"space-y-4",children:y.length>0?y.map(p=>e.jsx(ra,{course:p,viewMode:i,isTeacher:A},p.id)):e.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-xl border border-gray-200",children:[e.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t||u!=="all"||x!=="all"?"Try adjusting your search or filter criteria":A?"Start by creating your first course":"No courses enrolled yet"}),A&&e.jsxs("a",{href:"/courses/create",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(xe,{className:"h-5 w-5"}),"Create Your First Course"]})]})})]})},na="modulepreload",ia=function(s){return"/"+s},Ts={},Zs=function(a,t,n){let u=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),b=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));u=Promise.allSettled(t.map(i=>{if(i=ia(i),i in Ts)return;Ts[i]=!0;const c=i.endsWith(".css"),g=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${g}`))return;const N=document.createElement("link");if(N.rel=c?"stylesheet":na,c||(N.as="script"),N.crossOrigin="",N.href=i,b&&N.setAttribute("nonce",b),document.head.appendChild(N),c)return new Promise((j,A)=>{N.addEventListener("load",j),N.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${i}`)))})}))}function d(x){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=x,window.dispatchEvent(b),!b.defaultPrevented)throw x}return u.then(x=>{for(const b of x||[])b.status==="rejected"&&d(b.reason);return a().catch(d)})},oa=()=>{const{user:s}=V(),[a,t]=r.useState(!1),[n,u]=r.useState({}),d=P=>{window.history.pushState({},"",P),window.dispatchEvent(new PopStateEvent("popstate"))},x=()=>{window.history.back()},[b,i]=r.useState(""),[c,g]=r.useState(""),[N,j]=r.useState(""),[A,y]=r.useState("Beginner"),[v,p]=r.useState(""),[m,w]=r.useState(""),[l,o]=r.useState(!0),[S,h]=r.useState("50"),[f,D]=r.useState([""]),[I,C]=r.useState([""]),[Y,ue]=r.useState(""),[H,pe]=r.useState([{id:"1",title:"Module 1",description:"",order:1,lessons:[]}]),Ae=["AI & Machine Learning","Programming","Data Science","Web Development","Mobile Development","Database","Cloud Computing","Cybersecurity","DevOps","Other"],Oe=["Beginner","Intermediate","Advanced"],Se=()=>{D([...f,""])},Le=P=>{D(f.filter((_,L)=>L!==P))},E=(P,_)=>{const L=[...f];L[P]=_,D(L)},R=()=>{C([...I,""])},ge=P=>{C(I.filter((_,L)=>L!==P))},J=(P,_)=>{const L=[...I];L[P]=_,C(L)},X=()=>{const P={id:Date.now().toString(),title:`Module ${H.length+1}`,description:"",order:H.length+1,lessons:[]};pe([...H,P])},k=P=>{pe(H.filter(_=>_.id!==P))},$=(P,_,L)=>{pe(H.map(se=>se.id===P?{...se,[_]:L}:se))},U=P=>{pe(H.map(_=>{if(_.id===P){const L={id:Date.now().toString(),title:`Lesson ${_.lessons.length+1}`,type:"video",content:"",duration:"",order:_.lessons.length+1};return{..._,lessons:[..._.lessons,L]}}return _}))},ee=(P,_)=>{pe(H.map(L=>L.id===P?{...L,lessons:L.lessons.filter(se=>se.id!==_)}:L))},B=(P,_,L,se)=>{pe(H.map(F=>F.id===P?{...F,lessons:F.lessons.map(ce=>ce.id===_?{...ce,[L]:se}:ce)}:F))},ne=async(P,_,L)=>{var de,ze,is;const se=(de=L.target.files)==null?void 0:de[0];if(!se)return;if(se.size>100*1024*1024){alert("Video file size must be less than 100MB");return}if(!se.type.startsWith("video/")){alert("Please select a video file");return}const F=`${P}-${_}`,ce=((is=(ze=H.find(ae=>ae.id===P))==null?void 0:ze.lessons.find(ae=>ae.id===_))==null?void 0:is.title)||"Video",Xe=localStorage.getItem("access_token")||localStorage.getItem("token");if(!Xe){alert("Please login first. Token not found.");return}console.log("ðŸ”‘ Uploading video with token:",Xe.substring(0,20)+"..."),console.log("ðŸ“¤ To:","http://localhost:5000/api/videos/upload");const Je=new FormData;Je.append("video",se),Je.append("title",ce),Je.append("description",`Video for ${ce}`);const T=new XMLHttpRequest;T.upload.addEventListener("progress",ae=>{if(ae.lengthComputable){const ke=Math.round(ae.loaded/ae.total*100);u(os=>({...os,[F]:ke})),B(P,_,"content",`Uploading... ${ke}%`)}}),T.addEventListener("load",()=>{if(T.status===201)try{const ae=JSON.parse(T.responseText);B(P,_,"content",ae.videoId),u(ke=>{const os={...ke};return delete os[F],os}),alert("Video uploaded successfully!")}catch{alert("Upload completed but failed to parse response"),B(P,_,"content","")}else{try{const ae=JSON.parse(T.responseText);alert(`Upload failed: ${ae.error||T.status}`)}catch{alert(`Upload failed with status ${T.status}`)}B(P,_,"content",""),u(ae=>{const ke={...ae};return delete ke[F],ke})}}),T.addEventListener("error",()=>{alert("Network error. Please check your connection."),B(P,_,"content",""),u(ae=>{const ke={...ae};return delete ke[F],ke})}),T.open("POST","http://localhost:5000/api/videos/upload"),T.setRequestHeader("Authorization",`Bearer ${Xe}`),T.send(Je)},he=P=>{var L;const _=(L=P.target.files)==null?void 0:L[0];if(_){if(_.size>5*1024*1024){alert("File size must be less than 5MB");return}const se=new FileReader;se.onload=F=>{var ce;w((ce=F.target)==null?void 0:ce.result)},se.readAsDataURL(_)}},Te=async P=>{if(P.preventDefault(),!b.trim()){alert("Please enter a course title");return}if(!c.trim()){alert("Please enter a course description");return}if(!N){alert("Please select a category");return}t(!0);try{const{apiClient:_,API_ENDPOINTS:L}=await Zs(async()=>{const{apiClient:F,API_ENDPOINTS:ce}=await Promise.resolve().then(()=>Ws);return{apiClient:F,API_ENDPOINTS:ce}},void 0),se={title:b.trim(),description:c.trim(),category:N,difficulty:A,duration:v.trim(),thumbnail:m||"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",is_public:l,max_students:parseInt(S)||50,prerequisites:f.filter(F=>F.trim()),learning_objectives:I.filter(F=>F.trim()),syllabus:Y.trim(),modules:H.map(F=>({...F,lessons:F.lessons.filter(ce=>ce.title.trim()&&ce.content.trim())})).filter(F=>F.title.trim()),teacher_id:s==null?void 0:s._id};await _.post(L.COURSES.BASE,se),alert("Course created successfully!"),d("/courses")}catch(_){console.error("Error creating course:",_),alert(`Failed to create course: ${_.message||"Please try again"}`)}finally{t(!1)}};return e.jsxs("div",{className:"p-6 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:x,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(He,{className:"h-4 w-4"}),"Back"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create New Course"}),e.jsx("p",{className:"text-gray-600",children:"Fill in the details to create your course"})]}),e.jsxs("form",{onSubmit:Te,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Basic Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Course Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:b,onChange:P=>i(P.target.value),placeholder:"e.g., Introduction to Machine Learning",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:c,onChange:P=>g(P.target.value),placeholder:"Provide a detailed description of your course...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:N,onChange:P=>j(P.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),Ae.map(P=>e.jsx("option",{value:P,children:P},P))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty Level"}),e.jsx("select",{value:A,onChange:P=>y(P.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Oe.map(P=>e.jsx("option",{value:P,children:P},P))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),e.jsx("input",{type:"text",value:v,onChange:P=>p(P.target.value),placeholder:"e.g., 8 weeks, 40 hours",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Students"}),e.jsx("input",{type:"number",value:S,onChange:P=>h(P.target.value),min:"1",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:l,onChange:P=>o(P.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-gray-700",children:"Make this course publicly visible"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Course Thumbnail"}),e.jsx("div",{className:"space-y-4",children:m?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Course thumbnail",className:"w-full h-64 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>w(""),className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:e.jsx(oe,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(gt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload a course thumbnail"}),e.jsxs("label",{className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 cursor-pointer",children:[e.jsx(be,{className:"h-4 w-4"}),"Choose Image",e.jsx("input",{type:"file",accept:"image/*",onChange:he,className:"hidden"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recommended: 1200x600px, Max 5MB"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Prerequisites"}),e.jsxs("button",{type:"button",onClick:Se,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(xe,{className:"h-4 w-4"}),"Add Prerequisite"]})]}),e.jsx("div",{className:"space-y-3",children:f.map((P,_)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:L=>E(_,L.target.value),placeholder:"e.g., Basic Python knowledge",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),f.length>1&&e.jsx("button",{type:"button",onClick:()=>Le(_),className:"text-red-500 hover:text-red-700",children:e.jsx(qe,{className:"h-4 w-4"})})]},_))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Learning Objectives"}),e.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(xe,{className:"h-4 w-4"}),"Add Objective"]})]}),e.jsx("div",{className:"space-y-3",children:I.map((P,_)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:L=>J(_,L.target.value),placeholder:"e.g., Understand machine learning algorithms",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),I.length>1&&e.jsx("button",{type:"button",onClick:()=>ge(_),className:"text-red-500 hover:text-red-700",children:e.jsx(qe,{className:"h-4 w-4"})})]},_))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Course Syllabus"}),e.jsx("textarea",{value:Y,onChange:P=>ue(P.target.value),placeholder:"Provide a detailed syllabus or course outline...",rows:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Course Modules & Lessons"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Organize your course content into modules and lessons"})]}),e.jsxs("button",{type:"button",onClick:X,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(xe,{className:"h-4 w-4"}),"Add Module"]})]}),e.jsxs("div",{className:"space-y-6",children:[H.map((P,_)=>e.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("input",{type:"text",value:P.title,onChange:L=>$(P.id,"title",L.target.value),placeholder:"Module title",className:"w-full px-4 py-2 text-lg font-semibold border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsx("textarea",{value:P.description,onChange:L=>$(P.id,"description",L.target.value),placeholder:"Module description (optional)",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"})]}),H.length>1&&e.jsx("button",{type:"button",onClick:()=>k(P.id),className:"ml-4 text-red-500 hover:text-red-700",title:"Remove Module",children:e.jsx(qe,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"space-y-3 mb-4",children:P.lessons.map((L,se)=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("select",{value:L.type,onChange:F=>B(P.id,L.id,"type",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"video",children:"ðŸ“¹ Video"}),e.jsx("option",{value:"document",children:"ðŸ“„ Document"}),e.jsx("option",{value:"quiz",children:"â“ Quiz"}),e.jsx("option",{value:"assignment",children:"ðŸ“ Assignment"})]})}),e.jsx("div",{className:"md:col-span-4",children:e.jsx("input",{type:"text",value:L.title,onChange:F=>B(P.id,L.id,"title",F.target.value),placeholder:"Lesson title",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"text",value:L.duration,onChange:F=>B(P.id,L.id,"duration",F.target.value),placeholder:"Duration (e.g., 15 min)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-3",children:L.type==="video"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-purple-50 text-purple-700 border border-purple-200 rounded-lg hover:bg-purple-100 cursor-pointer text-sm",children:[e.jsx(be,{className:"h-4 w-4"}),L.content&&!L.content.includes("Uploading")?"Change Video":"Upload Video",e.jsx("input",{type:"file",accept:"video/*",onChange:F=>ne(P.id,L.id,F),className:"hidden",disabled:n[`${P.id}-${L.id}`]!==void 0})]}),L.content&&!L.content.includes("Uploading")&&e.jsx(Qe,{className:"h-5 w-5 text-green-600",title:"Video uploaded"})]}),n[`${P.id}-${L.id}`]!==void 0&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[n[`${P.id}-${L.id}`],"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-purple-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${n[`${P.id}-${L.id}`]}%`}})})]})]}):e.jsx("input",{type:"url",value:L.content,onChange:F=>B(P.id,L.id,"content",F.target.value),placeholder:"URL or content",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx("div",{className:"md:col-span-1 flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>ee(P.id,L.id),className:"text-red-500 hover:text-red-700",title:"Remove Lesson",children:e.jsx(oe,{className:"h-5 w-5"})})})]})},L.id))}),e.jsxs("button",{type:"button",onClick:()=>U(P.id),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium",children:[e.jsx(xe,{className:"h-4 w-4"}),"Add Lesson to ",P.title]})]},P.id)),H.length===0&&e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No modules added yet"}),e.jsxs("button",{type:"button",onClick:X,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(xe,{className:"h-4 w-4"}),"Add Your First Module"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:x,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zs,{className:"h-4 w-4"}),"Create Course"]})})]})]})]})},ye=()=>{const s=localStorage.getItem("access_token")||localStorage.getItem("token");return s?s.startsWith("eyJ")?s:(console.error("âŒ Invalid token format"),localStorage.removeItem("token"),localStorage.removeItem("access_token"),null):(console.error("âŒ No token found. Please login."),null)},Ps=()=>{const s=ye();if(!s)return!1;try{const t=JSON.parse(atob(s.split(".")[1])).exp*1e3;return Date.now()>=t+3e5?(console.error("âŒ Token expired"),!1):!0}catch{return console.warn("âš ï¸ Could not decode token, assuming valid"),!0}},Xs=()=>{try{const s=localStorage.getItem("user");return s&&JSON.parse(s).role||null}catch(s){return console.error("Error getting user role:",s),null}},Ds=()=>Xs()==="teacher",ca=()=>{console.log("=== TOKEN DEBUG ===");const s=localStorage.getItem("token");console.log("1. Token exists:",!!s),s&&(console.log("2. Token format valid:",s.startsWith("eyJ")),console.log("3. Token length:",s.length),console.log("4. Token valid:",Ps()));const a=Xs();console.log("5. User role:",a),console.log("6. Is teacher:",Ds()),s?Ps()?Ds()?console.log("âœ… Everything looks good!"):console.log("âŒ Solution: Need teacher account to upload videos"):console.log("âŒ Solution: Token expired. Logout and login again"):console.log("âŒ Solution: Please login")};typeof window<"u"&&(window.debugToken=ca);const ps=({type:s,message:a,onClose:t,duration:n=5e3})=>(r.useEffect(()=>{const u=setTimeout(()=>{t()},n);return()=>clearTimeout(u)},[t,n]),e.jsxs("div",{className:`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2 ${s==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[s==="success"?e.jsx(K,{className:"h-5 w-5"}):e.jsx(Ne,{className:"h-5 w-5"}),e.jsx("span",{children:a}),e.jsx("button",{onClick:t,className:"ml-2 hover:opacity-75",children:e.jsx(oe,{className:"h-4 w-4"})})]})),et=()=>{const[s,a]=r.useState([]),[t,n]=r.useState(null),[u,d]=r.useState(!0),[x,b]=r.useState({show:!1,submission:null}),[i,c]=r.useState(""),[g,N]=r.useState(""),[j,A]=r.useState(!1),[y,v]=r.useState(null);r.useEffect(()=>{p()},[]);const p=async()=>{try{const h=ye();if(!h){d(!1);return}const f=await fetch("http://localhost:5000/api/assignments/",{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(f.ok){const D=await f.json();a(D.assignments)}}catch(h){console.error("Error fetching assignments:",h),v({type:"error",message:"Failed to load assignments"})}finally{d(!1)}},m=async h=>{try{const f=ye(),D=await fetch(`http://localhost:5000/api/assignments/${h}`,{headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(D.ok){const I=await D.json();n(I.assignment)}}catch(f){console.error("Error fetching assignment details:",f),v({type:"error",message:"Failed to load assignment details"})}},w=async()=>{if(!x.submission)return;const h=parseFloat(i);if(isNaN(h)||h<0||h>((t==null?void 0:t.max_points)||100)){v({type:"error",message:`Grade must be between 0 and ${(t==null?void 0:t.max_points)||100}`});return}A(!0);try{const f=ye(),D=await fetch(`http://localhost:5000/api/assignments/submissions/${x.submission._id}/grade`,{method:"POST",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify({grade:h,feedback:g.trim()})});if(D.ok)v({type:"success",message:"Grade submitted successfully!"}),b({show:!1,submission:null}),c(""),N(""),t&&m(t._id);else{const I=await D.json();v({type:"error",message:I.error||"Failed to submit grade"})}}catch(f){console.error("Error grading submission:",f),v({type:"error",message:"Failed to submit grade"})}finally{A(!1)}},l=h=>{var f;b({show:!0,submission:h}),c(((f=h.grade)==null?void 0:f.toString())||""),N(h.feedback||"")},o=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),S=h=>{if(!h.submissions)return{total:0,graded:0,pending:0};const f=h.submissions.length,D=h.submissions.filter(C=>C.status==="graded").length,I=f-D;return{total:f,graded:D,pending:I}};if(u)return e.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading assignments..."})]})});if(t){const h=S(t);return e.jsxs("div",{className:"p-6",children:[e.jsx("button",{onClick:()=>n(null),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:"â† Back to Assignments"}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[e.jsx(W,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Submissions"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h.total})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Graded"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:h.graded})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 mb-1",children:[e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Pending"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:h.pending})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[e.jsx(Z,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Max Points"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:t.max_points})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Student Submissions"}),!t.submissions||t.submissions.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(te,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No submissions yet"})]}):t.submissions.map(f=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:f.student_name}),e.jsx("span",{className:"text-sm text-gray-500",children:f.roll_no}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.status==="graded"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:f.status==="graded"?"Graded":"Pending Review"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:f.student_email}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Submission:"}),e.jsx("p",{className:"text-gray-600",children:f.text_content}),f.file_name&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-blue-600",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:f.file_name}),e.jsxs("button",{className:"hover:underline flex items-center gap-1",children:[e.jsx(We,{className:"h-3 w-3"}),"Download"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Submitted: ",o(f.submitted_at)]})]}),f.grade!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600 font-medium",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsxs("span",{children:["Grade: ",f.grade,"/",t.max_points]})]})]}),f.feedback&&e.jsxs("div",{className:"mt-3 bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Feedback:"}),e.jsx("p",{className:"text-sm text-blue-800",children:f.feedback})]})]}),e.jsx("button",{onClick:()=>l(f),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:f.status==="graded"?e.jsxs(e.Fragment,{children:[e.jsx(Us,{className:"h-4 w-4"}),"Edit Grade"]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4"}),"Grade"]})})]})},f._id))]}),x.show&&x.submission&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Grade Submission"}),e.jsx("p",{className:"text-gray-600 mt-1",children:x.submission.student_name})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Grade (out of ",t.max_points,")"]}),e.jsx("input",{type:"number",value:i,onChange:f=>c(f.target.value),min:"0",max:t.max_points,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`Enter grade (0-${t.max_points})`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),e.jsx("textarea",{value:g,onChange:f=>N(f.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Provide feedback to the student..."})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(Ne,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Note"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Student will receive a notification about their grade and feedback."})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{b({show:!1,submission:null}),c(""),N("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:j,children:"Cancel"}),e.jsx("button",{onClick:w,disabled:j||!i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4"}),"Submit Grade"]})})]})]})}),y&&e.jsx(ps,{type:y.type,message:y.message,onClose:()=>v(null)})]})}return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Assignment Management"}),e.jsx("p",{className:"text-gray-600",children:"Review and grade student submissions"})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 text-center",children:[e.jsx(te,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No assignments found"})]}):s.map(h=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:h.title}),e.jsx("p",{className:"text-gray-600 mb-3",children:h.description}),e.jsxs("p",{className:"text-sm text-blue-600 mb-3",children:["Course: ",h.course_title]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",o(h.due_date)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsxs("span",{children:[h.max_points," points"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:[h.submission_count," submissions"]})]})]})]}),e.jsxs("button",{onClick:()=>m(h._id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),"View Submissions"]})]})},h._id))}),y&&e.jsx(ps,{type:y.type,message:y.message,onClose:()=>v(null)})]})},da=()=>{_e();const{user:s}=V(),[a,t]=r.useState("all"),[n,u]=r.useState(""),[d,x]=r.useState(null),[b,i]=r.useState(!1),[c,g]=r.useState(""),[N,j]=r.useState([]);if((s==null?void 0:s.role)==="teacher")return e.jsx(et,{});const A=[{id:"1",title:"Linear Regression Implementation",courseId:"1",courseName:"Introduction to Machine Learning",instructor:"Dr. Sarah Johnson",dueDate:"2024-02-15T23:59:00",status:"pending",description:"Implement a linear regression model using Python and scikit-learn",instructions:`
        <h3>Assignment Instructions:</h3>
        <p>In this assignment, you will implement a linear regression model from scratch and compare it with scikit-learn's implementation.</p>
        
        <h4>Requirements:</h4>
        <ul>
          <li>Implement linear regression using gradient descent</li>
          <li>Use the provided dataset (housing_prices.csv)</li>
          <li>Create visualizations showing the regression line</li>
          <li>Compare your implementation with scikit-learn</li>
          <li>Write a report explaining your findings</li>
        </ul>
        
        <h4>Deliverables:</h4>
        <ul>
          <li>Python notebook (.ipynb file)</li>
          <li>Written report (PDF format)</li>
          <li>Dataset analysis and visualizations</li>
        </ul>
        
        <h4>Grading Criteria:</h4>
        <ul>
          <li>Code implementation (40%)</li>
          <li>Accuracy of results (30%)</li>
          <li>Report quality (20%)</li>
          <li>Code documentation (10%)</li>
        </ul>
      `,maxPoints:100,submissionType:"both",attachments:["housing_prices.csv","assignment_template.ipynb"]},{id:"2",title:"Python Code Optimization",courseId:"2",courseName:"Advanced Python Programming",instructor:"Prof. Michael Chen",dueDate:"2024-02-12T23:59:00",status:"submitted",submittedAt:"2024-02-10T15:30:00",description:"Review and optimize the provided Python code for performance",instructions:`
        <h3>Code Optimization Challenge:</h3>
        <p>You are given a Python script that processes large datasets but runs slowly. Your task is to optimize it for better performance.</p>
        
        <h4>Tasks:</h4>
        <ul>
          <li>Profile the existing code to identify bottlenecks</li>
          <li>Implement optimizations using appropriate data structures</li>
          <li>Use vectorization where possible</li>
          <li>Document your optimization strategies</li>
        </ul>
      `,maxPoints:80,submissionType:"file",attachments:["slow_code.py","test_data.csv"]},{id:"3",title:"Data Visualization Dashboard",courseId:"3",courseName:"Data Science Fundamentals",instructor:"Dr. Emily Rodriguez",dueDate:"2024-02-18T23:59:00",status:"graded",grade:95,submittedAt:"2024-02-16T14:20:00",feedback:"Excellent work! Your dashboard is well-designed and provides clear insights. The interactive elements work perfectly. Minor suggestion: consider adding more color customization options.",description:"Create an interactive dashboard using matplotlib and plotly",instructions:`
        <h3>Dashboard Creation:</h3>
        <p>Build an interactive data visualization dashboard that tells a compelling story with data.</p>
        
        <h4>Requirements:</h4>
        <ul>
          <li>Use at least 3 different chart types</li>
          <li>Include interactive elements</li>
          <li>Provide clear insights and conclusions</li>
          <li>Make it responsive and user-friendly</li>
        </ul>
      `,maxPoints:120,submissionType:"both",attachments:["sample_data.csv"]}],y=A.filter(h=>h.title.toLowerCase().includes(n.toLowerCase())||h.courseName.toLowerCase().includes(n.toLowerCase())).filter(h=>a==="all"||h.status===a),v={all:A.length,pending:A.filter(h=>h.status==="pending").length,submitted:A.filter(h=>h.status==="submitted").length,graded:A.filter(h=>h.status==="graded").length},p=()=>{d&&(console.log("Submitting assignment:",{assignmentId:d.id,text:c,files:N}),g(""),j([]),i(!1),x(null),alert("Assignment submitted successfully!"))},m=h=>{const f=Array.from(h.target.files||[]);j(D=>[...D,...f])},w=h=>{j(f=>f.filter((D,I)=>I!==h))},l=h=>new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),o=h=>{const f=new Date(h),D=new Date,I=f.getTime()-D.getTime();return Math.ceil(I/(1e3*60*60*24))},S=h=>{switch(h){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"submitted":return"bg-blue-100 text-blue-800 border-blue-200";case"graded":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Assignments"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage your coursework"})]}),(s==null?void 0:s.role)==="instructor"&&e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),"Create Assignment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(te,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.all})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Q,{className:"h-5 w-5 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pending"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.pending})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Submitted"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.submitted})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Graded"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.graded})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search assignments...",value:n,onChange:h=>u(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:a,onChange:h=>t(h.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"graded",children:"Graded"})]})]})]})}),e.jsx("div",{className:"space-y-6",children:y.length>0?y.map(h=>{const f=o(h.dueDate),D=f<0,I=f<=3&&f>=0;return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:h.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${S(h.status)}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)}),D&&h.status==="pending"&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 border border-red-200",children:"Overdue"}),I&&h.status==="pending"&&e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 border border-orange-200",children:"Due Soon"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:h.courseName})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{children:h.instructor})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",l(h.dueDate)]})]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:h.description}),h.status==="graded"&&h.grade&&e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"font-semibold text-green-900",children:["Grade: ",h.grade,"/",h.maxPoints]})]})}),h.feedback&&e.jsx("div",{className:"flex-1 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Feedback:"})," ",h.feedback]})})]}),h.submittedAt&&e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[e.jsx("span",{className:"font-medium",children:"Submitted:"})," ",l(h.submittedAt)]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>x(h),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(ie,{className:"h-4 w-4"}),"View Details"]}),h.attachments&&h.attachments.length>0&&e.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-gray-700",children:[e.jsx(We,{className:"h-4 w-4"}),"Download Files (",h.attachments.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[h.status==="pending"&&e.jsxs("button",{onClick:()=>{x(h),i(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Submit Assignment"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[h.maxPoints," points"]}),f>=0?e.jsx("div",{className:"text-xs text-gray-500",children:f===0?"Due today":`${f} days left`}):e.jsxs("div",{className:"text-xs text-red-500",children:[Math.abs(f)," days overdue"]})]})]})]})]},h.id)}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:[e.jsx(te,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No assignments found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})}),d&&!b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:d.title}),e.jsx("p",{className:"text-gray-600",children:d.courseName})]}),e.jsx("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(oe,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:d.instructions}})}),d.attachments&&d.attachments.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Assignment Files:"}),e.jsx("div",{className:"space-y-2",children:d.attachments.map((h,f)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(te,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:h}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Download"})]},f))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Assignment Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Due Date:"}),e.jsx("span",{className:"font-medium",children:l(d.dueDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Points:"}),e.jsx("span",{className:"font-medium",children:d.maxPoints})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(d.status)}`,children:d.status.charAt(0).toUpperCase()+d.status.slice(1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Submission Type:"}),e.jsx("span",{className:"font-medium capitalize",children:d.submissionType})]})]})]}),d.status==="graded"&&d.grade&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Grade Received"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:[d.grade,"/",d.maxPoints]}),d.feedback&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Feedback:"}),e.jsx("p",{className:"text-sm text-green-800",children:d.feedback})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[d.status==="pending"&&e.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(be,{className:"h-5 w-5"}),"Submit Assignment"]}),e.jsx("button",{onClick:()=>x(null),className:"bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Close"})]})]})]})})]})}),b&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Submit Assignment"}),e.jsx("button",{onClick:()=>{i(!1),g(""),j([])},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(oe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:d.title}),e.jsxs("p",{className:"text-sm text-blue-800",children:["Due: ",l(d.dueDate)]})]}),(d.submissionType==="text"||d.submissionType==="both")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Written Submission"}),e.jsx("textarea",{value:c,onChange:h=>g(h.target.value),placeholder:"Enter your written response here...",rows:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),(d.submissionType==="file"||d.submissionType==="both")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Upload"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[e.jsx(be,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Drag and drop files here, or click to browse"}),e.jsx("input",{type:"file",multiple:!0,onChange:m,className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer inline-block",children:"Choose Files"})]}),N.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:N.map((h,f)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:h.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(h.size/1024/1024).toFixed(2)," MB)"]})]}),e.jsx("button",{onClick:()=>w(f),className:"text-red-600 hover:text-red-700",children:e.jsx(oe,{className:"h-4 w-4"})})]},f))})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ce,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Before submitting:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Review your work carefully"}),e.jsx("li",{children:"Ensure all required files are attached"}),e.jsx("li",{children:"Check that your submission meets all requirements"}),e.jsx("li",{children:"You can resubmit before the deadline if needed"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{i(!1),g(""),j([])},className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:p,disabled:!c.trim()&&N.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Submit Assignment"]})]})]})})]})},ma=()=>{const[s,a]=r.useState(""),[t,n]=r.useState("all"),[u,d]=r.useState(!1),[x,b]=r.useState({title:"",content:"",course:"",tags:[]}),[i,c]=r.useState([{id:"1",title:"Understanding Gradient Descent Algorithm",author:"Alex Chen",course:"Machine Learning Fundamentals",lastReply:"2 hours ago",replies:12,likes:8,isResolved:!1,tags:["machine-learning","algorithms","math"]},{id:"2",title:"Best Practices for Data Preprocessing",author:"Sarah Kim",course:"Data Science Fundamentals",lastReply:"5 hours ago",replies:7,likes:15,isResolved:!0,tags:["data-science","preprocessing","python"]},{id:"3",title:"Python Virtual Environments Setup Help",author:"Mike Johnson",course:"Advanced Python Programming",lastReply:"1 day ago",replies:23,likes:31,isResolved:!0,tags:["python","environment","setup"]}]),g=["Machine Learning Fundamentals","Data Science Fundamentals","Advanced Python Programming","Web Development Basics","Database Design"],N=["machine-learning","python","data-science","algorithms","setup","web-dev","database"],j=()=>{d(!0)},A=()=>{if(!x.title.trim()||!x.content.trim()||!x.course){alert("Please fill in all required fields");return}const m={id:Date.now().toString(),title:x.title,author:"You",course:x.course,lastReply:"Just now",replies:0,likes:0,isResolved:!1,tags:x.tags};c([m,...i]),b({title:"",content:"",course:"",tags:[]}),d(!1)},y=m=>{b(w=>({...w,tags:w.tags.includes(m)?w.tags.filter(l=>l!==m):[...w.tags,m]}))},v=["all","machine-learning","python","data-science","algorithms","setup"],p=i.filter(m=>m.title.toLowerCase().includes(s.toLowerCase())||m.course.toLowerCase().includes(s.toLowerCase())).filter(m=>t==="all"||m.tags.includes(t));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Discussions"}),e.jsx("p",{className:"text-gray-600",children:"Engage with your peers and instructors"})]}),e.jsxs("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5"}),"Start Discussion"]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search discussions...",value:s,onChange:m=>a(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5 text-gray-400"}),e.jsx("select",{value:t,onChange:m=>n(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:v.map(m=>e.jsx("option",{value:m,children:m==="all"?"All Topics":m},m))})]})]})}),e.jsx("div",{className:"space-y-4",children:p.map(m=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-sm transition-shadow duration-200",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-blue-600 cursor-pointer",children:m.title}),m.isResolved&&e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:"Resolved"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["in ",m.course]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.tags.map(w=>e.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",children:["#",w]},w))})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:["by ",m.author]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:m.lastReply})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-1 text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(pt,{className:"h-4 w-4"}),e.jsx("span",{children:m.likes})]}),e.jsxs("button",{className:"flex items-center gap-1 text-gray-600 hover:text-blue-600 transition-colors",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:m.replies})]})]})]})]},m.id))}),p.length===0&&e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:[e.jsx(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No discussions found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or start a new discussion"})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Start New Discussion"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(oe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discussion Title *"}),e.jsx("input",{type:"text",value:x.title,onChange:m=>b(w=>({...w,title:m.target.value})),placeholder:"What would you like to discuss?",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course *"}),e.jsxs("select",{value:x.course,onChange:m=>b(w=>({...w,course:m.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select a course"}),g.map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:x.content,onChange:m=>b(w=>({...w,content:m.target.value})),placeholder:"Describe your question or topic in detail...",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(m=>e.jsxs("button",{type:"button",onClick:()=>y(m),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${x.tags.includes(m)?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200"}`,children:[e.jsx(ft,{className:"h-3 w-3 inline mr-1"}),m]},m))})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:A,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Start Discussion"]})]})]})})]})},xa=()=>{V();const s={weeklyProgress:[{day:"Mon",hours:2.5,completed:3},{day:"Tue",hours:3.2,completed:4},{day:"Wed",hours:1.8,completed:2},{day:"Thu",hours:4.1,completed:5},{day:"Fri",hours:2.9,completed:3},{day:"Sat",hours:3.5,completed:4},{day:"Sun",hours:2.1,completed:2}],subjectPerformance:[{subject:"Machine Learning",progress:85,grade:"A-"},{subject:"Python Programming",progress:72,grade:"B+"},{subject:"Data Science",progress:94,grade:"A"},{subject:"Statistics",progress:68,grade:"B"}]};return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Learning Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Track your progress and performance insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Q,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Study Time"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"124.5h"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"+12.3h this week"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(as,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"87%"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"+5% improvement"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(Z,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Grade"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"A-"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"Maintained"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(re,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Learning Streak"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"15 days"})]})]}),e.jsx("p",{className:"text-sm text-green-600",children:"Personal best!"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(Re,{className:"h-6 w-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Weekly Study Hours"})]}),e.jsx("div",{className:"space-y-4",children:s.weeklyProgress.map((a,t)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 w-8",children:a.day}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${a.hours/5*100}%`}})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12",children:[a.hours,"h"]})]},t))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(jt,{className:"h-6 w-6 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Subject Performance"})]}),e.jsx("div",{className:"space-y-4",children:s.subjectPerformance.map((a,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.subject}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:a.grade})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${a.progress}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[a.progress,"%"]})]})]},t))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Learning Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Most Active Day"})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:"Thursday"}),e.jsx("p",{className:"text-sm text-gray-600",children:"4.1 hours average"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(G,{className:"h-5 w-5 text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Preferred Subject"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:"Data Science"}),e.jsx("p",{className:"text-sm text-gray-600",children:"94% completion rate"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(re,{className:"h-5 w-5 text-purple-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Improvement Rate"})]}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:"+15%"}),e.jsx("p",{className:"text-sm text-gray-600",children:"vs last month"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-2 rounded-lg",children:e.jsx(re,{className:"h-5 w-5 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI-Powered Insights"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Study Pattern Analysis"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You perform best during afternoon sessions (2-4 PM). Consider scheduling difficult topics during this time."})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Improvement Suggestion"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your Python scores could improve by 12% with more hands-on practice. Try coding exercises daily."})]})]})]})]})},ua=()=>{const[s,a]=r.useState([]),[t,n]=r.useState(""),[u,d]=r.useState(!1),[x,b]=r.useState("general"),i=r.useRef(null),c=[{icon:Rs,text:"Explain a topic",action:"Explain the concept of ",mode:"explain"},{icon:te,text:"Summarize notes",action:"Summarize this: ",mode:"summarize"},{icon:yt,text:"Quiz help",action:"Help me understand this quiz question: ",mode:"quiz"},{icon:Fs,text:"Ask a question",action:"I have a question about ",mode:"qa"},{icon:G,text:"Study tips",action:"Give me study tips for ",mode:"general"},{icon:Pe,text:"Course help",action:"Help me with my course on ",mode:"general"}];r.useEffect(()=>{(async()=>{try{const A=await Ue.getWelcomeMessage();a([{id:"1",content:A.message,sender:"ai",timestamp:new Date,type:"welcome"}])}catch(A){console.error("Failed to load welcome message:",A),a([{id:"1",content:`## ðŸ‘‹ Hello! Welcome to Your AI Study Assistant!

I'm here to help you succeed in your learning journey!

### ðŸŽ¯ My Capabilities:

**ðŸ“š Explain Topics** - Ask me to explain any concept in simple terms

**ðŸ“ Summarize Content** - I can summarize long notes or PDFs

**â“ Answer Questions** - Ask me anything about your course materials

**ðŸŽ¯ Quiz Help** - Stuck on a quiz? I'll guide you to the answer

**ðŸ’¡ Study Tips** - Get personalized study strategies

**How can I help you today?** ðŸ˜Š`,sender:"ai",timestamp:new Date,type:"welcome"}])}})()},[]),r.useEffect(()=>{var j;(j=i.current)==null||j.scrollIntoView({behavior:"smooth"})},[s,u]);const g=async()=>{if(!t.trim())return;const j={id:Date.now().toString(),content:t,sender:"user",timestamp:new Date,type:x};a(y=>[...y,j]);const A=t;n(""),d(!0);try{const y=await Ue.chat(A),v={id:(Date.now()+1).toString(),content:y.response,sender:"ai",timestamp:new Date,type:y.type||x};a(p=>[...p,v])}catch(y){console.error("Failed to get AI response:",y);const v={id:(Date.now()+1).toString(),content:`## âš ï¸ Oops! Something went wrong.

I'm having trouble connecting right now. Please try again in a moment.

In the meantime, you can:
- Check your course materials
- Review your notes
- Ask your instructor for help

I'll be back soon! ðŸ˜Š`,sender:"ai",timestamp:new Date,type:"error"};a(p=>[...p,v])}finally{d(!1)}},N=(j,A)=>{n(j),b(A)};return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI Learning Assistant"}),e.jsx("p",{className:"text-gray-600",children:"Your personal AI tutor for explanations, summaries, Q&A, and study help"})]}),e.jsxs("div",{className:"mb-4 flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>b("general"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="general"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ðŸ’¬ General Chat"}),e.jsx("button",{onClick:()=>b("explain"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="explain"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ðŸ’¡ Explain Topic"}),e.jsx("button",{onClick:()=>b("summarize"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="summarize"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ðŸ“ Summarize"}),e.jsx("button",{onClick:()=>b("quiz"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="quiz"?"bg-yellow-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ðŸŽ¯ Quiz Help"}),e.jsx("button",{onClick:()=>b("qa"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="qa"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"â“ Q&A"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 h-[650px] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-lg",children:e.jsx(me,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"AI Study Assistant"}),e.jsx("p",{className:"text-sm text-green-600",children:"â— Online & Ready to Help"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Mode: ",e.jsx("span",{className:"font-medium",children:x==="general"?"General Chat":x==="explain"?"Explain Topic":x==="summarize"?"Summarize":x==="quiz"?"Quiz Help":"Q&A"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.map(j=>e.jsxs("div",{className:`flex gap-3 ${j.sender==="user"?"justify-end":"justify-start"}`,children:[j.sender==="ai"&&e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0",children:e.jsx(Ns,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:`max-w-2xl px-4 py-3 rounded-lg ${j.sender==="user"?"bg-blue-600 text-white":"bg-gray-50 text-gray-900 border border-gray-200"}`,children:[j.sender==="ai"?e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx(gs,{content:j.content})}):e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:j.content}),e.jsx("p",{className:`text-xs mt-2 ${j.sender==="user"?"text-blue-100":"text-gray-500"}`,children:j.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),j.sender==="user"&&e.jsx("div",{className:"bg-blue-600 p-2 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0",children:e.jsx(ve,{className:"h-5 w-5 text-white"})})]},j.id)),u&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-full w-10 h-10 flex items-center justify-center flex-shrink-0",children:e.jsx(Ns,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 px-4 py-3 rounded-lg",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"AI is thinking..."})]})]}),e.jsx("div",{ref:i})]}),s.length<=1&&e.jsxs("div",{className:"px-4 pb-4 border-t border-gray-200 pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"âœ¨ Quick Actions:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:c.map((j,A)=>e.jsxs("button",{onClick:()=>N(j.action,j.mode),className:"flex items-center gap-2 p-3 text-left bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg hover:from-blue-50 hover:to-purple-50 transition-all border border-gray-200 hover:border-blue-300",children:[e.jsx(j.icon,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:j.text})]},A))})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:t,onChange:j=>n(j.target.value),onKeyPress:j=>j.key==="Enter"&&!j.shiftKey&&g(),placeholder:x==="explain"?"Enter a topic to explain...":x==="summarize"?"Paste content to summarize...":x==="quiz"?"Paste your quiz question...":x==="qa"?"Ask your question...":"Ask me anything about your learning...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsxs("button",{onClick:g,disabled:!t.trim()||u,className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ’¡ Tip: Press Enter to send, Shift+Enter for new line"})]})]})]})})},ha=()=>{var w,l;const{user:s,refreshUser:a}=V(),[t,n]=r.useState(!1),[u,d]=r.useState((s==null?void 0:s.profile_pic)||""),[x,b]=r.useState(!1),[i,c]=r.useState(!1),[g,N]=r.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",department:(s==null?void 0:s.department)||"",year:(s==null?void 0:s.year)||"",semester:(s==null?void 0:s.semester)||"",roll_number:(s==null?void 0:s.roll_number)||"",designation:(s==null?void 0:s.designation)||"",location:"New York, NY",bio:"Passionate learner focused on AI and Machine Learning. Always eager to explore new technologies and share knowledge with the community.",website:"https://johndoe.dev",linkedin:"https://linkedin.com/in/johndoe",github:"https://github.com/johndoe"}),j=async()=>{c(!0);try{const{authAPI:o}=await Zs(async()=>{const{authAPI:h}=await Promise.resolve().then(()=>Ws);return{authAPI:h}},void 0),S={name:g.name,phone:g.phone,profile_pic:u};(s==null?void 0:s.role)==="student"?(S.department=g.department,S.year=g.year,S.semester=g.semester):(s==null?void 0:s.role)==="teacher"&&(S.department=g.department,S.designation=g.designation),await o.updateProfile(S),await a(),n(!1),alert("Profile updated successfully!")}catch(o){console.error("Error updating profile:",o),alert(`Failed to update profile: ${o.message||"Please try again."}`)}finally{c(!1)}},A=()=>{N({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",department:(s==null?void 0:s.department)||"",year:(s==null?void 0:s.year)||"",semester:(s==null?void 0:s.semester)||"",roll_number:(s==null?void 0:s.roll_number)||"",designation:(s==null?void 0:s.designation)||"",location:"New York, NY",bio:"Passionate learner focused on AI and Machine Learning. Always eager to explore new technologies and share knowledge with the community.",website:"https://johndoe.dev",linkedin:"https://linkedin.com/in/johndoe",github:"https://github.com/johndoe"}),d((s==null?void 0:s.profile_pic)||""),n(!1)},y=o=>{var h;const S=(h=o.target.files)==null?void 0:h[0];if(S){if(S.size>5*1024*1024){alert("File size must be less than 5MB");return}if(!S.type.startsWith("image/")){alert("Please select an image file");return}b(!0);const f=new FileReader;f.onload=D=>{var C;const I=(C=D.target)==null?void 0:C.result;d(I),b(!1)},f.onerror=()=>{alert("Failed to read file"),b(!1)},f.readAsDataURL(S)}},v=()=>{d("")},p=[{label:"Courses Completed",value:"12",icon:G,color:"text-blue-600"},{label:"Study Hours",value:"156",icon:Q,color:"text-green-600"},{label:"Certificates",value:"8",icon:Z,color:"text-purple-600"},{label:"Streak Days",value:"23",icon:re,color:"text-orange-600"}],m=[{title:"First Course Completed",description:"Completed your first course",date:"2024-01-15",icon:"ðŸŽ“"},{title:"Week Streak",description:"Studied for 7 consecutive days",date:"2024-01-20",icon:"ðŸ”¥"},{title:"Quiz Master",description:"Scored 100% on 5 quizzes",date:"2024-01-25",icon:"ðŸ†"},{title:"AI Enthusiast",description:"Completed 3 AI courses",date:"2024-02-01",icon:"ðŸ¤–"}];return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[u?e.jsx("img",{src:u,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white/20"}):e.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full flex items-center justify-center text-4xl font-bold",children:(w=s==null?void 0:s.name)==null?void 0:w.charAt(0).toUpperCase()}),e.jsxs("div",{className:"absolute bottom-0 right-0",children:[e.jsx("input",{type:"file",id:"profile-pic-upload",accept:"image/*",onChange:y,className:"hidden"}),e.jsx("label",{htmlFor:"profile-pic-upload",className:"bg-white text-gray-600 p-2 rounded-full shadow-lg hover:bg-gray-50 transition-colors cursor-pointer flex items-center justify-center",children:x?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):e.jsx(xs,{className:"h-4 w-4"})})]}),u&&e.jsx("button",{onClick:v,className:"absolute top-0 right-0 bg-red-500 text-white p-1 rounded-full shadow-lg hover:bg-red-600 transition-colors",title:"Remove profile picture",children:e.jsx(oe,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-blue-100 mb-4 capitalize",children:s==null?void 0:s.role}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Joined January 2024"})]})]})]}),e.jsxs("button",{onClick:()=>n(!t),className:"bg-white/20 hover:bg-white/30 px-6 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Edit Profile"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[t&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"relative",children:u?e.jsx("img",{src:u,alt:"Profile Preview",className:"w-24 h-24 rounded-full object-cover border-2 border-gray-200"}):e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center text-2xl font-bold text-gray-500",children:(l=s==null?void 0:s.name)==null?void 0:l.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{htmlFor:"profile-pic-edit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),u?"Change Picture":"Upload Picture"]}),u&&e.jsxs("button",{onClick:v,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Remove"]})]}),e.jsx("input",{type:"file",id:"profile-pic-edit",accept:"image/*",onChange:y,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Upload a square image (recommended: 400x400px). Max file size: 5MB."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Personal Information"}),t&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:j,disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(zs,{className:"h-4 w-4"}),i?"Saving...":"Save Changes"]}),e.jsxs("button",{onClick:A,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Cancel"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),t?e.jsx("input",{type:"text",value:g.name,onChange:o=>N({...g,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:g.name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:g.email}),e.jsx("p",{className:"text-xs text-gray-500",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),t?e.jsx("input",{type:"tel",value:g.phone,onChange:o=>N({...g,phone:o.target.value}),placeholder:"Enter your phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:g.phone||"Not provided"})]}),(s==null?void 0:s.role)==="student"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roll Number"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.roll_number)||g.roll_number||"Not provided"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Roll number cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),t?e.jsx("input",{type:"text",value:g.department,onChange:o=>N({...g,department:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:g.department||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),t?e.jsxs("select",{value:g.year,onChange:o=>N({...g,year:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Year"}),e.jsx("option",{value:"1st Year",children:"1st Year"}),e.jsx("option",{value:"2nd Year",children:"2nd Year"}),e.jsx("option",{value:"3rd Year",children:"3rd Year"}),e.jsx("option",{value:"4th Year",children:"4th Year"}),e.jsx("option",{value:"Final Year",children:"Final Year"})]}):e.jsx("p",{className:"text-gray-900",children:g.year||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),t?e.jsxs("select",{value:g.semester,onChange:o=>N({...g,semester:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Semester"}),e.jsx("option",{value:"1st Semester",children:"1st Semester"}),e.jsx("option",{value:"2nd Semester",children:"2nd Semester"}),e.jsx("option",{value:"3rd Semester",children:"3rd Semester"}),e.jsx("option",{value:"4th Semester",children:"4th Semester"}),e.jsx("option",{value:"5th Semester",children:"5th Semester"}),e.jsx("option",{value:"6th Semester",children:"6th Semester"}),e.jsx("option",{value:"7th Semester",children:"7th Semester"}),e.jsx("option",{value:"8th Semester",children:"8th Semester"})]}):e.jsx("p",{className:"text-gray-900",children:g.semester||"Not provided"})]})]}),(s==null?void 0:s.role)==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.employee_id)||"Not provided"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Employee ID cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),t?e.jsx("input",{type:"text",value:g.department,onChange:o=>N({...g,department:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:g.department||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),t?e.jsxs("select",{value:(s==null?void 0:s.designation)||"",onChange:o=>N({...g,designation:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Designation"}),e.jsx("option",{value:"Assistant Professor",children:"Assistant Professor"}),e.jsx("option",{value:"Associate Professor",children:"Associate Professor"}),e.jsx("option",{value:"Professor",children:"Professor"}),e.jsx("option",{value:"Lecturer",children:"Lecturer"}),e.jsx("option",{value:"Senior Lecturer",children:"Senior Lecturer"}),e.jsx("option",{value:"Visiting Faculty",children:"Visiting Faculty"}),e.jsx("option",{value:"Guest Lecturer",children:"Guest Lecturer"}),e.jsx("option",{value:"Department Head",children:"Department Head"})]}):e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.designation)||"Not provided"})]})]}),(s==null?void 0:s.role)==="super_admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.employee_id)||"Not provided"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Employee ID cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("p",{className:"text-gray-900",children:g.department||"System Administration"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),e.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.designation)||"Super Administrator"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),t?e.jsx("textarea",{value:g.bio,onChange:o=>N({...g,bio:o.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-900",children:g.bio})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),t?e.jsx("input",{type:"url",value:g.website,onChange:o=>N({...g,website:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("a",{href:g.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:g.website})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn"}),t?e.jsx("input",{type:"url",value:g.linkedin,onChange:o=>N({...g,linkedin:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("a",{href:g.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:"LinkedIn Profile"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub"}),t?e.jsx("input",{type:"url",value:g.github,onChange:o=>N({...g,github:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("a",{href:g.github,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:"GitHub Profile"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Achievements"}),e.jsx("div",{className:"space-y-4",children:m.map((o,S)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl",children:o.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:o.title}),e.jsx("p",{className:"text-sm text-gray-600",children:o.description})]}),e.jsx("div",{className:"text-sm text-gray-500",children:o.date})]},S))})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Learning Stats"}),e.jsx("div",{className:"space-y-4",children:p.map((o,S)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-gray-100 ${o.color}`,children:e.jsx(o.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:o.label}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:o.value})]})]},S))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fe,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enabled"})]})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Manage"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Password"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Last changed 30 days ago"})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Change"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900",children:'Completed "Machine Learning Basics"'}),e.jsx("p",{className:"text-gray-500",children:"2 hours ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900",children:"Submitted assignment for Python Course"}),e.jsx("p",{className:"text-gray-500",children:"1 day ago"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900",children:'Earned "Quiz Master" badge'}),e.jsx("p",{className:"text-gray-500",children:"3 days ago"})]})]})]})]})]})]})},ga=()=>{const[s,a]=r.useState("profile"),[t,n]=r.useState("system"),[u,d]=r.useState("en"),[x,b]=r.useState(!1),[i,c]=r.useState(!1),[g,N]=r.useState(!1),[j,A]=r.useState({email:{courseUpdates:!0,assignments:!0,grades:!0,announcements:!0,reminders:!1},push:{courseUpdates:!1,assignments:!0,grades:!0,announcements:!1,reminders:!0}}),[y,v]=r.useState({profileVisibility:"public",showProgress:!0,showAchievements:!0,allowMessages:!0,showOnlineStatus:!1}),p=[{id:"profile",label:"Profile",icon:ve},{id:"notifications",label:"Notifications",icon:Ee},{id:"privacy",label:"Privacy & Security",icon:fe},{id:"appearance",label:"Appearance",icon:vt},{id:"language",label:"Language & Region",icon:cs},{id:"data",label:"Data & Storage",icon:We}],m=(C,Y,ue)=>{A(H=>({...H,[C]:{...H[C],[Y]:ue}}))},w=(C,Y)=>{v(ue=>({...ue,[C]:Y}))},l=()=>{var Y;const{user:C}=V();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",defaultValue:(C==null?void 0:C.name)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",defaultValue:(C==null?void 0:C.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",defaultValue:(C==null?void 0:C.phone)||"",placeholder:"Enter your phone number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("input",{type:"text",value:((Y=C==null?void 0:C.role)==null?void 0:Y.replace("_"," ").toUpperCase())||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed capitalize"})]}),(C==null?void 0:C.role)==="student"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roll Number"}),e.jsx("input",{type:"text",value:(C==null?void 0:C.roll_number)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Roll number cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",defaultValue:(C==null?void 0:C.department)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),e.jsxs("select",{defaultValue:(C==null?void 0:C.year)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Year"}),e.jsx("option",{value:"1st Year",children:"1st Year"}),e.jsx("option",{value:"2nd Year",children:"2nd Year"}),e.jsx("option",{value:"3rd Year",children:"3rd Year"}),e.jsx("option",{value:"4th Year",children:"4th Year"}),e.jsx("option",{value:"Final Year",children:"Final Year"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Semester"}),e.jsxs("select",{defaultValue:(C==null?void 0:C.semester)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Semester"}),e.jsx("option",{value:"1st Semester",children:"1st Semester"}),e.jsx("option",{value:"2nd Semester",children:"2nd Semester"}),e.jsx("option",{value:"3rd Semester",children:"3rd Semester"}),e.jsx("option",{value:"4th Semester",children:"4th Semester"}),e.jsx("option",{value:"5th Semester",children:"5th Semester"}),e.jsx("option",{value:"6th Semester",children:"6th Semester"}),e.jsx("option",{value:"7th Semester",children:"7th Semester"}),e.jsx("option",{value:"8th Semester",children:"8th Semester"})]})]})]}),(C==null?void 0:C.role)==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("input",{type:"text",value:(C==null?void 0:C.employee_id)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Employee ID cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",defaultValue:(C==null?void 0:C.department)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),e.jsxs("select",{defaultValue:(C==null?void 0:C.designation)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Designation"}),e.jsx("option",{value:"Assistant Professor",children:"Assistant Professor"}),e.jsx("option",{value:"Associate Professor",children:"Associate Professor"}),e.jsx("option",{value:"Professor",children:"Professor"}),e.jsx("option",{value:"Lecturer",children:"Lecturer"}),e.jsx("option",{value:"Senior Lecturer",children:"Senior Lecturer"}),e.jsx("option",{value:"Visiting Faculty",children:"Visiting Faculty"}),e.jsx("option",{value:"Guest Lecturer",children:"Guest Lecturer"}),e.jsx("option",{value:"Department Head",children:"Department Head"})]})]})]}),(C==null?void 0:C.role)==="super_admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsx("input",{type:"text",value:(C==null?void 0:C.employee_id)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("input",{type:"text",value:(C==null?void 0:C.department)||"System Administration",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>b(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?e.jsx(Ie,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>c(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(Ie,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:g?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>N(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g?e.jsx(Ie,{className:"h-4 w-4"}):e.jsx(ie,{className:"h-4 w-4"})})]})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Update Password"})]})]})]})},o=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Notifications"}),e.jsx("div",{className:"space-y-4",children:Object.entries(j.email).map(([C,Y])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Me,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:C.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive email notifications for ",C.toLowerCase()]})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Y,onChange:ue=>m("email",C,ue.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},C))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Push Notifications"}),e.jsx("div",{className:"space-y-4",children:Object.entries(j.push).map(([C,Y])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:C.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive push notifications for ",C.toLowerCase()]})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Y,onChange:ue=>m("push",C,ue.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},C))})]})]}),S=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Privacy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Visibility"}),e.jsxs("select",{value:y.profileVisibility,onChange:C=>w("profileVisibility",C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"public",children:"Public - Anyone can see your profile"}),e.jsx("option",{value:"students",children:"Students Only - Only other students can see"}),e.jsx("option",{value:"private",children:"Private - Only you can see your profile"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Learning Progress"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow others to see your course progress"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.showProgress,onChange:C=>w("showProgress",C.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Achievements"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Display your badges and certificates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.showAchievements,onChange:C=>w("showAchievements",C.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Communication"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Allow Direct Messages"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Let other users send you messages"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.allowMessages,onChange:C=>w("allowMessages",C.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Online Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Let others see when you're online"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y.showOnlineStatus,onChange:C=>w("showOnlineStatus",C.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]}),h=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Theme"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"light",label:"Light",icon:wt},{id:"dark",label:"Dark",icon:St},{id:"system",label:"System",icon:kt}].map(C=>e.jsxs("button",{onClick:()=>n(C.id),className:`p-4 border-2 rounded-lg transition-colors ${t===C.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(C.icon,{className:"h-8 w-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"font-medium text-gray-900",children:C.label})]},C.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Display"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"Small"}),e.jsx("option",{children:"Medium"}),e.jsx("option",{children:"Large"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sidebar Position"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"Left"}),e.jsx("option",{children:"Right"})]})]})]})]})]}),f=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Language"}),e.jsxs("select",{value:u,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"EspaÃ±ol"}),e.jsx("option",{value:"fr",children:"FranÃ§ais"}),e.jsx("option",{value:"de",children:"Deutsch"}),e.jsx("option",{value:"zh",children:"ä¸­æ–‡"}),e.jsx("option",{value:"ja",children:"æ—¥æœ¬èªž"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Region"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"UTC-8 (Pacific Time)"}),e.jsx("option",{children:"UTC-5 (Eastern Time)"}),e.jsx("option",{children:"UTC+0 (GMT)"}),e.jsx("option",{children:"UTC+1 (Central European Time)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{children:"MM/DD/YYYY"}),e.jsx("option",{children:"DD/MM/YYYY"}),e.jsx("option",{children:"YYYY-MM-DD"})]})]})]})]})]}),D=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Export"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Download Your Data"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Export all your learning data including courses, progress, and achievements."}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Request Data Export"]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Storage"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Cache & Offline Data"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Clear cached data to free up storage space."}),e.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Clear Cache"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 text-red-600",children:"Danger Zone"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsxs("button",{className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"Delete Account"]})]})})]})]}),I=()=>{switch(s){case"profile":return l();case"notifications":return o();case"privacy":return S();case"appearance":return h();case"language":return f();case"data":return D();default:return l()}};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account preferences and settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("nav",{className:"space-y-1",children:p.map(C=>e.jsxs("button",{onClick:()=>a(C.id),className:`w-full flex items-center gap-3 px-3 py-2 text-left rounded-lg transition-colors ${s===C.id?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(C.icon,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:C.label})]},C.id))})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:I()})})]})]})},pa=()=>{const[s,a]=r.useState([]),[t,n]=r.useState(!0),[u,d]=r.useState("all"),[x,b]=r.useState(0),i=async()=>{n(!0);try{const y=await Ge.getAll(u==="unread");a(y.notifications||[]),b(y.unread_count||0)}catch(y){console.error("Failed to fetch notifications:",y)}finally{n(!1)}};r.useEffect(()=>{i()},[u]);const c=async y=>{try{await Ge.markAsRead(y),i()}catch(v){console.error("Failed to mark notification as read:",v)}},g=async()=>{try{await Ge.markAllAsRead(),i()}catch(y){console.error("Failed to mark all as read:",y)}},N=async y=>{try{await Ge.delete(y),i()}catch(v){console.error("Failed to delete notification:",v)}},j=y=>{switch(y){case"success":return"âœ…";case"warning":return"âš ï¸";case"error":return"âŒ";default:return"â„¹ï¸"}},A=y=>{switch(y){case"success":return"border-green-200 bg-green-50";case"warning":return"border-yellow-200 bg-yellow-50";case"error":return"border-red-200 bg-red-50";default:return"border-blue-200 bg-blue-50"}};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ee,{className:"h-6 w-6"}),"Notifications"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:x>0?`You have ${x} unread notification${x>1?"s":""}`:"All caught up!"})]}),x>0&&e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ct,{className:"h-4 w-4"}),"Mark All as Read"]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>d("all"),className:`px-4 py-2 font-medium transition-colors ${u==="all"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"All"}),e.jsxs("button",{onClick:()=>d("unread"),className:`px-4 py-2 font-medium transition-colors ${u==="unread"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Unread ",x>0&&`(${x})`]})]})]}),t?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},y))}):s.length===0?e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-12 text-center",children:[e.jsx(Ee,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-600",children:u==="unread"?"You're all caught up!":"You don't have any notifications yet."})]}):e.jsx("div",{className:"space-y-3",children:s.map(y=>e.jsx("div",{className:`border rounded-lg p-4 transition-all ${y.read?"bg-white border-gray-200":`${A(y.type)} border-l-4`}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:j(y.type)}),e.jsx("h3",{className:"font-semibold text-gray-900",children:y.title}),!y.read&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:"New"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:y.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsx("span",{children:new Date(y.created_at).toLocaleString()}),y.link&&e.jsx("a",{href:y.link,className:"text-blue-600 hover:text-blue-700 font-medium",onClick:()=>!y.read&&c(y._id),children:"View Details â†’"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!y.read&&e.jsx("button",{onClick:()=>c(y._id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Mark as read",children:e.jsx(es,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N(y._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete",children:e.jsx(qe,{className:"h-4 w-4"})})]})]})},y._id))})]})},ba=()=>{var m,w,l;const[s,a]=r.useState("1"),[t,n]=r.useState(""),[u,d]=r.useState(""),x=r.useRef(null),b=r.useRef(null),[i]=r.useState([{id:"1",participants:[{id:"2",name:"Dr. Sarah Johnson",role:"Instructor",online:!0},{id:"1",name:"You",role:"Student",online:!0}],lastMessage:{id:"1",senderId:"2",senderName:"Dr. Sarah Johnson",content:"Great question about linear regression! Let me explain...",timestamp:"2024-02-10T14:30:00Z",read:!1},unreadCount:2},{id:"2",participants:[{id:"3",name:"Study Group - ML",role:"Group",online:!1},{id:"1",name:"You",role:"Student",online:!0}],lastMessage:{id:"2",senderId:"4",senderName:"Alice Chen",content:"Anyone want to review for the quiz tomorrow?",timestamp:"2024-02-10T12:15:00Z",read:!0},unreadCount:0}]),[c,g]=r.useState({1:[{id:"1",senderId:"1",senderName:"You",content:"Hi Dr. Johnson, I have a question about the linear regression assignment.",timestamp:"2024-02-10T13:00:00Z",read:!0},{id:"2",senderId:"2",senderName:"Dr. Sarah Johnson",content:"Great question about linear regression! Let me explain the concept step by step. Linear regression is a fundamental algorithm in machine learning that helps us find the best line through our data points.",timestamp:"2024-02-10T14:30:00Z",read:!1},{id:"3",senderId:"2",senderName:"Dr. Sarah Johnson",content:"The key is understanding how we minimize the cost function. Would you like me to share some additional resources?",timestamp:"2024-02-10T14:32:00Z",read:!1}],2:[{id:"4",senderId:"4",senderName:"Alice Chen",content:"Anyone want to review for the quiz tomorrow?",timestamp:"2024-02-10T12:15:00Z",read:!0},{id:"5",senderId:"1",senderName:"You",content:"Yes! I could use some help with the neural networks section.",timestamp:"2024-02-10T12:20:00Z",read:!0}]}),N=o=>{const S=new Date(o),f=Math.floor((new Date().getTime()-S.getTime())/(1e3*60*60));return f<1?"Just now":f<24?S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):S.toLocaleDateString()},j=i.find(o=>o.id===s),A=s?c[s]||[]:[],y=()=>{if(!u.trim()||!s)return;const o={id:Date.now().toString(),senderId:"1",senderName:"You",content:u.trim(),timestamp:new Date().toISOString(),read:!0};g(S=>({...S,[s]:[...S[s]||[],o]})),d("")},v=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),y())},p=()=>{var o;(o=x.current)==null||o.scrollIntoView({behavior:"smooth"})};return r.useEffect(()=>{p()},[A]),r.useEffect(()=>{b.current&&(b.current.style.height="auto",b.current.style.height=b.current.scrollHeight+"px")},[u]),e.jsxs("div",{className:"h-[calc(100vh-2rem)] flex bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"w-80 border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Messages"}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"New Conversation",children:e.jsx(xe,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search conversations...",value:t,onChange:o=>n(o.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:i.filter(o=>{const S=o.participants.find(h=>h.name!=="You");return(S==null?void 0:S.name.toLowerCase().includes(t.toLowerCase()))||o.lastMessage.content.toLowerCase().includes(t.toLowerCase())}).map(o=>{const S=o.participants.find(h=>h.name!=="You");return e.jsx("button",{onClick:()=>a(o.id),className:`w-full p-4 text-left hover:bg-gray-50 border-b border-gray-100 ${s===o.id?"bg-blue-50 border-r-2 border-r-blue-500":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white font-medium",children:S==null?void 0:S.name.charAt(0).toUpperCase()}),(S==null?void 0:S.online)&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:S==null?void 0:S.name}),e.jsx("span",{className:"text-xs text-gray-500",children:N(o.lastMessage.timestamp)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-sm text-gray-600 truncate",children:o.lastMessage.content}),o.unreadCount>0&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:o.unreadCount})]})]})]})},o.id)})})]}),j?e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white font-medium",children:(m=j.participants.find(o=>o.name!=="You"))==null?void 0:m.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-medium text-gray-900",children:(w=j.participants.find(o=>o.name!=="You"))==null?void 0:w.name}),e.jsx("p",{className:"text-sm text-gray-500",children:(l=j.participants.find(o=>o.name!=="You"))!=null&&l.online?"Online":"Offline"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Conversation Info",children:e.jsx(Ms,{className:"h-5 w-5"})})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",id:"messages-container",children:[A.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No messages yet. Start the conversation!"})]})}):A.map(o=>e.jsx("div",{className:`flex ${o.senderId==="1"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-3 rounded-2xl ${o.senderId==="1"?"bg-blue-600 text-white rounded-br-md":"bg-gray-100 text-gray-900 rounded-bl-md"} shadow-sm`,children:[e.jsx("p",{className:"text-sm leading-relaxed",children:o.content}),e.jsx("p",{className:`text-xs mt-2 ${o.senderId==="1"?"text-blue-100":"text-gray-500"}`,children:N(o.timestamp)})]})},o.id)),e.jsx("div",{ref:x})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(At,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{ref:b,value:u,onChange:o=>d(o.target.value),onKeyPress:v,placeholder:"Type a message... (Press Enter to send)",rows:1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none max-h-32 overflow-y-auto"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(Tt,{className:"h-5 w-5"})}),e.jsx("button",{onClick:y,disabled:!u.trim(),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:e.jsx(De,{className:"h-5 w-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a conversation"}),e.jsx("p",{className:"text-gray-600",children:"Choose a conversation from the sidebar to start messaging"})]})})]})},fa=()=>{const[s,a]=r.useState("all"),[t,n]=r.useState(""),[u,d]=r.useState("all"),[x]=r.useState([{id:"1",title:"First Steps",description:"Complete your first course",icon:"ðŸŽ“",category:"learning",rarity:"common",points:10,unlockedAt:"2024-01-15T10:30:00Z",requirements:["Complete 1 course"]},{id:"2",title:"Quiz Master",description:"Score 100% on 5 quizzes",icon:"ðŸ†",category:"performance",rarity:"rare",points:50,unlockedAt:"2024-01-25T14:20:00Z",requirements:["Score 100% on 5 quizzes"]},{id:"3",title:"Week Warrior",description:"Study for 7 consecutive days",icon:"ðŸ”¥",category:"engagement",rarity:"rare",points:30,unlockedAt:"2024-01-20T09:15:00Z",requirements:["Study for 7 consecutive days"]},{id:"4",title:"AI Enthusiast",description:"Complete 3 AI-related courses",icon:"ðŸ¤–",category:"learning",rarity:"epic",points:100,unlockedAt:"2024-02-01T16:45:00Z",requirements:["Complete 3 AI courses"]},{id:"5",title:"Speed Learner",description:"Complete a course in under 2 weeks",icon:"âš¡",category:"performance",rarity:"rare",points:40,progress:{current:8,total:14},requirements:["Complete a course in under 14 days"]},{id:"6",title:"Social Butterfly",description:"Participate in 10 discussion threads",icon:"ðŸ¦‹",category:"social",rarity:"common",points:20,progress:{current:6,total:10},requirements:["Participate in 10 discussions"]},{id:"7",title:"Perfect Score",description:"Get 100% on all assignments in a course",icon:"ðŸ’¯",category:"performance",rarity:"epic",points:75,progress:{current:4,total:5},requirements:["Score 100% on all assignments in one course"]},{id:"8",title:"Knowledge Seeker",description:"Complete 10 courses",icon:"ðŸ“š",category:"learning",rarity:"legendary",points:200,progress:{current:3,total:10},requirements:["Complete 10 courses"]},{id:"9",title:"Early Bird",description:"Submit 5 assignments before the deadline",icon:"ðŸ¦",category:"engagement",rarity:"common",points:15,unlockedAt:"2024-01-18T08:00:00Z",requirements:["Submit 5 assignments early"]},{id:"10",title:"Mentor",description:"Help 5 fellow students in discussions",icon:"ðŸŽ¯",category:"social",rarity:"epic",points:80,progress:{current:2,total:5},requirements:["Help 5 students in discussions"]}]),b=p=>{switch(p){case"common":return"border-gray-300 bg-gray-50";case"rare":return"border-blue-300 bg-blue-50";case"epic":return"border-purple-300 bg-purple-50";case"legendary":return"border-yellow-300 bg-yellow-50";default:return"border-gray-300 bg-gray-50"}},i=p=>{switch(p){case"common":return"text-gray-700";case"rare":return"text-blue-700";case"epic":return"text-purple-700";case"legendary":return"text-yellow-700";default:return"text-gray-700"}},c=p=>{switch(p){case"learning":return G;case"engagement":return Q;case"performance":return re;case"social":return W;case"special":return Ke;default:return $e}},g=x.filter(p=>s==="unlocked"?p.unlockedAt:s==="locked"?!p.unlockedAt:!0).filter(p=>u==="all"?!0:p.category===u).filter(p=>p.title.toLowerCase().includes(t.toLowerCase())||p.description.toLowerCase().includes(t.toLowerCase())),N=x.filter(p=>p.unlockedAt).reduce((p,m)=>p+m.points,0),j=x.filter(p=>p.unlockedAt).length,A=x.length,y=[{id:"all",label:"All Categories",icon:$e},{id:"learning",label:"Learning",icon:G},{id:"engagement",label:"Engagement",icon:Q},{id:"performance",label:"Performance",icon:re},{id:"social",label:"Social",icon:W},{id:"special",label:"Special",icon:Ke}],v=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Achievements"}),e.jsx("p",{className:"text-gray-600",children:"Track your learning milestones and unlock rewards"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Z,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unlocked"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[j,"/",A]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(ds,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completion"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(j/A*100),"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(as,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rank"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"#12"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search achievements...",value:t,onChange:p=>n(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:s,onChange:p=>a(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Achievements"}),e.jsx("option",{value:"unlocked",children:"Unlocked"}),e.jsx("option",{value:"locked",children:"Locked"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:y.map(p=>e.jsxs("button",{onClick:()=>d(p.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${u===p.id?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(p.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(p=>{const m=c(p.category),w=!!p.unlockedAt;return e.jsxs("div",{className:`relative bg-white rounded-xl shadow-sm border-2 p-6 transition-all duration-200 hover:shadow-md ${w?b(p.rarity):"border-gray-200 bg-gray-50 opacity-75"}`,children:[e.jsx("div",{className:`absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-medium capitalize ${w?i(p.rarity):"text-gray-500"}`,children:p.rarity}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:`text-6xl mb-2 ${w?"":"grayscale"}`,children:p.icon}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(m,{className:`h-4 w-4 ${w?"text-gray-600":"text-gray-400"}`}),e.jsx("span",{className:`text-sm font-medium capitalize ${w?"text-gray-600":"text-gray-400"}`,children:p.category})]})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold mb-2 ${w?"text-gray-900":"text-gray-500"}`,children:p.title}),e.jsx("p",{className:`text-sm ${w?"text-gray-600":"text-gray-400"}`,children:p.description})]}),!w&&p.progress&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[p.progress.current,"/",p.progress.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${p.progress.current/p.progress.total*100}%`}})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:`text-sm font-medium mb-2 ${w?"text-gray-700":"text-gray-500"}`,children:"Requirements:"}),e.jsx("ul",{className:"space-y-1",children:p.requirements.map((l,o)=>e.jsxs("li",{className:`text-xs flex items-center gap-2 ${w?"text-gray-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${w?"bg-green-500":"bg-gray-300"}`}),l]},o))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:`h-4 w-4 ${w?"text-yellow-500":"text-gray-400"}`}),e.jsxs("span",{className:`text-sm font-medium ${w?"text-gray-900":"text-gray-500"}`,children:[p.points," pts"]})]}),w?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:v(p.unlockedAt)})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Locked"})]})]}),w&&e.jsx("button",{className:"absolute top-3 left-3 p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Gs,{className:"h-4 w-4"})})]},p.id)})}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx($e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No achievements found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filter criteria"})]})]})},ja=()=>{const[s,a]=r.useState(""),[t,n]=r.useState("all"),[u]=r.useState([{id:"1",name:"Alice Johnson",email:"alice.johnson@university.edu",rollNo:"CS2021001",department:"Computer Science",enrolledCourses:4,completedAssignments:12,averageGrade:92,lastActive:"2024-02-10T14:30:00Z",totalPoints:1250,status:"active"},{id:"2",name:"Bob Smith",email:"bob.smith@university.edu",rollNo:"CS2021002",department:"Computer Science",enrolledCourses:3,completedAssignments:8,averageGrade:78,lastActive:"2024-02-09T16:45:00Z",totalPoints:890,status:"active"},{id:"3",name:"Carol Davis",email:"carol.davis@university.edu",rollNo:"CS2021003",department:"Computer Science",enrolledCourses:5,completedAssignments:15,averageGrade:96,lastActive:"2024-02-10T12:20:00Z",totalPoints:1580,status:"active"}]),d=u.filter(i=>t==="active"?i.status==="active":t==="inactive"?i.status==="inactive":!0).filter(i=>i.name.toLowerCase().includes(s.toLowerCase())||i.email.toLowerCase().includes(s.toLowerCase())||i.rollNo.toLowerCase().includes(s.toLowerCase())),x=i=>{const c=new Date(i),N=Math.floor((new Date().getTime()-c.getTime())/(1e3*60*60));return N<1?"Just now":N<24?`${N}h ago`:c.toLocaleDateString()},b=i=>i>=90?"text-green-600 bg-green-100":i>=80?"text-blue-600 bg-blue-100":i>=70?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Students"}),e.jsx("p",{className:"text-gray-600",children:"Manage and track your students' progress"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(Es,{className:"h-4 w-4"}),"Add Student"]}),e.jsxs("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors flex items-center gap-2",children:[e.jsx(We,{className:"h-4 w-4"}),"Export"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(W,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(re,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.filter(i=>i.status==="active").length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(Re,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg. Grade"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(u.reduce((i,c)=>i+c.averageGrade,0)/u.length),"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(Z,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.reduce((i,c)=>i+c.totalPoints,0).toLocaleString()})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students...",value:s,onChange:i=>a(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:t,onChange:i=>n(i.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Students"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Courses"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Active"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white font-medium",children:i.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-500",children:i.email}),e.jsx("p",{className:"text-xs text-gray-400",children:i.rollNo})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-900",children:[i.enrolledCourses," enrolled"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.completedAssignments," assignments completed"]})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(i.averageGrade)}`,children:[i.averageGrade,"% avg"]})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.totalPoints," points"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:x(i.lastActive)})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-green-600 transition-colors",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",children:e.jsx(Re,{className:"h-4 w-4"})})]})})]},i.id))})]})})})]})},ya=()=>{const[s,a]=r.useState(new Date),[t,n]=r.useState(null),[u,d]=r.useState(!1),[x,b]=r.useState(!1),[i,c]=r.useState({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""}),[g,N]=r.useState([{id:"1",title:"Machine Learning Lecture",description:"Introduction to Neural Networks",type:"class",startTime:"09:00",endTime:"10:30",date:"2024-02-12",location:"Room 101",courseName:"Machine Learning",color:"bg-blue-500"},{id:"2",title:"Office Hours",description:"Available for student questions",type:"office-hours",startTime:"14:00",endTime:"16:00",date:"2024-02-12",location:"Office 205",color:"bg-green-500"}]),j=l=>{const[o,S]=l.split(":"),h=parseInt(o),f=h>=12?"PM":"AM";return`${h%12||12}:${S} ${f}`},A=l=>{const o=[],S=new Date(l),h=S.getDay(),f=S.getDate()-h;S.setDate(f);for(let D=0;D<7;D++){const I=new Date(S);I.setDate(S.getDate()+D),o.push(I)}return o},y=l=>{const o=l.toISOString().split("T")[0];return g.filter(S=>S.date===o)},v=A(s),p=()=>{if(!i.title||!i.date||!i.startTime||!i.endTime){alert("Please fill in all required fields");return}const l={class:"bg-blue-500",meeting:"bg-purple-500",deadline:"bg-red-500",exam:"bg-orange-500","office-hours":"bg-green-500"},o={id:Date.now().toString(),title:i.title,description:i.description,type:i.type,startTime:i.startTime,endTime:i.endTime,date:i.date,location:i.location,courseName:i.courseName,color:l[i.type]};N(S=>[...S,o]),c({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""}),b(!1)},m=l=>{const o=new Date(s);o.setDate(s.getDate()+(l==="next"?7:-7)),a(o)},w=()=>{a(new Date)};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Schedule"}),e.jsx("p",{className:"text-gray-600",children:"Manage your classes and events"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Add Event"]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m("prev"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(rs,{className:"h-5 w-5"})}),e.jsx("button",{onClick:w,className:"px-3 py-1 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg",children:"Today"}),e.jsx("button",{onClick:()=>m("next"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ls,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(l=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:l},l)),v.map((l,o)=>{const S=y(l),h=l.toDateString()===new Date().toDateString();return e.jsxs("div",{className:`min-h-[120px] p-2 border border-gray-100 ${h?"bg-blue-50 border-blue-200":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${h?"text-blue-600":"text-gray-900"}`,children:l.getDate()}),e.jsx("div",{className:"space-y-1",children:S.map(f=>e.jsxs("button",{onClick:()=>{n(f),d(!0)},className:`w-full text-left p-1 rounded text-xs text-white truncate ${f.color} hover:opacity-80`,children:[j(f.startTime)," ",f.title]},f.id))})]},o)})]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Event"}),e.jsx("button",{onClick:()=>{b(!1),c({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""})},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(xe,{className:"h-6 w-6 rotate-45"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),e.jsx("input",{type:"text",value:i.title,onChange:l=>c(o=>({...o,title:l.target.value})),placeholder:"Enter event title",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Type *"}),e.jsxs("select",{value:i.type,onChange:l=>c(o=>({...o,type:l.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"class",children:"Class"}),e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"deadline",children:"Deadline"}),e.jsx("option",{value:"exam",children:"Exam"}),e.jsx("option",{value:"office-hours",children:"Office Hours"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:i.date,onChange:l=>c(o=>({...o,date:l.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),e.jsx("input",{type:"time",value:i.startTime,onChange:l=>c(o=>({...o,startTime:l.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),e.jsx("input",{type:"time",value:i.endTime,onChange:l=>c(o=>({...o,endTime:l.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Name"}),e.jsx("input",{type:"text",value:i.courseName,onChange:l=>c(o=>({...o,courseName:l.target.value})),placeholder:"e.g., Machine Learning",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:i.location,onChange:l=>c(o=>({...o,location:l.target.value})),placeholder:"e.g., Room 101 or Online",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:i.description,onChange:l=>c(o=>({...o,description:l.target.value})),placeholder:"Add event description or notes...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{b(!1),c({title:"",description:"",type:"class",startTime:"",endTime:"",date:"",location:"",courseName:""})},className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Add Event"]})]})]})}),u&&t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.title}),e.jsx("button",{onClick:()=>{d(!1),n(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(xe,{className:"h-6 w-6 rotate-45"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${t.color}`}),e.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:t.type})]}),t.courseName&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:t.courseName})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"h-5 w-5 text-gray-400"}),e.jsxs("span",{className:"text-gray-700",children:[j(t.startTime)," - ",j(t.endTime)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:new Date(t.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.location&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Dt,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:t.location})]}),t.description&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-gray-700",children:t.description})})]}),e.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{d(!1),n(null)},className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})})]})})]})},st=({videoId:s,title:a,onClose:t,onComplete:n})=>{const u=r.useRef(null),[d,x]=r.useState(0),[b,i]=r.useState(0);r.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]);const c=()=>`http://localhost:5000/api/videos/stream/${s}`;return r.useEffect(()=>{if(u.current){const g=ye();g&&(async()=>{try{const j=await fetch(c(),{headers:{Authorization:`Bearer ${g}`}});if(j.ok){const A=await j.blob(),y=URL.createObjectURL(A);u.current&&(u.current.src=y)}}catch(j){console.error("Failed to load video:",j)}})()}},[s]),r.useEffect(()=>{const g=u.current;if(!g)return;const N=async()=>{const p=ye();if(p)try{await fetch(`http://localhost:5000/api/progress/video/${s}/watch-time`,{method:"POST",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify({watch_time:d,total_duration:b})})}catch(m){console.error("Failed to update watch progress:",m)}},j=()=>{x(g.currentTime)},A=()=>{i(g.duration)},y=()=>{N(),n&&n()};g.addEventListener("timeupdate",j),g.addEventListener("loadedmetadata",A),g.addEventListener("ended",y);const v=setInterval(N,1e4);return()=>{g.removeEventListener("timeupdate",j),g.removeEventListener("loadedmetadata",A),g.removeEventListener("ended",y),clearInterval(v),N()}},[s,d,b,n]),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:e.jsx("div",{className:"relative w-full max-w-5xl mx-4",children:e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(oe,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"bg-black",children:e.jsx("video",{ref:u,controls:!0,autoPlay:!0,className:"w-full",style:{maxHeight:"70vh"},children:"Your browser does not support the video tag."})})]})})})},Na=({courseId:s})=>{const[a,t]=r.useState("overview"),[n,u]=r.useState(null),[d,x]=r.useState(null),[b,i]=r.useState(null),[c,g]=r.useState(!0),[N,j]=r.useState({show:!1,assignment:null}),[A,y]=r.useState(""),[v,p]=r.useState(null),[m,w]=r.useState(!1),[l,o]=r.useState(null),[S,h]=r.useState(null),f=b||{id:"0",title:"Select a Course",description:"Please select a course from your courses list to view details.",instructor:"N/A",instructorAvatar:"",rating:0,students:0,duration:"N/A",level:"Beginner",category:"General",progress:0,thumbnail:"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",enrolled:!1,completedLessons:0,totalLessons:0,lastAccessed:new Date().toISOString(),skills:[],prerequisites:[]},D=(b==null?void 0:b.modules)||[],I=(b==null?void 0:b.assignments)||[];r.useEffect(()=>{(async()=>{var R,ge,J,X;try{const k=ye();if(!k){g(!1);return}if(!s){const ee=await fetch("http://localhost:5000/api/assignments/",{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});if(ee.ok){const ne=(await ee.json()).assignments.map(he=>{var Te,P,_;return{id:he._id,title:he.title,description:he.description,dueDate:he.due_date,status:he.submission_status||"pending",maxPoints:he.max_points,grade:(Te=he.submission)==null?void 0:Te.grade,submittedAt:(P=he.submission)==null?void 0:P.submitted_at,feedback:(_=he.submission)==null?void 0:_.feedback}});i({...f,assignments:ne})}g(!1);return}const[$,U]=await Promise.all([fetch(`http://localhost:5000/api/courses/${s}`,{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}}),fetch(`http://localhost:5000/api/progress/course/${s}`,{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}})]);if($.ok){const B=(await $.json()).course;let ne=null;U.ok&&(ne=(await U.json()).progress,h(ne));const he=((R=ne==null?void 0:ne.materials)==null?void 0:R.completed_ids)||[],Te=((ge=B.materials)==null?void 0:ge.map((_,L)=>({id:_._id,title:_.title,description:_.description||`Module ${L+1}`,duration:_.duration||"10 min",completed:he.includes(_._id),type:_.type==="video"?"video":"reading",materials:[{id:_._id,title:_.title,type:_.type,url:_.file_path||_.url,size:_.file_size}]})))||[],P=((J=B.assignments)==null?void 0:J.map(_=>{var L;return{id:_._id,title:_.title,description:_.description,dueDate:_.due_date,status:_.submission_status||"pending",maxPoints:_.max_points,grade:(L=_.submission)==null?void 0:L.grade}}))||[];i({id:B._id,title:B.title,description:B.description,instructor:B.teacher_name||"Unknown",instructorAvatar:"",rating:4.5,students:0,duration:B.duration||"N/A",level:B.difficulty||"Beginner",category:B.category,progress:(ne==null?void 0:ne.overall_progress)||0,thumbnail:B.thumbnail||"https://images.pexels.com/photos/1181677/pexels-photo-1181677.jpeg?auto=compress&cs=tinysrgb&w=400",enrolled:!0,completedLessons:((X=ne==null?void 0:ne.materials)==null?void 0:X.completed)||0,totalLessons:Te.length,lastAccessed:new Date().toISOString(),skills:B.learning_objectives||[],prerequisites:B.prerequisites||[],modules:Te,assignments:P})}else console.error("Failed to fetch course data"),i({...f,modules:[],assignments:[]})}catch(k){console.error("Error fetching course data:",k),i({...f,modules:[],assignments:[]})}finally{g(!1)}})()},[s]);const C=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),Y=E=>{switch(E){case"pending":return"text-yellow-600 bg-yellow-100";case"submitted":return"text-blue-600 bg-blue-100";case"graded":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},ue=async E=>{if(!A.trim()&&!v){o({type:"error",message:"Please provide either text content or upload a file"});return}const R=new Date(E.dueDate);if(new Date>R){o({type:"error",message:"Assignment deadline has passed"});return}if(v&&v.size>10*1024*1024){o({type:"error",message:"File size must be less than 10MB"});return}w(!0);try{const J=ye();if(!J){alert("Please login to submit assignment");return}const X={text_content:A.trim()};v&&(X.file_name=v.name,X.file_path=`/uploads/${v.name}`);const k=await fetch(`http://localhost:5000/api/assignments/${E.id}/submit`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`},body:JSON.stringify(X)}),$=await k.json();k.ok?(o({type:"success",message:"Assignment submitted successfully!"}),i(U=>({...U,assignments:U.assignments.map(ee=>ee.id===E.id?{...ee,status:"submitted",submittedAt:new Date().toISOString()}:ee)})),y(""),p(null),j({show:!1,assignment:null})):o({type:"error",message:$.error||"Failed to submit assignment"})}catch(J){console.error("Error submitting assignment:",J),o({type:"error",message:"Failed to submit assignment. Please try again."})}finally{w(!1)}},H=E=>{j({show:!0,assignment:E}),y(""),p(null)},pe=async E=>{try{const R=ye();if(!R)return;if((await fetch(`http://localhost:5000/api/progress/material/${E}/complete`,{method:"POST",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}})).ok){if(i(J=>{var X;return{...J,modules:((X=J.modules)==null?void 0:X.map(k=>k.id===E?{...k,completed:!0}:k))||[]}}),S){const J=S.materials.completed+1,X=J/S.materials.total*100;h({...S,overall_progress:X,materials:{...S.materials,completed:J,completed_ids:[...S.materials.completed_ids,E]}}),i(k=>({...k,progress:X,completedLessons:J}))}o({type:"success",message:"Material marked as complete!"})}}catch(R){console.error("Failed to mark material as complete:",R)}},Ae=()=>e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg",children:e.jsx(G,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Progress"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:[f.progress,"%"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-green-100 rounded-lg",children:e.jsx(K,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Completed"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:[f.completedLessons,"/",f.totalLessons]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-purple-100 rounded-lg",children:e.jsx(Q,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Duration"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:f.duration})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-orange-100 rounded-lg",children:e.jsx(Z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Level"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:f.level})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:"About This Course"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 leading-relaxed mb-4 sm:mb-6",children:f.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2 sm:mb-3",children:"Skills You'll Learn"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:f.skills.map((E,R)=>e.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-blue-100 text-blue-700 rounded-full text-xs sm:text-sm",children:E},R))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2 sm:mb-3",children:"Prerequisites"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2",children:f.prerequisites.map((E,R)=>e.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 bg-gray-100 text-gray-700 rounded-full text-xs sm:text-sm",children:E},R))})]})]})]})]}),Oe=()=>e.jsx("div",{className:"space-y-3 sm:space-y-4",children:D.map(E=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 flex-1",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${E.completed?"bg-green-100":"bg-gray-100"}`,children:E.completed?e.jsx(K,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}):e.jsx(vs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900",children:E.title}),e.jsx("p",{className:"text-gray-600 text-xs sm:text-sm line-clamp-2",children:E.description}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:E.duration})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[E.completed?e.jsxs("button",{className:"bg-green-600 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm flex-1 sm:flex-initial justify-center",children:[e.jsx(K,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Completed"}),e.jsx("span",{className:"sm:hidden",children:"Done"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"bg-blue-600 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm flex-1 sm:flex-initial justify-center",children:[e.jsx(Be,{className:"h-3 w-3 sm:h-4 sm:w-4"}),"Start"]}),e.jsx("button",{onClick:()=>pe(E.id),className:"bg-gray-600 text-white px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg hover:bg-gray-700 transition-colors text-xs sm:text-sm",title:"Mark as complete",children:"âœ“"})]}),e.jsx("button",{onClick:()=>u(n===E.id?null:E.id),className:"p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_t,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]}),n===E.id&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Course Materials"}),e.jsx("div",{className:"space-y-3",children:E.materials.map(R=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="video"&&e.jsx(Qe,{className:"h-4 w-4 text-blue-600"}),R.type==="pdf"&&e.jsx(te,{className:"h-4 w-4 text-red-600"}),R.type==="link"&&e.jsx(Lt,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:R.title}),R.size&&e.jsx("p",{className:"text-sm text-gray-500",children:R.size})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[R.type==="video"&&e.jsxs("button",{onClick:()=>x({id:R.id,title:R.title}),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(Be,{className:"h-3 w-3"}),"Play"]}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(We,{className:"h-4 w-4"})})]})]},R.id))})]})]})},E.id))}),Se=()=>e.jsx("div",{className:"space-y-3 sm:space-y-4",children:I.length===0?e.jsxs("div",{className:"text-center py-8 sm:py-12",children:[e.jsx(te,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-3 sm:mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No Assignments"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"No assignments available for this course yet."})]}):I.map(E=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-900 mb-2",children:E.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 line-clamp-2",children:E.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500",children:[e.jsxs("div",{className:`flex items-center gap-1 ${new Date(E.dueDate)<new Date?"text-red-600":new Date(E.dueDate)<new Date(Date.now()+24*60*60*1e3)?"text-orange-600":"text-gray-500"}`,children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",C(E.dueDate)]}),new Date(E.dueDate)<new Date&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full ml-2",children:"Overdue"}),new Date(E.dueDate)<new Date(Date.now()+24*60*60*1e3)&&new Date(E.dueDate)>new Date&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full ml-2",children:"Due Soon"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsxs("span",{children:[E.maxPoints," points"]})]}),E.submittedAt&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsxs("span",{children:["Submitted: ",C(E.submittedAt)]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium capitalize ${Y(E.status)}`,children:E.status==="pending"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"}),"Not Submitted"]}):E.status==="submitted"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"h-3 w-3"}),"Submitted"]}):E.status==="graded"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3"}),"Graded"]}):E.status}),E.grade!==void 0&&e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[E.grade,"/",E.maxPoints]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Grade"})]}),E.status==="pending"?new Date(E.dueDate)<new Date?e.jsxs("button",{disabled:!0,className:"bg-gray-400 text-white px-4 py-2 rounded-lg cursor-not-allowed flex items-center gap-2",title:"Assignment deadline has passed",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Overdue"]}):e.jsxs("button",{onClick:()=>H(E),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(De,{className:"h-4 w-4"}),"Submit"]}):e.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"View"})]})]})},E.id))}),Le=[{id:"overview",label:"Overview",icon:G},{id:"modules",label:"Modules",icon:Be},{id:"assignments",label:"Assignments",icon:te},{id:"discussions",label:"Discussions",icon:we}];return c?e.jsx("div",{className:"p-3 sm:p-4 md:p-6 flex items-center justify-center min-h-[300px] sm:min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-4 border-blue-600 border-t-transparent mx-auto mb-3 sm:mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Loading course details..."})]})}):e.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 text-sm sm:text-base",children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Courses"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4 sm:gap-6",children:[e.jsx("img",{src:f.thumbnail,alt:f.title,className:"w-full sm:w-32 h-48 sm:h-24 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:f.title}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mb-3 sm:mb-4",children:["by ",f.instructor]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-6 text-xs sm:text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ds,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-500 fill-current"}),e.jsx("span",{children:f.rating})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(W,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{className:"hidden sm:inline",children:[f.students.toLocaleString()," students"]}),e.jsx("span",{className:"sm:hidden",children:f.students})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:f.duration})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Et,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Gs,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),e.jsxs("div",{className:"mt-3 sm:mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Course Progress"}),e.jsxs("span",{children:[f.progress,"% Complete"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${f.progress}%`}})})]})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6 sm:mb-8 -mx-3 sm:mx-0 px-3 sm:px-0",children:e.jsx("nav",{className:"flex space-x-4 sm:space-x-8 overflow-x-auto scrollbar-hide",children:Le.map(E=>e.jsxs("button",{onClick:()=>t(E.id),className:`flex items-center gap-1.5 sm:gap-2 py-3 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap ${a===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(E.icon,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden xs:inline",children:E.label})]},E.id))})}),e.jsxs("div",{children:[a==="overview"&&Ae(),a==="modules"&&Oe(),a==="assignments"&&Se(),a==="discussions"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Course Discussions"}),e.jsx("p",{className:"text-gray-600",children:"Connect with fellow students and instructors"})]})]}),d&&e.jsx(st,{videoId:d.id,title:d.title,onClose:()=>x(null),onComplete:()=>pe(d.id)}),N.show&&N.assignment&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Submit Assignment"}),e.jsx("button",{onClick:()=>j({show:!1,assignment:null}),className:"text-gray-400 hover:text-gray-600 text-2xl sm:text-3xl",children:"Ã—"})]}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2",children:N.assignment.title})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:[e.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2",children:"Assignment Details"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3",children:N.assignment.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{children:["Due: ",C(N.assignment.dueDate)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsxs("span",{children:[N.assignment.maxPoints," points"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Submission"}),e.jsx("textarea",{value:A,onChange:E=>y(E.target.value),placeholder:"Enter your assignment text here...",className:"w-full h-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Upload (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",onChange:E=>{var ge;const R=(ge=E.target.files)==null?void 0:ge[0];if(R){if(R.size>10*1024*1024){o({type:"error",message:"File size must be less than 10MB"}),E.target.value="";return}if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","image/jpeg","image/jpg","image/png"].includes(R.type)){o({type:"error",message:"Please upload a valid file type (PDF, DOC, DOCX, TXT, JPG, PNG)"}),E.target.value="";return}p(R)}},className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:v?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(te,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(v.size/(1024*1024)).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",onClick:E=>{E.preventDefault(),p(null);const R=document.getElementById("file-upload");R&&(R.value="")},className:"text-red-600 hover:text-red-800",children:e.jsx(oe,{className:"h-5 w-5"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Click to upload a file"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"PDF, DOC, DOCX, TXT, JPG, PNG (Max 10MB)"})]})})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(Ne,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Important"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Once submitted, you cannot modify your assignment. Please review your work before submitting."})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>j({show:!1,assignment:null}),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{onClick:()=>ue(N.assignment),disabled:m||!A.trim()&&!v,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4"}),"Submit Assignment"]})})]})]})}),l&&e.jsx(ps,{type:l.type,message:l.message,onClose:()=>o(null)})]})},va=()=>{const[s,a]=r.useState("details"),[t,n]=r.useState(null),[u,d]=r.useState(""),[x,b]=r.useState(!1);r.useState(!1),r.useState(null);const i={id:"1",title:"Linear Regression Project",description:"Implement a linear regression model using Python and scikit-learn to predict house prices based on various features.",instructions:`
      ## Project Requirements
      
      1. **Data Analysis**: Perform exploratory data analysis on the provided housing dataset
      2. **Feature Engineering**: Create meaningful features from the raw data
      3. **Model Implementation**: Implement linear regression using scikit-learn
      4. **Evaluation**: Evaluate your model using appropriate metrics (RMSE, RÂ²)
      5. **Documentation**: Provide clear documentation and comments in your code
      
      ## Deliverables
      
      - Python notebook (.ipynb) with your complete analysis
      - Written report (PDF) summarizing your findings
      - Dataset with your engineered features
      
      ## Grading Criteria
      
      - Code Quality (30%)
      - Analysis Depth (25%)
      - Model Performance (25%)
      - Documentation (20%)
    `,courseId:"1",courseName:"Machine Learning Fundamentals",instructor:"Dr. Sarah Johnson",dueDate:"2024-02-15T23:59:00Z",maxPoints:100,submissionType:"file",allowedFileTypes:[".py",".ipynb",".pdf",".csv"],maxFileSize:"10MB",status:"pending",mySubmission:null,createdAt:"2024-02-01T10:00:00Z",updatedAt:"2024-02-01T10:00:00Z"},c=[{id:"1",studentId:"student1",studentName:"Alice Johnson",submittedAt:"2024-02-14T18:30:00Z",files:[{name:"linear_regression_analysis.ipynb",size:"2.3 MB",url:"#"},{name:"housing_report.pdf",size:"1.8 MB",url:"#"},{name:"processed_data.csv",size:"450 KB",url:"#"}],grade:92,feedback:"Excellent work! Your analysis was thorough and the model performance was impressive. Consider exploring feature interactions in future projects.",status:"graded"},{id:"2",studentId:"student2",studentName:"Bob Smith",submittedAt:"2024-02-15T22:45:00Z",files:[{name:"ml_project.ipynb",size:"1.9 MB",url:"#"},{name:"analysis_report.pdf",size:"1.2 MB",url:"#"}],status:"submitted"},{id:"3",studentId:"student3",studentName:"Carol Davis",submittedAt:"2024-02-16T08:15:00Z",files:[{name:"regression_project.ipynb",size:"2.1 MB",url:"#"}],status:"late"}],g=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=l=>{const o=new Date,h=new Date(l).getTime()-o.getTime();if(h<0)return"Overdue";const f=Math.floor(h/(1e3*60*60*24)),D=Math.floor(h%(1e3*60*60*24)/(1e3*60*60));return f>0?`${f} days, ${D} hours remaining`:`${D} hours remaining`},j=l=>{switch(l){case"submitted":return"text-blue-600 bg-blue-100";case"graded":return"text-green-600 bg-green-100";case"late":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},A=l=>{var S;const o=(S=l.target.files)==null?void 0:S[0];o&&n(o)},y=async()=>{b(!0),setTimeout(()=>{b(!1)},2e3)},v=()=>e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:i.description}),e.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",g(i.dueDate)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsxs("span",{children:[i.maxPoints," points"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsx("span",{children:i.instructor})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${new Date(i.dueDate)<new Date?"text-red-600 bg-red-100":"text-green-600 bg-green-100"}`,children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),N(i.dueDate)]})})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Instructions"}),e.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:i.instructions})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Submission Requirements"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:["â€¢ Allowed file types: ",i.allowedFileTypes.join(", ")]}),e.jsxs("p",{children:["â€¢ Maximum file size: ",i.maxFileSize]}),e.jsxs("p",{children:["â€¢ Submission type: ",i.submissionType]})]})]})]})}),p=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Submit Assignment"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",onChange:A,className:"hidden",id:"file-upload",accept:i.allowedFileTypes.join(",")}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(be,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Click to upload or drag and drop"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i.allowedFileTypes.join(", ")," up to ",i.maxFileSize]})]})]}),t&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(t.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:()=>n(null),className:"text-red-600 hover:text-red-700",children:e.jsx(oe,{className:"h-4 w-4"})})]})]}),i.submissionType==="both",e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:y,disabled:x||!t&&!u.trim(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[x?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(be,{className:"h-4 w-4"}),x?"Submitting...":"Submit Assignment"]})})]})]})}),m=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Student Submissions"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[c.length," submissions"]})]}),c.map(l=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:l.studentName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.studentName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted ",g(l.submittedAt)]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${j(l.status)}`,children:l.status})]}),e.jsx("div",{className:"space-y-2 mb-4",children:l.files.map((o,S)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx(te,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-sm text-gray-900",children:o.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",o.size,")"]}),e.jsx("button",{className:"ml-auto p-1 text-gray-400 hover:text-gray-600",children:e.jsx(We,{className:"h-4 w-4"})})]},S))}),l.grade!==void 0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium text-green-900",children:["Grade: ",l.grade,"/",i.maxPoints]}),e.jsxs("span",{className:"text-sm text-green-700",children:[Math.round(l.grade/i.maxPoints*100),"%"]})]}),l.feedback&&e.jsx("p",{className:"text-sm text-green-800",children:l.feedback})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(we,{className:"h-4 w-4"})}),l.status==="submitted"&&e.jsx("button",{className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Grade"})]})]})},l.id))]}),w=[{id:"details",label:"Details",icon:te},{id:"submit",label:"Submit",icon:be},{id:"submissions",label:"Submissions",icon:Users}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(He,{className:"h-4 w-4"}),"Back to Assignments"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:i.title}),e.jsx("p",{className:"text-gray-600",children:i.courseName})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i.status==="graded",e.jsx("div",{className:"px-4 py-2 rounded-lg font-medium bg-yellow-100 text-yellow-800",children:"Not Submitted"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsx("nav",{className:"flex space-x-8",children:w.map(l=>e.jsxs("button",{onClick:()=>a(l.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${s===l.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(l.icon,{className:"h-4 w-4"}),l.label]},l.id))})}),e.jsxs("div",{children:[s==="details"&&v(),s==="submit"&&p(),s==="submissions"&&m()]})]})},wa=()=>{r.useState("overview");const[s,a]=r.useState(!1),t={id:"1",title:"Machine Learning Fundamentals Quiz",description:"Test your understanding of basic machine learning concepts.",courseName:"Introduction to Machine Learning",timeLimit:30,totalQuestions:10,totalPoints:100,passingScore:70,maxAttempts:2,attempts:1,bestScore:85,status:"available",dueDate:"2024-02-20T23:59:00Z"},n=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(He,{className:"h-4 w-4"}),"Back to Course"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.courseName})]}),e.jsx("div",{className:"px-4 py-2 rounded-lg font-medium bg-green-100 text-green-800",children:"Available"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[t.timeLimit," minutes"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[t.totalPoints," points"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:[t.totalQuestions," questions"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{children:["Due: ",n(t.dueDate)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[t.bestScore,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Best Score"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Attempts: ",t.attempts,"/",t.maxAttempts]})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Quiz Instructions"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["â€¢ You have ",t.timeLimit," minutes to complete this quiz"]}),e.jsxs("li",{children:["â€¢ You can attempt this quiz up to ",t.maxAttempts," times"]}),e.jsxs("li",{children:["â€¢ You need ",t.passingScore,"% to pass"]}),e.jsx("li",{children:"â€¢ Results will be shown immediately after submission"})]})]}),!s&&t.attempts<t.maxAttempts&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(Be,{className:"h-5 w-5"}),"Start Quiz"]})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Previous Attempts"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Attempt 1"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Completed on ",n("2024-02-10T14:30:00Z")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[t.bestScore,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"8/10 correct"})]})]})]})]})]})},Sa=()=>{const[s,a]=r.useState(null),[t,n]=r.useState([]),[u,d]=r.useState(!1),[x,b]=r.useState(null),[i,c]=r.useState("all"),[g,N]=r.useState(null),[j,A]=r.useState(null),y=async()=>{d(!0),b(null);try{const[l,o]=await Promise.all([Ve.getPerformanceAnalysis(void 0,i),Ve.getPerformanceAlerts()]);a(l),n(o.alerts||[])}catch(l){b(l.message||"Failed to fetch learner analytics")}finally{d(!1)}},v=async l=>{try{const o=await Ve.getStudentRecommendations(l);A(o)}catch(o){console.error("Failed to fetch recommendations:",o)}};r.useEffect(()=>{y()},[i]);const p=l=>{switch(l){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},m=l=>{switch(l){case"fast":return e.jsx(re,{className:"h-4 w-4 text-green-600"});case"slow":return e.jsx(ts,{className:"h-4 w-4 text-red-600"});default:return e.jsx(as,{className:"h-4 w-4 text-blue-600"})}},w=l=>{switch(l){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return u&&!s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Ze,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading learner analytics..."})]}):x?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ws,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("span",{className:"text-red-800",children:x})]}),e.jsx("button",{onClick:y,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Learner Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Monitor student performance and identify learning patterns"})]}),e.jsxs("button",{onClick:y,disabled:u,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[e.jsx(Ze,{className:`h-4 w-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.total_students})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ts,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Slow Learners"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.summary.slow_learners_count})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Fast Learners"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.summary.fast_learners_count})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"h-8 w-8 text-yellow-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"At Risk"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:s.summary.students_at_risk})]})]})})]}),t.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ce,{className:"h-5 w-5 text-yellow-600 mr-2"}),"Performance Alerts"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:t.slice(0,5).map((l,o)=>e.jsx("div",{className:`p-4 rounded-lg border ${w(l.severity)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:l.message}),e.jsxs("p",{className:"text-sm opacity-75 mt-1",children:["Type: ",l.type," â€¢ ",new Date(l.created_at).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(l.severity)}`,children:l.severity})]})},o))})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow border",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"all",label:"All Students",icon:W},{key:"slow",label:"Slow Learners",icon:ts},{key:"fast",label:"Fast Learners",icon:re}].map(({key:l,label:o,icon:S})=>e.jsxs("button",{onClick:()=>c(l),className:`flex items-center py-4 px-1 border-b-2 font-medium text-sm ${i===l?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),o]},l))})}),e.jsx("div",{className:"p-6",children:s&&s.students.length>0?e.jsx("div",{className:"space-y-4",children:s.students.map(l=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ve,{className:"h-10 w-10 text-gray-400 bg-gray-100 rounded-full p-2"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:l.student_name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),l.email]}),e.jsxs("span",{children:[l.department," â€¢ ",l.year]}),e.jsxs("span",{children:["Roll: ",l.roll_number]})]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 text-blue-600 mr-2"}),e.jsxs("span",{className:"text-sm",children:["Performance: ",e.jsxs("strong",{children:[l.performance_score,"%"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[m(l.learning_pace),e.jsxs("span",{className:"text-sm ml-2",children:["Pace: ",e.jsx("strong",{className:"capitalize",children:l.learning_pace})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-600 mr-2"}),e.jsxs("span",{className:"text-sm",children:["Last login: ",e.jsxs("strong",{children:[l.days_since_login," days ago"]})]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium border ${p(l.risk_level)}`,children:[l.risk_level.toUpperCase()," RISK"]})]}),l.difficulties.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Areas of Difficulty:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.difficulties.map((o,S)=>e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:o.description},S))})]}),l.course_data&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.course_data.course_name}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Progress: ",l.course_data.progress,"%"]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${l.course_data.progress}%`}})})]})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("button",{onClick:()=>{N(l),v(l.student_id)},className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"View Recommendations"})})]})},l.student_id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No students found for the selected criteria."})]})})]}),g&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Recommendations for ",g.student_name]}),e.jsx("button",{onClick:()=>{N(null),A(null)},className:"text-gray-400 hover:text-gray-600",children:e.jsx(ws,{className:"h-6 w-6"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Performance Overview"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Score"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[j.performance_metrics.performance_score,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Learning Pace"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:j.performance_metrics.learning_pace})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Risk Level"}),e.jsx("p",{className:`text-lg font-semibold capitalize ${j.performance_metrics.risk_level==="high"?"text-red-600":j.performance_metrics.risk_level==="medium"?"text-yellow-600":"text-green-600"}`,children:j.performance_metrics.risk_level})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Recommended Actions"}),j.recommendations.map((l,o)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`flex-shrink-0 w-2 h-2 rounded-full mt-2 mr-3 ${l.type==="urgent"?"bg-red-500":l.type==="moderate"?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:l.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.description}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Suggested Actions:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:l.actions.map((S,h)=>e.jsx("li",{children:S},h))})]})]})]})},o))]})]})]})})]})},ka=()=>{const{user:s}=V(),[a,t]=r.useState([]),[n,u]=r.useState(!1),[d,x]=r.useState(null),[b,i]=r.useState(""),[c,g]=r.useState(""),N=async()=>{u(!0),x(null);try{const l=new URLSearchParams;c&&l.append("role",c),b&&l.append("search",b),l.append("page","1"),l.append("limit","50");const o=localStorage.getItem("access_token");if(!o)throw new Error("No authentication token found. Please login again.");const S=`http://localhost:5000/api/users?${l.toString()}`;console.log("Fetching users from:",S);const h=await fetch(S,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json",Accept:"application/json"}});if(!h.ok)throw h.status===401?new Error("Authentication failed. Please login again."):h.status===403?new Error("Access denied. Admin privileges required."):h.status===404?new Error("API endpoint not found. Check backend configuration."):new Error(`Server error: ${h.status}`);const f=await h.json();console.log("Users data received:",f),f.users&&Array.isArray(f.users)?t(f.users):Array.isArray(f)?t(f):(console.warn("Unexpected response structure:",f),t([]))}catch(l){console.error("Error fetching users:",l),l.message.includes("Failed to fetch")||l.name==="TypeError"?x("Cannot connect to server. Please check if the backend is running on http://localhost:5000"):x(l.message||"An unexpected error occurred while fetching users.")}finally{u(!1)}};r.useEffect(()=>{s&&["admin","super_admin"].includes(s.role)&&N()},[s,c,b]),r.useEffect(()=>{const l=async()=>{try{const o=await fetch("http://localhost:5000/api/health",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(o.ok){const S=await o.json();console.log("Backend connection successful:",S.message)}else throw new Error(`Health check failed: ${o.status}`)}catch(o){console.error("Backend connection failed:",o),x("Cannot connect to backend server. Please ensure it is running on http://localhost:5000")}};s&&["admin","super_admin"].includes(s.role)&&l()},[s]);const j=async(l,o)=>{if(confirm(`Are you sure you want to ${o} this user?`))try{const S=localStorage.getItem("access_token");if(!S){alert("Authentication token not found. Please login again.");return}const h=`http://localhost:5000/api/users/${l}/${o}`,f=await fetch(h,{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json",Accept:"application/json"}});if(f.ok){const D=await f.json();await N(),alert(D.message||`User ${o}d successfully`)}else{let D=`Failed to ${o} user`;if(f.status===401)D="Authentication failed. Please login again.";else if(f.status===403)D="Access denied. Admin privileges required.";else if(f.status===400)D="Cannot perform this action on the selected user.";else if(f.status===404)D="User not found.";else try{D=(await f.json()).error||D}catch{D=`Server error (${f.status})`}alert(D)}}catch(S){console.error(`Error ${o}ing user:`,S),alert("Error: Cannot connect to server. Please check if the backend is running.")}},A=async(l,o)=>{if(confirm(`Are you sure you want to DELETE user "${o}"? This action cannot be undone!`))try{const S=localStorage.getItem("access_token");if(!S){alert("Authentication token not found. Please login again.");return}const h=`http://localhost:5000/api/users/${l}`,f=await fetch(h,{method:"DELETE",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json",Accept:"application/json"}});if(f.ok)await N(),alert("User deleted successfully");else{let D="Failed to delete user";if(f.status===401)D="Authentication failed. Please login again.";else if(f.status===403)D="Access denied. Super admin privileges required.";else if(f.status===404)D="User not found.";else try{D=(await f.json()).error||D}catch{D=`Server error (${f.status})`}alert(D)}}catch(S){console.error("Error deleting user:",S),alert("Error: Cannot connect to server. Please check if the backend is running.")}},y=async(l,o)=>{const S=prompt(`Enter new password for ${o}:`);if(S){if(S.length<8){alert("Password must be at least 8 characters long");return}try{const h=localStorage.getItem("access_token");if(!h){alert("Authentication token not found. Please login again.");return}const f=`http://localhost:5000/api/users/${l}/reset-password`,D=await fetch(f,{method:"POST",headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({new_password:S})});if(D.ok){const I=await D.json();alert(I.message||"Password reset successfully")}else{let I="Failed to reset password";if(D.status===401)I="Authentication failed. Please login again.";else if(D.status===403)I="Access denied. Admin privileges required.";else if(D.status===404)I="User not found.";else try{I=(await D.json()).error||I}catch{I=`Server error (${D.status})`}alert(I)}}catch(h){console.error("Error resetting password:",h),alert("Error: Cannot connect to server. Please check if the backend is running.")}}},v=l=>{alert(`Edit user functionality will be implemented. User ID: ${l}`)},p=l=>{alert(`View user details functionality will be implemented. User ID: ${l}`)},m=l=>{switch(l){case"student":return e.jsx(Pe,{className:"h-4 w-4 text-blue-600"});case"teacher":return e.jsx(G,{className:"h-4 w-4 text-green-600"});case"admin":return e.jsx(fe,{className:"h-4 w-4 text-orange-600"});case"super_admin":return e.jsx(fe,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(W,{className:"h-4 w-4 text-gray-600"})}},w=l=>{switch(l){case"student":return"bg-blue-100 text-blue-800";case"teacher":return"bg-green-100 text-green-800";case"admin":return"bg-orange-100 text-orange-800";case"super_admin":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return!s||!["admin","super_admin"].includes(s.role)?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-red-800",children:"Access denied. Admin privileges required."}),e.jsxs("div",{className:"mt-2 text-sm text-red-600",children:[e.jsxs("p",{children:["Current user role: ",(s==null?void 0:s.role)||"Not logged in"]}),e.jsxs("p",{children:["Token exists: ",localStorage.getItem("access_token")?"Yes":"No"]})]})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{window.history.pushState({},"","/dashboard"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"â† Back to Dashboard"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage all users, roles, and permissions"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{const l=await fetch("http://localhost:5000/api/health",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(l.ok){const o=await l.json();alert(`Backend Status: ${o.status}
Message: ${o.message}
Timestamp: ${o.timestamp}`)}else alert(`Backend connection failed: HTTP ${l.status}`)}catch(l){alert(`Backend connection failed: ${l.message||"Cannot reach server"}`)}},className:"flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Test Connection"}),e.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),!1,!n&&!d&&a.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pe,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(l=>l.role==="student").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Teachers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(l=>l.role==="teacher").length})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.filter(l=>["admin","super_admin"].includes(l.role)).length})]})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow border",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:b,onChange:l=>i(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("select",{value:c,onChange:l=>g(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"student",children:"Students"}),e.jsx("option",{value:"teacher",children:"Teachers"}),e.jsx("option",{value:"admin",children:"Admins"}),e.jsx("option",{value:"super_admin",children:"Super Admins"})]}),e.jsxs("button",{onClick:N,disabled:n,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:[e.jsx(Ze,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow border overflow-hidden",children:[d&&e.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-800 font-medium",children:d}),d.includes("Cannot connect to server")&&e.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[e.jsx("p",{className:"font-medium",children:"To start the backend server:"}),e.jsxs("ol",{className:"list-decimal list-inside mt-1 space-y-1",children:[e.jsxs("li",{children:["Open a terminal in the ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"backend"})," directory"]}),e.jsxs("li",{children:["Install dependencies: ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"pip install -r requirements.txt"})]}),e.jsxs("li",{children:["Start the server: ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"python run.py"})]}),e.jsx("li",{children:"Ensure MongoDB is running (required for the backend)"}),e.jsxs("li",{children:["Server should start on ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"http://localhost:5000"})]})]})]})]}),e.jsx("button",{onClick:N,className:"text-red-600 hover:text-red-800 text-sm underline",children:"Retry"})]})}),n&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ze,{className:"h-8 w-8 animate-spin mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading users..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This may take a few seconds"})]}),!n&&!d&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:["No users found. ",b||c?"Try adjusting your search criteria.":"Start by adding some users."]})}):a.map(l=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.name}),e.jsx("div",{className:"text-sm text-gray-500",children:l.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[m(l.role),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${w(l.role)}`,children:l.role.replace("_"," ").toUpperCase()})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:l.department||"N/A"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>p(l._id),className:"p-1 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded",title:"View Details",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(l._id),className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-50 rounded",title:"Edit User",children:e.jsx(Us,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(l._id,l.name),className:"p-1 text-orange-600 hover:text-orange-900 hover:bg-orange-50 rounded",title:"Reset Password",children:e.jsx($t,{className:"h-4 w-4"})}),l.is_active?e.jsx("button",{onClick:()=>j(l._id,"deactivate"),className:"p-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded",title:"Block/Deactivate User",children:e.jsx(Ye,{className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>j(l._id,"activate"),className:"p-1 text-green-600 hover:text-green-900 hover:bg-green-50 rounded",title:"Unblock/Activate User",children:e.jsx(It,{className:"h-4 w-4"})}),(s==null?void 0:s.role)==="super_admin"&&e.jsx("button",{onClick:()=>A(l._id,l.name),className:"p-1 text-red-700 hover:text-red-900 hover:bg-red-50 rounded",title:"Delete User (Super Admin Only)",children:e.jsx(qe,{className:"h-4 w-4"})})]})})]},l._id))})]})})]})]})},Ca=({onUploadComplete:s,courseId:a,maxSizeMB:t=100})=>{const[n,u]=r.useState(null),[d,x]=r.useState(""),[b,i]=r.useState(""),[c,g]=r.useState(!1),[N,j]=r.useState(0),[A,y]=r.useState(""),[v,p]=r.useState(!1),m=o=>{var f;const S=(f=o.target.files)==null?void 0:f[0];if(!S)return;if(!S.type.startsWith("video/")){y("Please select a valid video file");return}if(S.size/(1024*1024)>t){y(`File size must be less than ${t}MB`);return}u(S),y(""),p(!1)},w=async()=>{if(!n)return;if(!d.trim()){y("Please enter a video title");return}g(!0),y(""),j(0);const o=localStorage.getItem("access_token")||localStorage.getItem("token");if(!o){y("Please login first. Token not found."),g(!1);return}console.log("ðŸ”‘ Using token for upload:",o.substring(0,20)+"...");const S=new FormData;S.append("video",n),S.append("title",d),S.append("description",b),a&&S.append("courseId",a);const h=new XMLHttpRequest;h.upload.addEventListener("progress",f=>{if(f.lengthComputable){const D=Math.round(f.loaded/f.total*100);j(D)}}),h.addEventListener("load",()=>{if(h.status===201)try{const f=JSON.parse(h.responseText);j(100),p(!0),s&&s(f)}catch{y("Upload completed but failed to parse response")}else try{const f=JSON.parse(h.responseText);y(f.error||`Upload failed with status ${h.status}`)}catch{y(`Upload failed with status ${h.status}`)}g(!1)}),h.addEventListener("error",()=>{y("Network error. Please check your connection and try again."),g(!1)}),h.addEventListener("abort",()=>{y("Upload cancelled"),g(!1)}),h.open("POST","http://localhost:5000/api/videos/upload"),h.setRequestHeader("Authorization",`Bearer ${o}`),h.send(S)},l=()=>{u(null),x(""),i(""),j(0),y(""),p(!1)};return e.jsx("div",{className:"w-full",children:n?e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qe,{className:"w-10 h-10 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(n.size/(1024*1024)).toFixed(2)," MB"]})]})]}),!c&&!v&&e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx(oe,{className:"w-5 h-5"})})]}),!c&&!v&&e.jsxs("div",{className:"space-y-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"videoTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Title *"}),e.jsx("input",{id:"videoTitle",type:"text",value:d,onChange:o=>x(o.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter video title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"videoDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"videoDescription",value:b,onChange:o=>i(o.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter video description",rows:3})]})]}),c&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[N,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${N}%`}})})]}),v&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-4",children:[e.jsx(K,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload successful!"})]}),A&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:A})]}),!c&&!v&&e.jsx("button",{onClick:w,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Video"})]}):e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(be,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["MP4, AVI, MOV, or other video formats (Max ",t,"MB)"]})]}),e.jsx("input",{type:"file",className:"hidden",accept:"video/*",onChange:m})]})})},Aa=({courseId:s,isTeacher:a=!1,onVideoSelect:t})=>{const[n,u]=r.useState([]),[d,x]=r.useState(!0),[b,i]=r.useState(""),[c,g]=r.useState(1),[N,j]=r.useState(1);r.useEffect(()=>{A()},[s,c]);const A=async()=>{try{x(!0);const m=localStorage.getItem("access_token")||localStorage.getItem("token");if(!m){i("Please login first. Token not found."),x(!1);return}const w=new URL("http://localhost:5000/api/videos/list");s&&w.searchParams.append("courseId",s),w.searchParams.append("page",c.toString()),w.searchParams.append("limit","10");const l=await fetch(w.toString(),{headers:{Authorization:`Bearer ${m}`}});if(!l.ok)throw new Error("Failed to fetch videos");const o=await l.json();u(o.videos),j(o.totalPages)}catch(m){i(m.message||"Failed to load videos")}finally{x(!1)}},y=async m=>{if(confirm("Are you sure you want to delete this video?"))try{const w=localStorage.getItem("token");if(!(await fetch(`http://localhost:5000/api/videos/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${w}`}})).ok)throw new Error("Failed to delete video");A()}catch(w){alert(w.message||"Failed to delete video")}},v=m=>m<1024*1024?`${(m/1024).toFixed(2)} KB`:`${(m/(1024*1024)).toFixed(2)} MB`,p=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return d?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):b?e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:b}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No videos uploaded yet"})]}):e.jsxs("div",{className:"space-y-4",children:[n.map(m=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-24 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(Qe,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:m.title}),m.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-4 h-4"}),m.views," views"]}),e.jsx("span",{children:v(m.fileSize)}),e.jsxs("span",{children:["Uploaded by ",m.uploadedBy.name]}),e.jsx("span",{children:p(m.uploadedAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t&&t(m),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Play video",children:e.jsx(Be,{className:"w-5 h-5"})}),a&&e.jsx("button",{onClick:()=>y(m.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete video",children:e.jsx(qe,{className:"w-5 h-5"})})]})]})},m.id)),N>1&&e.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>g(m=>Math.max(1,m-1)),disabled:c===1,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-700",children:["Page ",c," of ",N]}),e.jsx("button",{onClick:()=>g(m=>Math.min(N,m+1)),disabled:c===N,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})},Ta=()=>{const{user:s}=V(),[a,t]=r.useState("list"),[n,u]=r.useState(null),[d,x]=r.useState(0),b=(s==null?void 0:s.role)==="teacher",i=g=>{x(N=>N+1),t("list")},c=g=>{u(g)};return b?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Video Management"}),e.jsx("p",{className:"text-gray-600",children:"Upload and manage your course videos"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>t("list"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${a==="list"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Os,{className:"w-5 h-5"}),"My Videos"]}),e.jsxs("button",{onClick:()=>t("upload"),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${a==="upload"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(be,{className:"w-5 h-5"}),"Upload Video"]})]})}),e.jsx("div",{className:"p-6",children:a==="upload"?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(Ca,{onUploadComplete:i})}):e.jsx(Aa,{isTeacher:!0,onVideoSelect:c},d)})]})]}),n&&e.jsx(st,{videoId:n.id,title:n.title,onClose:()=>u(null)})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"Only teachers can access the video management page."})]})})},Pa=()=>{const[s,a]=r.useState([]),[t,n]=r.useState(!0),[u,d]=r.useState(null);r.useEffect(()=>{x()},[]);const x=async()=>{try{const c=ye();if(!c){console.log("No token found"),n(!1);return}const g=await fetch("http://localhost:5000/api/assignments/",{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});if(g.ok){const N=await g.json();a(N.assignments),console.log("Assignments fetched:",N.assignments)}else console.error("Failed to fetch assignments:",g.status)}catch(c){console.error("Error fetching assignments:",c)}finally{n(!1)}},b=async c=>{d(c);try{const g=ye(),N=await fetch(`http://localhost:5000/api/assignments/${c}/submit`,{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({text_content:`Test submission for assignment ${c} at ${new Date().toISOString()}`,file_name:"test-submission.txt",file_path:"/uploads/test-submission.txt"})}),j=await N.json();N.ok?(console.log("Assignment submitted successfully:",j),x()):console.error("Failed to submit assignment:",j.error)}catch(g){console.error("Error submitting assignment:",g)}finally{d(null)}},i=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return t?e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Assignment Test Page"}),e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-blue-600 border-t-transparent"}),e.jsx("span",{className:"ml-3",children:"Loading assignments..."})]})]}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Assignment Test Page"}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h2",{className:"font-semibold text-blue-900 mb-2",children:"Test Instructions:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ This page shows all assignments for the logged-in student"}),e.jsx("li",{children:'â€¢ Click "Test Submit" to submit an assignment with sample data'}),e.jsx("li",{children:'â€¢ Status should change from "pending" to "submitted"'}),e.jsx("li",{children:"â€¢ Check browser console for detailed logs"})]})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-600",children:"No assignments found. Make sure you're logged in as a student."})}):s.map(c=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:c.title}),e.jsx("p",{className:"text-gray-600 mb-3",children:c.description}),e.jsxs("p",{className:"text-sm text-blue-600 mb-3",children:["Course: ",c.course_title]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsxs("span",{children:["Due: ",i(c.due_date)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.max_points," points"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ${c.submission_status==="submitted"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:c.submission_status==="submitted"?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-3 w-3"}),"Submitted"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-3 w-3"}),"Pending"]})}),c.submission_status==="pending"&&e.jsx("button",{onClick:()=>b(c._id),disabled:u===c._id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:u===c._id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4"}),"Test Submit"]})})]})]})},c._id))}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Debug Info:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total assignments: ",s.length]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Pending: ",s.filter(c=>c.submission_status==="pending").length]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted: ",s.filter(c=>c.submission_status==="submitted").length]})]})]})},Da=()=>{const{user:s}=V();return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"System Status Check"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Frontend Running: Port 5174"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:"Backend Running: Port 5000"})]}),e.jsx("div",{className:"flex items-center gap-3",children:s?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-gray-700",children:["User Logged In: ",s.name," (",s.role,")"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{className:"text-gray-700",children:"No User Logged In"})]})})]})]}),(s==null?void 0:s.role)==="teacher"?e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Teacher Assignment View"}),e.jsx(et,{})]}):(s==null?void 0:s.role)==="student"?e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Student View"}),e.jsx("p",{className:"text-blue-700",children:"Go to Assignments page to submit assignments or Course Details to view course assignments."}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("a",{href:"/assignments",className:"block text-blue-600 hover:underline",children:"â†’ Go to Assignments Page"}),e.jsx("a",{href:"/courses/detail",className:"block text-blue-600 hover:underline",children:"â†’ Go to Course Details"}),e.jsx("a",{href:"/test/assignments",className:"block text-blue-600 hover:underline",children:"â†’ Go to Assignment Test Page"})]})]}):e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsx("p",{className:"text-gray-600",children:"Please login to continue"})})]})},Ea=()=>{V();const[s,a]=ss.useState("/dashboard");ss.useEffect(()=>{const n=window.location.pathname;a(n==="/"?"/dashboard":n);const u=()=>{const d=window.location.pathname;a(d==="/"?"/dashboard":d)};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[]);const t=()=>{switch(s){case"/dashboard":return e.jsx(As,{});case"/courses":return e.jsx(la,{});case"/courses/create":return e.jsx(oa,{});case"/videos":return e.jsx(Ta,{});case"/assignments":return e.jsx(da,{});case"/discussions":return e.jsx(ma,{});case"/analytics":return e.jsx(xa,{});case"/analytics/learners":return e.jsx(Sa,{});case"/admin/users":return e.jsx(ka,{});case"/ai-assistant":return e.jsx(ua,{});case"/profile":return e.jsx(ha,{});case"/settings":return e.jsx(ga,{});case"/notifications":return e.jsx(pa,{});case"/messages":return e.jsx(ba,{});case"/achievements":return e.jsx(fa,{});case"/students":return e.jsx(ja,{});case"/schedule":return e.jsx(ya,{});case"/courses/detail":return e.jsx(Na,{});case"/test/assignments":return e.jsx(Pa,{});case"/test":return e.jsx(Da,{});case"/assignments/detail":return e.jsx(va,{});case"/quizzes/detail":return e.jsx(wa,{});default:return e.jsx(As,{})}};return ss.useEffect(()=>{const n=u=>{const d=u.target;if(d.tagName==="A"&&d.href.startsWith(window.location.origin)){u.preventDefault();const x=d.pathname;a(x),window.history.pushState({},"",x)}};return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[]),t()},_a=(s=5)=>{const[a,t]=r.useState({isExpiringSoon:!1,timeUntilExpiration:0,shouldRefresh:!1});return r.useEffect(()=>{const n=()=>{const d=q.getAccessToken();if(!d){t({isExpiringSoon:!1,timeUntilExpiration:0,shouldRefresh:!1});return}try{const b=JSON.parse(atob(d.split(".")[1])).exp*1e3,i=Date.now(),c=b-i,g=s*60*1e3;t({isExpiringSoon:c<=g&&c>0,timeUntilExpiration:Math.max(0,c),shouldRefresh:c<=g&&c>0})}catch(x){console.error("Error parsing token:",x),t({isExpiringSoon:!1,timeUntilExpiration:0,shouldRefresh:!1})}};n();const u=setInterval(n,60*1e3);return()=>clearInterval(u)},[s]),a},La=s=>{const[a,t]=r.useState("");return r.useEffect(()=>{const n=()=>{if(s<=0){t("Expired");return}const d=Math.floor(s/(1e3*60)),x=Math.floor(s%(1e3*60)/1e3);d>0?t(`${d}m ${x}s`):t(`${x}s`)};n();const u=setInterval(n,1e3);return()=>clearInterval(u)},[s]),a},$a=({warningThresholdMinutes:s=5,className:a=""})=>{const{isExpiringSoon:t,timeUntilExpiration:n}=_a(s),u=La(n),{refreshUser:d}=V(),[x,b]=r.useState(!1),[i,c]=r.useState(!1),g=async()=>{b(!0);try{await je.refreshToken(),await d(),c(!0),setTimeout(()=>c(!1),3e4)}catch(N){console.error("Failed to refresh token:",N)}finally{b(!1)}};return!t||i?null:e.jsx("div",{className:`fixed top-4 right-4 z-50 ${a}`,children:e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg max-w-sm",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Session Expiring Soon"}),e.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:e.jsxs("p",{children:["Your session will expire in ",u]})}),e.jsxs("div",{className:"mt-3 flex space-x-2",children:[e.jsx("button",{onClick:g,disabled:x,className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 text-xs font-medium px-3 py-1 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Refreshing...":"Extend Session"}),e.jsx("button",{onClick:()=>c(!0),className:"text-yellow-800 hover:text-yellow-900 text-xs font-medium px-3 py-1 rounded-md transition-colors",children:"Dismiss"})]})]}),e.jsx("div",{className:"ml-4 flex-shrink-0",children:e.jsx("button",{onClick:()=>c(!0),className:"inline-flex text-yellow-400 hover:text-yellow-500 focus:outline-none focus:text-yellow-500 transition-colors",children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})})},Ia=()=>{const{user:s,isAuthenticated:a}=V();return s?e.jsxs(Bt,{children:[e.jsx(ea,{children:e.jsx(Ea,{})}),a&&e.jsx($a,{warningThresholdMinutes:5})]}):e.jsx(Jt,{})};function Ma(){return e.jsx(Gt,{children:e.jsx(Ia,{})})}Vs(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(Ma,{})}));
